"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _conf=_interopRequireDefault(require("../../conf")),_vXETable=require("../../v-x-e-table"),_tools=require("../../tools");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default={name:"PlxTableFilter",props:{filterStore:Object,optimizeOpts:Object},render:function(e){var t=this.filterStore,l=this.optimizeOpts,i=t.column,n=i?i.own.filterRender:null,r=n?_vXETable.Renderer.get(n.name):null;return e("div",{class:["plx-table--filter-wrapper","filter--prevent-default",r&&r.className?r.className:"",{"t--animat":l.animat,"is--multiple":t.multiple,"filter--active":t.visible}],style:t.style},t.visible?this.renderOptions(e,n,r).concat(this.renderFooter(e)):[])},methods:{renderOptions:function(e,t,l){var i=this,n=this.$parent,r=this.filterStore,o=r.args,s=r.column,c=r.multiple,a=s.slots;return a&&a.filter?[e("div",{class:"plx-table--filter-template"},a.filter.call(n,Object.assign({$table:n,context:this},o),e))]:l&&l.renderFilter?[e("div",{class:"plx-table--filter-template"},l.renderFilter.call(n,e,t,o,this))]:[e("ul",{class:"plx-table--filter-header"},[e("li",{class:["plx-table--filter-option",{"is--checked":c?r.isAllSelected:!r.options.some(function(e){return e.checked}),"is--indeterminate":c&&r.isIndeterminate}],attrs:{title:_conf.default.i18n(c?"plx.table.allTitle":"plx.table.allFilter")},on:{click:function(e){i.changeAllOption(e,!r.isAllSelected)}}},_conf.default.i18n("plx.table.allFilter"))]),e("ul",{class:"plx-table--filter-body"},r.options.map(function(t){return e("li",{class:["plx-table--filter-option",{"is--checked":t.checked}],attrs:{title:t.label},on:{click:function(e){i.changeOption(e,!t.checked,t)}}},_tools.UtilTools.formatText(t.label,1))}))]},renderFooter:function(e){var t=this.filterStore,l=t.column,i=t.multiple,n=l.own.filterRender,r=n?_vXETable.Renderer.get(n.name):null;return!i||r&&!1===r.isFooter?[]:[e("div",{class:"plx-table--filter-footer"},[e("button",{class:{"is--disabled":!t.isAllSelected&&!t.isIndeterminate},attrs:{disabled:!t.isAllSelected&&!t.isIndeterminate},on:{click:this.confirmFilter}},_conf.default.i18n("plx.table.confirmFilter")),e("button",{on:{click:this.resetFilter}},_conf.default.i18n("plx.table.resetFilter"))])]},filterCheckAllEvent:function(e,t){var l=this.filterStore;l.options.forEach(function(e){e.checked=t}),l.isAllSelected=t,l.isIndeterminate=!1},checkOptions:function(){var e=this.filterStore;e.isAllSelected=e.options.every(function(e){return e.checked}),e.isIndeterminate=!e.isAllSelected&&e.options.some(function(e){return e.checked})},changeRadioOption:function(e,t,l){this.filterStore.options.forEach(function(e){e.checked=!1}),l.checked=t,this.checkOptions(),this.$parent.confirmFilterEvent()},changeMultipleOption:function(e,t,l){l.checked=t,this.checkOptions()},changeAllOption:function(e,t){this.filterStore.multiple?this.filterCheckAllEvent(e,t):this.resetFilter()},changeOption:function(e,t,l){this.filterStore.multiple?this.changeMultipleOption(e,t,l):this.changeRadioOption(e,t,l)},confirmFilter:function(){this.$parent.confirmFilterEvent()},resetFilter:function(){this.$parent.resetFilterEvent()}}};exports.default=_default;