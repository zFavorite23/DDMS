{"remainingRequest":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js!D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\apply\\manhour\\Info.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\apply\\manhour\\Info.vue","mtime":1591957633397},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"D:\\\\DDMS\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getManhourPage as _getManhourPage, deleteObj, completeObj } from \"../../../api/apply/manhour.js\"; // import {getUserInfo} from \"../../../api/admin/user.js\";\n\nimport { mapGetters } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      query: {\n        userId: null,\n        status: '',\n        current: 1,\n        size: 10\n      },\n      statusOptions: [{\n        value: '',\n        label: '全部'\n      }, {\n        value: '0',\n        label: '审批中'\n      }, {\n        value: '1',\n        label: '同意'\n      }, {\n        value: '2',\n        label: '拒绝'\n      }],\n      pages: 0,\n      total: 0,\n      listLoading: false,\n      list: [],\n      number: '',\n      listType: '1',\n      htmlUrl: '',\n      dialogVisible: false,\n      completeOptions: [{\n        value: '0',\n        label: '未完成'\n      }, {\n        value: '100',\n        label: '已完成'\n      }, {\n        value: '10',\n        label: '完成10%'\n      }, {\n        value: '20',\n        label: '完成20%'\n      }, {\n        value: '30',\n        label: '完成30%'\n      }, {\n        value: '40',\n        label: '完成40%'\n      }, {\n        value: '50',\n        label: '完成50%'\n      }, {\n        value: '60',\n        label: '完成60%'\n      }, {\n        value: '70',\n        label: '完成70%'\n      }, {\n        value: '80',\n        label: '完成80%'\n      }, {\n        value: '90',\n        label: '完成90%'\n      }],\n      formData: {\n        manhourId: '',\n        complete: '100',\n        completeTime: ''\n      },\n      rules: {\n        complete: [{\n          required: true,\n          message: '请选择完成情况',\n          trigger: 'change'\n        }],\n        completeTime: [{\n          required: true,\n          message: '请选择预计完成时间',\n          trigger: 'change'\n        }]\n      },\n      saving: false,\n      pickerOptions: {\n        disabledDate: function disabledDate(time) {\n          return time.getTime() < new Date().getTime() - 3600 * 1000 * 24 * 10 || time.getTime() > new Date().getTime() + 3600 * 1000 * 24 * 20;\n        }\n      }\n    };\n  },\n  created: function created() {\n    window.localStorage.removeItem('editManhourInfo');\n    this.query.status = this.$route.query.status;\n\n    if (!this.query.status) {\n      this.query.status = '';\n    }\n\n    this.query.userId = this.userId;\n    this.getManhourPage();\n  },\n  computed: _objectSpread({}, mapGetters(['permissions', 'userId'])),\n  methods: {\n    openList: function openList(val) {\n      if (val == 2) {\n        this.$router.push({\n          path: '/apply/manhour/approver'\n        });\n      }\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.query.size = val;\n      this.getManhourPage();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.query.current = val;\n      this.getManhourPage();\n    },\n    getManhourPage: function getManhourPage() {\n      var _this = this;\n\n      this.listLoading = true;\n\n      _getManhourPage(this.query).then(function (response) {\n        _this.listLoading = false;\n        _this.total = response.data.data.total;\n        _this.query.current = response.data.data.current;\n        _this.query.size = response.data.data.size;\n        _this.list = response.data.data.records;\n        console.log(_this.list);\n\n        for (var i = 0; i < _this.list.length; i++) {\n          if (_this.list[i].alias == '' || _this.list[i].alias == null || _this.list[i].alias == undefined) {\n            _this.list[i].alias = '与项目无关';\n          }\n        }\n      }).catch(function () {\n        _this.listLoading = false;\n      });\n    },\n    handInfo: function handInfo(data) {\n      this.$router.push({\n        path: '/apply/manhour/info/' + data.manhourId\n      });\n    },\n    handleModal: function handleModal(data) {\n      window.localStorage.setItem('editManhourInfo', JSON.stringify(data));\n      this.$router.push({\n        path: '/apply/manhour/form'\n      });\n    },\n    handleDel: function handleDel(index, row) {\n      var _this2 = this;\n\n      if (row.manhourId) {\n        this.$confirm('确认删除吗?', '提示', {\n          type: 'warning'\n        }).then(function () {\n          deleteObj(row.manhourId).then(function (res) {\n            if (res.data.data) {\n              _this2.getManhourPage();\n            }\n          });\n        });\n      }\n    },\n    handleComplete: function handleComplete(index, row) {\n      this.formData.manhourId = row.manhourId;\n      this.formData.complete = row.complete;\n      this.formData.completeTime = row.completeTime;\n      this.dialogVisible = true;\n    },\n    handleSubmit: function handleSubmit() {\n      var _this3 = this;\n\n      this.$refs['formData'].validate(function (valid) {\n        if (valid) {\n          _this3.saving = true;\n          completeObj(_this3.formData).then(function (res) {\n            if (res.data.data) {\n              _this3.dialogVisible = false;\n\n              _this3.getManhourPage();\n            }\n          }).finally(function () {\n            _this3.saving = false;\n          });\n        }\n      });\n    },\n    //  合并\n    flitterData: function flitterData(arr) {\n      var spanOneArr = [],\n          spanTwoArr = [],\n          spanThreeArr = [],\n          concatOne = 0,\n          concatTwo = 0,\n          concatThree = 0;\n      arr.forEach(function (item, index) {\n        if (index === 0) {\n          spanOneArr.push(1);\n          spanTwoArr.push(1);\n          spanThreeArr.push(1);\n        } else {\n          if (item.day === arr[index - 1].day) {\n            //第一列需合并相同内容的判断条件\n            spanOneArr[concatOne] += 1;\n            spanOneArr.push(0);\n          } else {\n            spanOneArr.push(1);\n            concatOne = index;\n          }\n\n          if (item.day === arr[index - 1].day && item.integral === arr[index - 1].integral) {\n            //第二列需合并相同内容的判断条件\n            spanTwoArr[concatTwo] += 1;\n            spanTwoArr.push(0);\n          } else {\n            spanTwoArr.push(1);\n            concatTwo = index;\n          }\n        }\n      });\n      return {\n        one: spanOneArr,\n        two: spanTwoArr,\n        three: spanThreeArr\n      };\n    },\n    objectSpanMethod: function objectSpanMethod(_ref) {\n      var row = _ref.row,\n          column = _ref.column,\n          rowIndex = _ref.rowIndex,\n          columnIndex = _ref.columnIndex;\n\n      if (columnIndex === 0) {\n        var _row = this.flitterData(this.list).one[rowIndex];\n\n        var _col = _row > 0 ? 1 : 0;\n\n        return {\n          rowspan: _row,\n          colspan: _col\n        };\n      }\n\n      if (columnIndex === 1) {\n        var _row2 = this.flitterData(this.list).two[rowIndex];\n\n        var _col2 = _row2 > 0 ? 1 : 0;\n\n        return {\n          rowspan: _row2,\n          colspan: _col2\n        };\n      }\n    }\n  },\n  mounted: function mounted() {}\n};",{"version":3,"sources":["Info.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"\" id=\"myCanvas\">\r\n            <span class=\"tit\">工时 / 总数 : {{ total }}</span>\r\n        </div>\r\n        <el-table :data=\"list\" :span-method=\"objectSpanMethod\" stripe border v-loading=\"listLoading\" style=\"width: 100%;\" ref=\"imageTofile\">\r\n            <el-table-column prop=\"day\" min-width=\"100\" label=\"申请日期\"></el-table-column>\r\n            <el-table-column label=\"自评积分\">\r\n                <template slot-scope=\"scope\">\r\n                    <span>{{ scope.row.integral }} 分</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column min-width=\"200\" label=\"项目\" :show-overflow-tooltip=\"true\">\r\n                <template slot-scope=\"scope\">\r\n                    <span v-if=\"scope.row.alias == null || scope.row.alias == ''\">与项目无关</span>\r\n                    <span v-else>{{ scope.row.alias }}</span>\r\n                </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column min-width=\"80\" label=\"工作类别\">\r\n                <template slot-scope=\"scope\">\r\n                    <p v-if=\"scope.row.category == 1\">管理</p>\r\n                    <p v-else-if=\"scope.row.category == 2\">项目</p>\r\n                    <p v-else-if=\"scope.row.category == 3\">产品</p>\r\n                    <p v-else-if=\"scope.row.category == 4\">长身体</p>\r\n                    <p v-else></p>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"分类\" :show-overflow-tooltip=\"true\">\r\n                <template slot-scope=\"scope\">\r\n                    <p v-if=\"scope.row.category == '1' && scope.row.mainClassify == 1\">\r\n                        公司管理\r\n                        <br />\r\n                        <span v-if=\"scope.row.subClassify == 1\">公司战略规划</span>\r\n                        <span v-if=\"scope.row.subClassify == 2\">客户对接</span>\r\n                        <span v-if=\"scope.row.subClassify == 3\">项目对接</span>\r\n                        <span v-if=\"scope.row.subClassify == 4\">人员管理及招聘</span>\r\n                        <span v-if=\"scope.row.subClassify == 5\">其他事务</span>\r\n                    </p>\r\n                    <p v-if=\"scope.row.category == '1' && scope.row.mainClassify == 2\">\r\n                        财务管理\r\n                        <br />\r\n                        <span v-if=\"scope.row.subClassify == 1\">开票</span>\r\n                        <span v-if=\"scope.row.subClassify == 2\">支付</span>\r\n                        <span v-if=\"scope.row.subClassify == 3\">税筹</span>\r\n                        <span v-if=\"scope.row.subClassify == 4\">账务处理</span>\r\n                        <span v-if=\"scope.row.subClassify == 5\">预算</span>\r\n                        <span v-if=\"scope.row.subClassify == 6\">补贴申报</span>\r\n                        <span v-if=\"scope.row.subClassify == 7\">v</span>\r\n                    </p>\r\n                    <p v-if=\"scope.row.category == '1' && scope.row.mainClassify == 3\">\r\n                        人事管理\r\n                        <br />\r\n                        <span v-if=\"scope.row.subClassify == 1\">薪酬福利管理</span>\r\n                        <span v-if=\"scope.row.subClassify == 2\">考勤管理</span>\r\n                        <span v-if=\"scope.row.subClassify == 3\">员工入职手续办理</span>\r\n                        <span v-if=\"scope.row.subClassify == 4\">招聘</span>\r\n                        <span v-if=\"scope.row.subClassify == 5\">培训</span>\r\n                        <span v-if=\"scope.row.subClassify == 6\">员工关系管理</span>\r\n                        <span v-if=\"scope.row.subClassify == 7\">其他事务</span>\r\n                    </p>\r\n                    <p v-if=\"scope.row.category == '1' && scope.row.mainClassify == 4\">\r\n                        部门管理\r\n                        <br />\r\n                        <span v-if=\"scope.row.subClassify == 1\">人员招聘</span>\r\n                        <span v-if=\"scope.row.subClassify == 2\">人员管理及培训</span>\r\n                        <span v-if=\"scope.row.subClassify == 3\">部门发展计划</span>\r\n                        <span v-if=\"scope.row.subClassify == 4\">工作流程</span>\r\n                        <span v-if=\"scope.row.subClassify == 5\">其他日常事务</span>\r\n                    </p>\r\n                    <p v-if=\"scope.row.category == '1' && scope.row.mainClassify == 5\">\r\n                        工厂管理\r\n                        <br />\r\n                        <span v-if=\"scope.row.subClassify == 1\">工厂备料</span>\r\n                        <span v-if=\"scope.row.subClassify == 2\">环境卫生</span>\r\n                        <span v-if=\"scope.row.subClassify == 3\">房租水电</span>\r\n                        <span v-if=\"scope.row.subClassify == 4\">其他事务</span>\r\n                    </p>\r\n\r\n                    <p v-if=\"scope.row.category == '2'\">\r\n                        <span v-if=\"scope.row.subClassify == 1\">管理</span>\r\n                        <span v-if=\"scope.row.subClassify == 2\">销售</span>\r\n                        <span v-if=\"scope.row.subClassify == 3\">售前</span>\r\n                        <span v-if=\"scope.row.subClassify == 4\">交付</span>\r\n                        <span v-if=\"scope.row.subClassify == 5\">产品</span>\r\n                    </p>\r\n\r\n                    <p v-if=\"scope.row.category == '3'\">\r\n                        <span v-if=\"scope.row.subClassify == 1\">管理</span>\r\n                        <span v-if=\"scope.row.subClassify == 2\">交付</span>\r\n                    </p>\r\n\r\n                    <p v-if=\"scope.row.category == '4'\">\r\n                        <span v-if=\"scope.row.subClassify == 1\">学习</span>\r\n                        <span v-if=\"scope.row.subClassify == 2\">吃饭</span>\r\n                        <span v-if=\"scope.row.subClassify == 3\">睡觉</span>\r\n                    </p>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"reason\" min-width=\"150\" label=\"工作内容\" :show-overflow-tooltip=\"true\"></el-table-column>\r\n            <el-table-column min-width=\"100\" label=\"工时\">\r\n                <template slot-scope=\"scope\">\r\n                    <span>{{ scope.row.useHour }} 小时</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"审批工时\">\r\n                <template slot-scope=\"scope\">\r\n                    <p v-if=\"scope.row.checkMin != null\">{{ scope.row.checkMin }} 小时</p>\r\n                    <p v-else>{{ scope.row.useHour }} 小时</p>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column min-width=\"100\" label=\"验收人\">\r\n                <template slot-scope=\"scope\">\r\n                    <span v-if=\"scope.row.checkUserList != ''\">\r\n                        <div class=\"tag-group\" v-for=\"item in scope.row.checkUserList\">\r\n                            <p>{{ item.checkUserName }}</p>\r\n                        </div>\r\n                    </span>\r\n                    <span v-else><p>无人验收</p></span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column min-width=\"120\" label=\"反馈意见\">\r\n                <template slot-scope=\"scope\">\r\n                    <p>{{ scope.row.summary }}</p>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column min-width=\"180\" label=\"完成进度\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-tag v-if=\"scope.row.complete == '100'\" type=\"success\">已完成</el-tag>\r\n                    <div v-else>\r\n                        <el-tag type=\"warning\">完成 {{ scope.row.complete }}%</el-tag>\r\n                        <el-tag type=\"warning\">预计{{ scope.row.completeTime }}完成</el-tag>\r\n                    </div>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"status\" min-width=\"100\" label=\"审批状态\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-tag v-if=\"scope.row.status == 0\" type=\"warning\">审批中</el-tag>\r\n                    <el-tag v-if=\"scope.row.status == 1 && scope.row.complete == '100'\" type=\"success\">同意</el-tag>\r\n                    <el-tag v-if=\"scope.row.status == 1 && scope.row.complete != '100'\" type=\"warning\">同意(未完成)</el-tag>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-pagination\r\n            class=\"right\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"query.current\"\r\n            :page-sizes=\"[10, 20, 50, 100]\"\r\n            :page-size=\"query.size\"\r\n            layout=\"total, sizes, prev, pager, next\"\r\n            :total=\"total\"\r\n        ></el-pagination>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { getManhourPage, deleteObj, completeObj } from '../../../api/apply/manhour.js';\r\n// import {getUserInfo} from \"../../../api/admin/user.js\";\r\nimport { mapGetters } from 'vuex';\r\nexport default {\r\n    data() {\r\n        return {\r\n            query: {\r\n                userId: null,\r\n                status: '',\r\n                current: 1,\r\n                size: 10\r\n            },\r\n            statusOptions: [\r\n                {\r\n                    value: '',\r\n                    label: '全部'\r\n                },\r\n                {\r\n                    value: '0',\r\n                    label: '审批中'\r\n                },\r\n                {\r\n                    value: '1',\r\n                    label: '同意'\r\n                },\r\n                {\r\n                    value: '2',\r\n                    label: '拒绝'\r\n                }\r\n            ],\r\n            pages: 0,\r\n            total: 0,\r\n            listLoading: false,\r\n            list: [],\r\n            number: '',\r\n            listType: '1',\r\n            htmlUrl: '',\r\n            dialogVisible: false,\r\n            completeOptions: [\r\n                { value: '0', label: '未完成' },\r\n                { value: '100', label: '已完成' },\r\n                { value: '10', label: '完成10%' },\r\n                { value: '20', label: '完成20%' },\r\n                { value: '30', label: '完成30%' },\r\n                { value: '40', label: '完成40%' },\r\n                { value: '50', label: '完成50%' },\r\n                { value: '60', label: '完成60%' },\r\n                { value: '70', label: '完成70%' },\r\n                { value: '80', label: '完成80%' },\r\n                { value: '90', label: '完成90%' }\r\n            ],\r\n            formData: {\r\n                manhourId: '',\r\n                complete: '100',\r\n                completeTime: ''\r\n            },\r\n            rules: {\r\n                complete: [\r\n                    {\r\n                        required: true,\r\n                        message: '请选择完成情况',\r\n                        trigger: 'change'\r\n                    }\r\n                ],\r\n                completeTime: [\r\n                    {\r\n                        required: true,\r\n                        message: '请选择预计完成时间',\r\n                        trigger: 'change'\r\n                    }\r\n                ]\r\n            },\r\n            saving: false,\r\n            pickerOptions: {\r\n                disabledDate(time) {\r\n                    return time.getTime() < new Date().getTime() - 3600 * 1000 * 24 * 10 || time.getTime() > new Date().getTime() + 3600 * 1000 * 24 * 20;\r\n                }\r\n            }\r\n        };\r\n    },\r\n    created() {\r\n        window.localStorage.removeItem('editManhourInfo');\r\n        this.query.status = this.$route.query.status;\r\n        if (!this.query.status) {\r\n            this.query.status = '';\r\n        }\r\n        this.query.userId = this.userId;\r\n        this.getManhourPage();\r\n    },\r\n    computed: {\r\n        ...mapGetters(['permissions', 'userId'])\r\n    },\r\n    methods: {\r\n        openList(val) {\r\n            if (val == 2) {\r\n                this.$router.push({\r\n                    path: '/apply/manhour/approver'\r\n                });\r\n            }\r\n        },\r\n        handleSizeChange(val) {\r\n            this.query.size = val;\r\n            this.getManhourPage();\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.query.current = val;\r\n            this.getManhourPage();\r\n        },\r\n\r\n        getManhourPage() {\r\n            this.listLoading = true;\r\n            getManhourPage(this.query)\r\n                .then(response => {\r\n                    this.listLoading = false;\r\n                    this.total = response.data.data.total;\r\n                    this.query.current = response.data.data.current;\r\n                    this.query.size = response.data.data.size;\r\n                    this.list = response.data.data.records;\r\n                    console.log(this.list);\r\n                    for (var i = 0; i < this.list.length; i++) {\r\n                        if (this.list[i].alias == '' || this.list[i].alias == null || this.list[i].alias == undefined) {\r\n                            this.list[i].alias = '与项目无关';\r\n                        }\r\n                    }\r\n                })\r\n                .catch(() => {\r\n                    this.listLoading = false;\r\n                });\r\n        },\r\n        handInfo(data) {\r\n            this.$router.push({\r\n                path: '/apply/manhour/info/' + data.manhourId\r\n            });\r\n        },\r\n        handleModal(data) {\r\n            window.localStorage.setItem('editManhourInfo', JSON.stringify(data));\r\n            this.$router.push({\r\n                path: '/apply/manhour/form'\r\n            });\r\n        },\r\n        handleDel(index, row) {\r\n            if (row.manhourId) {\r\n                this.$confirm('确认删除吗?', '提示', {\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    deleteObj(row.manhourId).then(res => {\r\n                        if (res.data.data) {\r\n                            this.getManhourPage();\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        },\r\n        handleComplete(index, row) {\r\n            this.formData.manhourId = row.manhourId;\r\n            this.formData.complete = row.complete;\r\n            this.formData.completeTime = row.completeTime;\r\n\r\n            this.dialogVisible = true;\r\n        },\r\n        handleSubmit() {\r\n            this.$refs['formData'].validate(valid => {\r\n                if (valid) {\r\n                    this.saving = true;\r\n                    completeObj(this.formData)\r\n                        .then(res => {\r\n                            if (res.data.data) {\r\n                                this.dialogVisible = false;\r\n                                this.getManhourPage();\r\n                            }\r\n                        })\r\n                        .finally(() => {\r\n                            this.saving = false;\r\n                        });\r\n                }\r\n            });\r\n        },\r\n        //  合并\r\n        flitterData(arr) {\r\n            let spanOneArr = [],\r\n                spanTwoArr = [],\r\n                spanThreeArr = [],\r\n                concatOne = 0,\r\n                concatTwo = 0,\r\n                concatThree = 0;\r\n            arr.forEach((item, index) => {\r\n                if (index === 0) {\r\n                    spanOneArr.push(1);\r\n                    spanTwoArr.push(1);\r\n                    spanThreeArr.push(1);\r\n                } else {\r\n                    if (item.day === arr[index - 1].day) {\r\n                        //第一列需合并相同内容的判断条件\r\n                        spanOneArr[concatOne] += 1;\r\n                        spanOneArr.push(0);\r\n                    } else {\r\n                        spanOneArr.push(1);\r\n                        concatOne = index;\r\n                    }\r\n                    if (item.day === arr[index - 1].day && item.integral === arr[index - 1].integral) {\r\n                        //第二列需合并相同内容的判断条件\r\n                        spanTwoArr[concatTwo] += 1;\r\n                        spanTwoArr.push(0);\r\n                    } else {\r\n                        spanTwoArr.push(1);\r\n                        concatTwo = index;\r\n                    }\r\n                }\r\n            });\r\n            return {\r\n                one: spanOneArr,\r\n                two: spanTwoArr,\r\n                three: spanThreeArr\r\n            };\r\n        },\r\n\r\n        objectSpanMethod({ row, column, rowIndex, columnIndex }) {\r\n            if (columnIndex === 0) {\r\n                const _row = this.flitterData(this.list).one[rowIndex];\r\n                const _col = _row > 0 ? 1 : 0;\r\n                return {\r\n                    rowspan: _row,\r\n                    colspan: _col\r\n                };\r\n            }\r\n            if (columnIndex === 1) {\r\n                const _row = this.flitterData(this.list).two[rowIndex];\r\n                const _col = _row > 0 ? 1 : 0;\r\n                return {\r\n                    rowspan: _row,\r\n                    colspan: _col\r\n                };\r\n            }\r\n        }\r\n    },\r\n    mounted() {}\r\n};\r\n</script>\r\n<style type=\"text/scss\" lang=\"scss\"></style>\n"],"sourceRoot":"src/views/apply/manhour"}]}