{"remainingRequest":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js!D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\project\\ItemForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\project\\ItemForm.vue","mtime":1592626873102},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"D:\\\\DDMS\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { addItem, editItem } from \"../../api/project/item.js\";\nimport { getUserList as _getUserList } from \"../../api/admin/user.js\";\nimport { getItemVosWithItemId as _getItemVosWithItemId } from \"../../api/project/team.js\";\nimport { mapGetters } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      aliasName: '项目别名',\n      userName: '总协调',\n      formData: {\n        newData: true,\n        itemId: '',\n        userId: null,\n        type: '1',\n        name: '',\n        alias: '',\n        teamList: [],\n        status: '0',\n        endDate: '',\n        contractAmountYuan: 0,\n        approverids: ''\n      },\n      statusOptions: [{\n        value: '0',\n        label: '未签'\n      }, {\n        value: '1',\n        label: '已签未付'\n      }, {\n        value: '11',\n        label: '已签已付1'\n      }, {\n        value: '12',\n        label: '已签已付2'\n      }, {\n        value: '13',\n        label: '已签已付3'\n      }, {\n        value: '14',\n        label: '已签已付4'\n      }, {\n        value: '15',\n        label: '已签已付5'\n      }, {\n        value: '5',\n        label: '付清未完成'\n      }, {\n        value: '6',\n        label: '付清已完成'\n      }, {\n        value: '9',\n        label: '结项'\n      }],\n      userOptions: [],\n      saving: false,\n      rules: {\n        type: [{\n          required: true,\n          message: '请选择类别',\n          trigger: 'change'\n        }],\n        alias: [{\n          required: true,\n          message: '请填写项目别名',\n          trigger: 'blur'\n        }],\n        userId: [{\n          required: true,\n          message: '请选择',\n          trigger: 'change'\n        }],\n        status: [{\n          required: true,\n          message: '请选择',\n          trigger: 'change'\n        }],\n        contractAmountYuan: [{\n          required: true,\n          message: '请填【与'\n        }] // endDate: [\n        //     { required: true, message: '请选择', trigger: 'change' },\n        // ]\n\n      },\n      applyUserList: [{\n        userId: '12',\n        username: '伍晓苑',\n        avatar: 'http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZRia3451hkfbsd4LrTrJgNB0elwzR9LGQcGczTibaN3WvaWf5U14oSGJrQb0JTbdPSIKSF7MNhhPQ/132'\n      }],\n      applyUserList2: [{\n        userId: '14',\n        username: '徐金波',\n        avatar: 'http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI3tWGQkicicpiacbnA2PvkrgnCHXafsZUeFAB2DTmlTXDj4454J7l2NO1LLBPpFWjy85VOEiaWNMdhgw/132'\n      }]\n    };\n  },\n  created: function created() {\n    this.formData.userId = this.userId;\n    this.getUserList();\n    var editProjectInfo = JSON.parse(window.localStorage.getItem('editProjectInfo'));\n\n    if (editProjectInfo) {\n      this.typeChange(editProjectInfo.type);\n      this.formData.newData = false;\n      this.formData.itemId = editProjectInfo.itemId;\n      this.formData.userId = editProjectInfo.userId;\n      this.formData.type = editProjectInfo.type;\n      this.formData.name = editProjectInfo.name;\n      this.formData.alias = editProjectInfo.alias;\n      this.getItemVosWithItemId(editProjectInfo.itemId);\n      this.formData.status = editProjectInfo.status;\n      this.formData.endDate = editProjectInfo.endDate;\n      this.formData.contractAmountYuan = editProjectInfo.contractAmountYuan;\n    }\n  },\n  computed: _objectSpread({}, mapGetters(['permissions', 'userId'])),\n  methods: {\n    getItemVosWithItemId: function getItemVosWithItemId(itemId) {\n      var _this = this;\n\n      _getItemVosWithItemId(itemId).then(function (response) {\n        response.data.data.forEach(function (element) {\n          _this.formData.teamList.push(element.userId);\n        });\n      });\n    },\n    getUserList: function getUserList() {\n      var _this2 = this;\n\n      _getUserList().then(function (response) {\n        response.data.data.forEach(function (element) {\n          _this2.userOptions.push({\n            value: element.userId,\n            label: element.username\n          });\n        });\n      });\n    },\n    teamSelect: function teamSelect(val) {\n      console.log(val);\n    },\n    typeChange: function typeChange(val) {\n      this.aliasName = val === '1' ? '项目别名' : '产品别名';\n      this.userName = val === '1' ? '总协调' : '产品经理';\n    },\n    backHistory: function backHistory() {\n      window.localStorage.removeItem('editProjectInfo');\n      this.formData.newData = true;\n      this.formData.itemId = '';\n      this.formData.userId = '';\n      this.formData.type = '1';\n      this.formData.name = '';\n      this.formData.alias = '';\n      this.formData.status = '';\n      this.formData.endDate = '';\n      this.formData.contractAmountYuan = 0;\n      this.$router.go(-1);\n    },\n    onSubmit: function onSubmit() {\n      var _this3 = this;\n\n      if (this.formData.type == 1) {\n        this.formData.approverids = '12';\n      }\n\n      if (this.formData.type == 2) {\n        this.formData.approverids = '14';\n      }\n\n      this.$refs['formData'].validate(function (valid) {\n        if (valid) {\n          var aliasList = _this3.formData.alias.split('-');\n\n          if (aliasList.length < 2) {\n            _this3.$message.error('项目别名不规范');\n\n            return false;\n          }\n\n          _this3.saving = true;\n\n          if (!_this3.formData.newData) {\n            editItem(_this3.formData).then(function (res) {\n              if (res.data.data) {\n                _this3.backHistory();\n              }\n            }).finally(function () {\n              _this3.saving = false;\n            });\n          } else {\n            addItem(_this3.formData).then(function (res) {\n              if (res.data.data) {\n                _this3.backHistory();\n              }\n            }).finally(function () {\n              _this3.saving = false;\n            });\n          }\n        }\n      });\n    }\n  },\n  mounted: function mounted() {}\n};",{"version":3,"sources":["ItemForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuPA,SAAA,OAAA,EAAA,QAAA;AACA,SAAA,WAAA,IAAA,YAAA;AACA,SAAA,oBAAA,IAAA,qBAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,QAAA,EAAA;AACA,QAAA,OAAA,EAAA,IADA;AAEA,QAAA,MAAA,EAAA,EAFA;AAGA,QAAA,MAAA,EAAA,IAHA;AAIA,QAAA,IAAA,EAAA,GAJA;AAKA,QAAA,IAAA,EAAA,EALA;AAMA,QAAA,KAAA,EAAA,EANA;AAOA,QAAA,QAAA,EAAA,EAPA;AAQA,QAAA,MAAA,EAAA,GARA;AASA,QAAA,OAAA,EAAA,EATA;AAUA,QAAA,kBAAA,EAAA,CAVA;AAWA,QAAA,WAAA,EAAA;AAXA,OAHA;AAgBA,MAAA,aAAA,EAAA,CACA;AACA,QAAA,KAAA,EAAA,GADA;AAEA,QAAA,KAAA,EAAA;AAFA,OADA,EAKA;AACA,QAAA,KAAA,EAAA,GADA;AAEA,QAAA,KAAA,EAAA;AAFA,OALA,EASA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA;AAFA,OATA,EAaA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAbA,EAiBA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAjBA,EAqBA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA;AAFA,OArBA,EAyBA;AACA,QAAA,KAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAzBA,EA6BA;AACA,QAAA,KAAA,EAAA,GADA;AAEA,QAAA,KAAA,EAAA;AAFA,OA7BA,EAiCA;AACA,QAAA,KAAA,EAAA,GADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAjCA,EAqCA;AACA,QAAA,KAAA,EAAA,GADA;AAEA,QAAA,KAAA,EAAA;AAFA,OArCA,CAhBA;AA0DA,MAAA,WAAA,EAAA,EA1DA;AA2DA,MAAA,MAAA,EAAA,KA3DA;AA4DA,MAAA,KAAA,EAAA;AACA,QAAA,IAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,OAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA,CADA;AAEA,QAAA,KAAA,EAAA,CACA;AACA,UAAA,QAAA,EAAA,IADA;AAEA,UAAA,OAAA,EAAA,SAFA;AAGA,UAAA,OAAA,EAAA;AAHA,SADA,CAFA;AASA,QAAA,MAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,KAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA,CATA;AAUA,QAAA,MAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,KAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA,CAVA;AAWA,QAAA,kBAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA,CAXA,CAYA;AACA;AACA;;AAdA,OA5DA;AA4EA,MAAA,aAAA,EAAA,CACA;AACA,QAAA,MAAA,EAAA,IADA;AAEA,QAAA,QAAA,EAAA,KAFA;AAGA,QAAA,MAAA,EAAA;AAHA,OADA,CA5EA;AAmFA,MAAA,cAAA,EAAA,CACA;AACA,QAAA,MAAA,EAAA,IADA;AAEA,QAAA,QAAA,EAAA,KAFA;AAGA,QAAA,MAAA,EAAA;AAHA,OADA;AAnFA,KAAA;AA2FA,GA7FA;AA8FA,EAAA,OA9FA,qBA8FA;AACA,SAAA,QAAA,CAAA,MAAA,GAAA,KAAA,MAAA;AACA,SAAA,WAAA;AAEA,QAAA,eAAA,GAAA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;;AACA,QAAA,eAAA,EAAA;AACA,WAAA,UAAA,CAAA,eAAA,CAAA,IAAA;AACA,WAAA,QAAA,CAAA,OAAA,GAAA,KAAA;AACA,WAAA,QAAA,CAAA,MAAA,GAAA,eAAA,CAAA,MAAA;AACA,WAAA,QAAA,CAAA,MAAA,GAAA,eAAA,CAAA,MAAA;AACA,WAAA,QAAA,CAAA,IAAA,GAAA,eAAA,CAAA,IAAA;AACA,WAAA,QAAA,CAAA,IAAA,GAAA,eAAA,CAAA,IAAA;AACA,WAAA,QAAA,CAAA,KAAA,GAAA,eAAA,CAAA,KAAA;AAEA,WAAA,oBAAA,CAAA,eAAA,CAAA,MAAA;AAEA,WAAA,QAAA,CAAA,MAAA,GAAA,eAAA,CAAA,MAAA;AACA,WAAA,QAAA,CAAA,OAAA,GAAA,eAAA,CAAA,OAAA;AACA,WAAA,QAAA,CAAA,kBAAA,GAAA,eAAA,CAAA,kBAAA;AACA;AACA,GAlHA;AAmHA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,aAAA,EAAA,QAAA,CAAA,CADA,CAnHA;AAsHA,EAAA,OAAA,EAAA;AACA,IAAA,oBADA,gCACA,MADA,EACA;AAAA;;AACA,MAAA,qBAAA,CAAA,MAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA,MAAA;AACA,SAFA;AAGA,OAJA;AAKA,KAPA;AAQA,IAAA,WARA,yBAQA;AAAA;;AACA,MAAA,YAAA,GAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,OAAA,CAAA,UAAA,OAAA,EAAA;AACA,UAAA,MAAA,CAAA,WAAA,CAAA,IAAA,CAAA;AACA,YAAA,KAAA,EAAA,OAAA,CAAA,MADA;AAEA,YAAA,KAAA,EAAA,OAAA,CAAA;AAFA,WAAA;AAIA,SALA;AAMA,OAPA;AAQA,KAjBA;AAkBA,IAAA,UAlBA,sBAkBA,GAlBA,EAkBA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,KApBA;AAqBA,IAAA,UArBA,sBAqBA,GArBA,EAqBA;AACA,WAAA,SAAA,GAAA,GAAA,KAAA,GAAA,GAAA,MAAA,GAAA,MAAA;AACA,WAAA,QAAA,GAAA,GAAA,KAAA,GAAA,GAAA,KAAA,GAAA,MAAA;AACA,KAxBA;AAyBA,IAAA,WAzBA,yBAyBA;AACA,MAAA,MAAA,CAAA,YAAA,CAAA,UAAA,CAAA,iBAAA;AACA,WAAA,QAAA,CAAA,OAAA,GAAA,IAAA;AACA,WAAA,QAAA,CAAA,MAAA,GAAA,EAAA;AACA,WAAA,QAAA,CAAA,MAAA,GAAA,EAAA;AACA,WAAA,QAAA,CAAA,IAAA,GAAA,GAAA;AACA,WAAA,QAAA,CAAA,IAAA,GAAA,EAAA;AACA,WAAA,QAAA,CAAA,KAAA,GAAA,EAAA;AACA,WAAA,QAAA,CAAA,MAAA,GAAA,EAAA;AACA,WAAA,QAAA,CAAA,OAAA,GAAA,EAAA;AACA,WAAA,QAAA,CAAA,kBAAA,GAAA,CAAA;AACA,WAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA,KArCA;AAsCA,IAAA,QAtCA,sBAsCA;AAAA;;AACA,UAAA,KAAA,QAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,WAAA,GAAA,IAAA;AACA;;AACA,UAAA,KAAA,QAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,WAAA,GAAA,IAAA;AACA;;AACA,WAAA,KAAA,CAAA,UAAA,EAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,cAAA,SAAA,GAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA;;AACA,cAAA,SAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,SAAA;;AACA,mBAAA,KAAA;AACA;;AACA,UAAA,MAAA,CAAA,MAAA,GAAA,IAAA;;AACA,cAAA,CAAA,MAAA,CAAA,QAAA,CAAA,OAAA,EAAA;AACA,YAAA,QAAA,CAAA,MAAA,CAAA,QAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,kBAAA,GAAA,CAAA,IAAA,CAAA,IAAA,EAAA;AACA,gBAAA,MAAA,CAAA,WAAA;AACA;AACA,aALA,EAMA,OANA,CAMA,YAAA;AACA,cAAA,MAAA,CAAA,MAAA,GAAA,KAAA;AACA,aARA;AASA,WAVA,MAUA;AACA,YAAA,OAAA,CAAA,MAAA,CAAA,QAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,kBAAA,GAAA,CAAA,IAAA,CAAA,IAAA,EAAA;AACA,gBAAA,MAAA,CAAA,WAAA;AACA;AACA,aALA,EAMA,OANA,CAMA,YAAA;AACA,cAAA,MAAA,CAAA,MAAA,GAAA,KAAA;AACA,aARA;AASA;AACA;AACA,OA9BA;AA+BA;AA5EA,GAtHA;AAoMA,EAAA,OApMA,qBAoMA,CAAA;AApMA,CAAA","sourcesContent":["<template>\r\n    <div>\r\n        <el-form label-position=\"right\" :model=\"formData\" :rules=\"rules\" ref=\"formData\" label-width=\"100px\" style=\"max-width: 800px;\">\r\n            <el-form-item label=\"类别\" prop=\"type\">\r\n                <el-radio-group v-model=\"formData.type\" @change=\"typeChange\">\r\n                    <el-radio label=\"1\">项目</el-radio>\r\n                    <el-radio label=\"2\">产品</el-radio>\r\n                </el-radio-group>\r\n            </el-form-item>\r\n            <el-form-item label=\"合同名称\">\r\n                <el-input v-model=\"formData.name\" placeholder=\"请填写合同名称\"></el-input>\r\n                <el-tag size=\"mini\" type=\"danger\">备注:立项所有项目名称用合同名称，未签署合同的与项目别名一致</el-tag>\r\n            </el-form-item>\r\n            <el-form-item :label=\"aliasName\" prop=\"alias\">\r\n                <el-input v-model=\"formData.alias\" placeholder=\"请填写别名\"></el-input>\r\n                <el-tag size=\"mini\" type=\"danger\">项目别名包含 甲方（如正和、万科，有些市政项目可以不加）- 地名（长春）- 项目描述（伊通河湿地智慧系统）</el-tag>\r\n            </el-form-item>\r\n\r\n            <el-row>\r\n                <el-col :md=\"{ span: 8 }\" :xs=\"{ span: 24 }\">\r\n                    <el-form-item :label=\"userName\" prop=\"userId\">\r\n                        <el-select v-model=\"formData.userId\" filterable placeholder=\"请选择\">\r\n                            <el-option v-for=\"item in userOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" :disabled=\"item.disabled\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                </el-col>\r\n                <!--                <el-col :md=\"{ span: 8 }\" :xs=\"{ span: 24 }\">-->\r\n                <!--                    <el-form-item label=\"销售负责人\">-->\r\n                <!--                        <el-select v-model=\"formData.sell\" placeholder=\"请选择\">-->\r\n                <!--                            <el-option-->\r\n                <!--                                v-for=\"item in userOptions\"-->\r\n                <!--                                :key=\"item.value\"-->\r\n                <!--                                :label=\"item.label\"-->\r\n                <!--                                :value=\"item.value\"-->\r\n                <!--                                :disabled=\"item.disabled\"-->\r\n                <!--                            >-->\r\n                <!--                            </el-option>-->\r\n                <!--                        </el-select>-->\r\n                <!--                    </el-form-item>-->\r\n                <!--                </el-col>-->\r\n                <!--                <el-col :md=\"{ span: 8 }\" :xs=\"{ span: 24 }\">-->\r\n                <!--                    <el-form-item label=\"商务负责人\">-->\r\n                <!--                        <el-select-->\r\n                <!--                            v-model=\"formData.business\"-->\r\n                <!--                            placeholder=\"请选择\"-->\r\n                <!--                        >-->\r\n                <!--                            <el-option-->\r\n                <!--                                v-for=\"item in businessOptions\"-->\r\n                <!--                                :key=\"item.value\"-->\r\n                <!--                                :label=\"item.label\"-->\r\n                <!--                                :value=\"item.value\"-->\r\n                <!--                                :disabled=\"item.disabled\"-->\r\n                <!--                            >-->\r\n                <!--                            </el-option>-->\r\n                <!--                        </el-select>-->\r\n                <!--                    </el-form-item>-->\r\n                <!--                </el-col>-->\r\n            </el-row>\r\n\r\n            <el-form-item label=\"项目成员\">\r\n                <el-checkbox-group v-model=\"formData.teamList\">\r\n                    <el-checkbox v-for=\"item in userOptions\" :label=\"item.value\" border style=\"width: 100px;\">{{ item.label }}</el-checkbox>\r\n                    <!--                    <el-checkbox label=\"杜国庆\" border disabled></el-checkbox>-->\r\n                </el-checkbox-group>\r\n            </el-form-item>\r\n\r\n            <!--            <el-row>-->\r\n            <!--                <el-col :md=\"{ span: 8 }\" :xs=\"{ span: 24 }\">-->\r\n            <!--                    <el-form-item label=\"场景营建\">-->\r\n            <!--                        <el-select-->\r\n            <!--                            v-model=\"formData.scene\"-->\r\n            <!--                            multiple-->\r\n            <!--                            collapse-tags-->\r\n            <!--                            placeholder=\"请选择\"-->\r\n            <!--                        >-->\r\n            <!--                            <el-option-->\r\n            <!--                                v-for=\"item in sceneOptions\"-->\r\n            <!--                                :key=\"item.value\"-->\r\n            <!--                                :label=\"item.label\"-->\r\n            <!--                                :value=\"item.value\"-->\r\n            <!--                                :disabled=\"item.disabled\"-->\r\n            <!--                            >-->\r\n            <!--                            </el-option>-->\r\n            <!--                        </el-select>-->\r\n            <!--                    </el-form-item>-->\r\n            <!--                </el-col>-->\r\n            <!--                <el-col :md=\"{ span: 8 }\" :xs=\"{ span: 24 }\">-->\r\n            <!--                    <el-form-item label=\"实施指导\">-->\r\n            <!--                        <el-select-->\r\n            <!--                            v-model=\"formData.guide\"-->\r\n            <!--                            multiple-->\r\n            <!--                            collapse-tags-->\r\n            <!--                            placeholder=\"请选择\"-->\r\n            <!--                        >-->\r\n            <!--                            <el-option-->\r\n            <!--                                v-for=\"item in guideOptions\"-->\r\n            <!--                                :key=\"item.value\"-->\r\n            <!--                                :label=\"item.label\"-->\r\n            <!--                                :value=\"item.value\"-->\r\n            <!--                                :disabled=\"item.disabled\"-->\r\n            <!--                            >-->\r\n            <!--                            </el-option>-->\r\n            <!--                        </el-select>-->\r\n            <!--                    </el-form-item>-->\r\n            <!--                </el-col>-->\r\n            <!--                <el-col :md=\"{ span: 8 }\" :xs=\"{ span: 24 }\">-->\r\n            <!--                    <el-form-item label=\"软件需求\">-->\r\n            <!--                        <el-select-->\r\n            <!--                            v-model=\"formData.need\"-->\r\n            <!--                            multiple-->\r\n            <!--                            collapse-tags-->\r\n            <!--                            placeholder=\"请选择\"-->\r\n            <!--                        >-->\r\n            <!--                            <el-option-->\r\n            <!--                                v-for=\"item in needOptions\"-->\r\n            <!--                                :key=\"item.value\"-->\r\n            <!--                                :label=\"item.label\"-->\r\n            <!--                                :value=\"item.value\"-->\r\n            <!--                                :disabled=\"item.disabled\"-->\r\n            <!--                            >-->\r\n            <!--                            </el-option>-->\r\n            <!--                        </el-select>-->\r\n            <!--                    </el-form-item>-->\r\n            <!--                </el-col>-->\r\n            <!--            </el-row>-->\r\n\r\n            <!--            <el-row>-->\r\n            <!--                <el-col :md=\"{ span: 8 }\" :xs=\"{ span: 24 }\">-->\r\n            <!--                    <el-form-item label=\"可视化\">-->\r\n            <!--                        <el-select-->\r\n            <!--                            v-model=\"formData.visual\"-->\r\n            <!--                            multiple-->\r\n            <!--                            collapse-tags-->\r\n            <!--                            placeholder=\"请选择\"-->\r\n            <!--                        >-->\r\n            <!--                            <el-option-->\r\n            <!--                                v-for=\"item in visualOptions\"-->\r\n            <!--                                :key=\"item.value\"-->\r\n            <!--                                :label=\"item.label\"-->\r\n            <!--                                :value=\"item.value\"-->\r\n            <!--                                :disabled=\"item.disabled\"-->\r\n            <!--                            >-->\r\n            <!--                            </el-option>-->\r\n            <!--                        </el-select>-->\r\n            <!--                    </el-form-item>-->\r\n            <!--                </el-col>-->\r\n            <!--                <el-col :md=\"{ span: 8 }\" :xs=\"{ span: 24 }\">-->\r\n            <!--                    <el-form-item label=\"智慧化\">-->\r\n            <!--                        <el-select-->\r\n            <!--                            v-model=\"formData.wisdom\"-->\r\n            <!--                            multiple-->\r\n            <!--                            collapse-tags-->\r\n            <!--                            placeholder=\"请选择\"-->\r\n            <!--                        >-->\r\n            <!--                            <el-option-->\r\n            <!--                                v-for=\"item in wisdomOptions\"-->\r\n            <!--                                :key=\"item.value\"-->\r\n            <!--                                :label=\"item.label\"-->\r\n            <!--                                :value=\"item.value\"-->\r\n            <!--                                :disabled=\"item.disabled\"-->\r\n            <!--                            >-->\r\n            <!--                            </el-option>-->\r\n            <!--                        </el-select>-->\r\n            <!--                    </el-form-item>-->\r\n            <!--                </el-col>-->\r\n            <!--                <el-col :md=\"{ span: 8 }\" :xs=\"{ span: 24 }\">-->\r\n            <!--                    <el-form-item label=\"产品研发\">-->\r\n            <!--                        <el-select-->\r\n            <!--                            v-model=\"formData.product\"-->\r\n            <!--                            multiple-->\r\n            <!--                            collapse-tags-->\r\n            <!--                            placeholder=\"请选择\"-->\r\n            <!--                        >-->\r\n            <!--                            <el-option-->\r\n            <!--                                v-for=\"item in productOptions\"-->\r\n            <!--                                :key=\"item.value\"-->\r\n            <!--                                :label=\"item.label\"-->\r\n            <!--                                :value=\"item.value\"-->\r\n            <!--                                :disabled=\"item.disabled\"-->\r\n            <!--                            >-->\r\n            <!--                            </el-option>-->\r\n            <!--                        </el-select>-->\r\n            <!--                    </el-form-item>-->\r\n            <!--                </el-col>-->\r\n            <!--            </el-row>-->\r\n\r\n            <!--            <el-form-item label=\"现场和运维\">-->\r\n            <!--                <el-select-->\r\n            <!--                    v-model=\"formData.site\"-->\r\n            <!--                    multiple-->\r\n            <!--                    collapse-tags-->\r\n            <!--                    placeholder=\"请选择\"-->\r\n            <!--                >-->\r\n            <!--                    <el-option-->\r\n            <!--                        v-for=\"item in siteOptions\"-->\r\n            <!--                        :key=\"item.value\"-->\r\n            <!--                        :label=\"item.label\"-->\r\n            <!--                        :value=\"item.value\"-->\r\n            <!--                        :disabled=\"item.disabled\"-->\r\n            <!--                    >-->\r\n            <!--                    </el-option>-->\r\n            <!--                </el-select>-->\r\n            <!--            </el-form-item>-->\r\n\r\n            <el-form-item label=\"状态\" prop=\"status\">\r\n                <el-select v-model=\"formData.status\" placeholder=\"请选择\">\r\n                    <el-option v-for=\"item in statusOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n\r\n            <el-row v-if=\"formData.type == '1'\">\r\n                <el-col :md=\"{ span: 8 }\">\r\n                    <el-form-item label=\"合同金额：\" prop=\"contractAmountYuan\">\r\n                        <el-input type=\"text\" placeholder=\"请输入合同金额\" v-model=\"formData.contractAmountYuan\"></el-input>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <el-form-item label=\"完工日期：\" prop=\"endDate\">\r\n                <el-date-picker\r\n                    v-model=\"formData.endDate\"\r\n                    type=\"date\"\r\n                    placeholder=\"选择日期\"\r\n                    format=\"yyyy 年 MM 月 dd 日\"\r\n                    value-format=\"yyyy-MM-dd\"\r\n                    class=\"complete\"\r\n                ></el-date-picker>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"审批人：\">\r\n                <div v-if=\"formData.type == 1\" class=\"apply-user-list\" v-for=\"user in applyUserList\">\r\n                    <el-avatar :size=\"60\" :src=\"user.avatar\"></el-avatar>\r\n                    <span class=\"username\">{{ user.username }}</span>\r\n                </div>\r\n                <div v-if=\"formData.type == 2\" class=\"apply-user-list\" v-for=\"user in applyUserList2\">\r\n                    <el-avatar :size=\"60\" :src=\"user.avatar\"></el-avatar>\r\n                    <span class=\"username\">{{ user.username }}</span>\r\n                </div>\r\n            </el-form-item>\r\n            <el-form-item style=\"text-align: center\">\r\n                <el-button type=\"primary\" @click=\"onSubmit\" :loading=\"saving\">保存</el-button>\r\n                <el-button @click=\"backHistory\">取消</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { addItem, editItem } from '../../api/project/item.js';\r\nimport { getUserList } from '../../api/admin/user.js';\r\nimport { getItemVosWithItemId } from '../../api/project/team.js';\r\nimport { mapGetters } from 'vuex';\r\nexport default {\r\n    data() {\r\n        return {\r\n            aliasName: '项目别名',\r\n            userName: '总协调',\r\n            formData: {\r\n                newData: true,\r\n                itemId: '',\r\n                userId: null,\r\n                type: '1',\r\n                name: '',\r\n                alias: '',\r\n                teamList: [],\r\n                status: '0',\r\n                endDate: '',\r\n                contractAmountYuan: 0,\r\n                approverids: ''\r\n            },\r\n            statusOptions: [\r\n                {\r\n                    value: '0',\r\n                    label: '未签'\r\n                },\r\n                {\r\n                    value: '1',\r\n                    label: '已签未付'\r\n                },\r\n                {\r\n                    value: '11',\r\n                    label: '已签已付1'\r\n                },\r\n                {\r\n                    value: '12',\r\n                    label: '已签已付2'\r\n                },\r\n                {\r\n                    value: '13',\r\n                    label: '已签已付3'\r\n                },\r\n                {\r\n                    value: '14',\r\n                    label: '已签已付4'\r\n                },\r\n                {\r\n                    value: '15',\r\n                    label: '已签已付5'\r\n                },\r\n                {\r\n                    value: '5',\r\n                    label: '付清未完成'\r\n                },\r\n                {\r\n                    value: '6',\r\n                    label: '付清已完成'\r\n                },\r\n                {\r\n                    value: '9',\r\n                    label: '结项'\r\n                }\r\n            ],\r\n            userOptions: [],\r\n            saving: false,\r\n            rules: {\r\n                type: [{ required: true, message: '请选择类别', trigger: 'change' }],\r\n                alias: [\r\n                    {\r\n                        required: true,\r\n                        message: '请填写项目别名',\r\n                        trigger: 'blur'\r\n                    }\r\n                ],\r\n                userId: [{ required: true, message: '请选择', trigger: 'change' }],\r\n                status: [{ required: true, message: '请选择', trigger: 'change' }],\r\n                contractAmountYuan: [{ required: true, message: '请填【与' }]\r\n                // endDate: [\r\n                //     { required: true, message: '请选择', trigger: 'change' },\r\n                // ]\r\n            },\r\n            applyUserList: [\r\n                {\r\n                    userId: '12',\r\n                    username: '伍晓苑',\r\n                    avatar: 'http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZRia3451hkfbsd4LrTrJgNB0elwzR9LGQcGczTibaN3WvaWf5U14oSGJrQb0JTbdPSIKSF7MNhhPQ/132'\r\n                }\r\n            ],\r\n            applyUserList2: [\r\n                {\r\n                    userId: '14',\r\n                    username: '徐金波',\r\n                    avatar: 'http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI3tWGQkicicpiacbnA2PvkrgnCHXafsZUeFAB2DTmlTXDj4454J7l2NO1LLBPpFWjy85VOEiaWNMdhgw/132'\r\n                }\r\n            ]\r\n        };\r\n    },\r\n    created() {\r\n        this.formData.userId = this.userId;\r\n        this.getUserList();\r\n\r\n        const editProjectInfo = JSON.parse(window.localStorage.getItem('editProjectInfo'));\r\n        if (editProjectInfo) {\r\n            this.typeChange(editProjectInfo.type);\r\n            this.formData.newData = false;\r\n            this.formData.itemId = editProjectInfo.itemId;\r\n            this.formData.userId = editProjectInfo.userId;\r\n            this.formData.type = editProjectInfo.type;\r\n            this.formData.name = editProjectInfo.name;\r\n            this.formData.alias = editProjectInfo.alias;\r\n\r\n            this.getItemVosWithItemId(editProjectInfo.itemId);\r\n\r\n            this.formData.status = editProjectInfo.status;\r\n            this.formData.endDate = editProjectInfo.endDate;\r\n            this.formData.contractAmountYuan = editProjectInfo.contractAmountYuan;\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters(['permissions', 'userId'])\r\n    },\r\n    methods: {\r\n        getItemVosWithItemId(itemId) {\r\n            getItemVosWithItemId(itemId).then(response => {\r\n                response.data.data.forEach(element => {\r\n                    this.formData.teamList.push(element.userId);\r\n                });\r\n            });\r\n        },\r\n        getUserList() {\r\n            getUserList().then(response => {\r\n                response.data.data.forEach(element => {\r\n                    this.userOptions.push({\r\n                        value: element.userId,\r\n                        label: element.username\r\n                    });\r\n                });\r\n            });\r\n        },\r\n        teamSelect(val) {\r\n            console.log(val);\r\n        },\r\n        typeChange(val) {\r\n            this.aliasName = val === '1' ? '项目别名' : '产品别名';\r\n            this.userName = val === '1' ? '总协调' : '产品经理';\r\n        },\r\n        backHistory() {\r\n            window.localStorage.removeItem('editProjectInfo');\r\n            this.formData.newData = true;\r\n            this.formData.itemId = '';\r\n            this.formData.userId = '';\r\n            this.formData.type = '1';\r\n            this.formData.name = '';\r\n            this.formData.alias = '';\r\n            this.formData.status = '';\r\n            this.formData.endDate = '';\r\n            this.formData.contractAmountYuan = 0;\r\n            this.$router.go(-1);\r\n        },\r\n        onSubmit() {\r\n            if (this.formData.type == 1) {\r\n                this.formData.approverids = '12';\r\n            }\r\n            if (this.formData.type == 2) {\r\n                this.formData.approverids = '14';\r\n            }\r\n            this.$refs['formData'].validate(valid => {\r\n                if (valid) {\r\n                    var aliasList = this.formData.alias.split('-');\r\n                    if (aliasList.length < 2) {\r\n                        this.$message.error('项目别名不规范');\r\n                        return false;\r\n                    }\r\n                    this.saving = true;\r\n                    if (!this.formData.newData) {\r\n                        editItem(this.formData)\r\n                            .then(res => {\r\n                                if (res.data.data) {\r\n                                    this.backHistory();\r\n                                }\r\n                            })\r\n                            .finally(() => {\r\n                                this.saving = false;\r\n                            });\r\n                    } else {\r\n                        addItem(this.formData)\r\n                            .then(res => {\r\n                                if (res.data.data) {\r\n                                    this.backHistory();\r\n                                }\r\n                            })\r\n                            .finally(() => {\r\n                                this.saving = false;\r\n                            });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    },\r\n    mounted() {}\r\n};\r\n</script>\r\n<style type=\"text/scss\" scoped lang=\"scss\">\r\n.el-input .el-input__count .el-input__count-inner {\r\n    height: 50%;\r\n}\r\n@media (min-width: 600px) {\r\n    .zzz {\r\n        display: none;\r\n    }\r\n}\r\n.el-image img {\r\n    border-radius: 50%;\r\n}\r\n@media screen and (max-width: 320px) {\r\n    .complete {\r\n        width: 173px !important;\r\n    }\r\n}\r\n@media screen and (max-width: 360px) {\r\n    .complete {\r\n        width: 213px !important;\r\n    }\r\n}\r\n@media screen and (max-width: 410px) {\r\n    .complete {\r\n        width: 217px !important;\r\n    }\r\n}\r\n</style>\n"],"sourceRoot":"src/views/project"}]}