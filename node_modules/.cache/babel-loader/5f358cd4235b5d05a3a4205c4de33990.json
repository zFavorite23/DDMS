{"remainingRequest":"D:\\DDMS\\node_modules\\thread-loader\\dist\\cjs.js!D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js!D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\home\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\home\\index.vue","mtime":1598261483786},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"D:\\\\DDMS\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nimport SidebarItem from \"./SidebarItem.vue\";\nimport { password } from \"../../api/auth/login\";\nimport { getUserId } from \"../../utils/auth\";\nimport html2canvas from 'html2canvas'; // import 'video.js/dist/video-js.css';\n// import 'vue-video-player/src/custom-theme.css';\n// import { videoPlayer } from 'vue-video-player';\n// import 'videojs-flash';\n\nimport videojs from 'video.js';\nimport 'videojs-contrib-hls';\nexport default {\n  name: 'top-mag',\n  data: function data() {\n    var _this = this;\n\n    var validatePass = function validatePass(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else {\n        if (!/^[0-9A-Za-z]{6,15}$/.test(value)) {\n          callback(new Error('密码少于6位'));\n        }\n\n        if (_this.passwordFormData.check_new_password !== '') {\n          _this.$refs.passwordFormData.validateField('check_new_password');\n        }\n\n        callback();\n      }\n    };\n\n    var validatePass2 = function validatePass2(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请再次输入密码'));\n      } else if (value !== _this.passwordFormData.new_password) {\n        callback(new Error('两次输入密码不一致!'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      isShow: false,\n      dataurl: '',\n      dialogVisible: false,\n      menuShow: false,\n      levelList: null,\n      passwordLoading: false,\n      passwordFormVisible: false,\n      passwordFormData: {\n        old_password: '',\n        new_password: '',\n        check_new_password: ''\n      },\n      passwordFormDataRules: {\n        old_password: [{\n          required: true,\n          message: '请输入原始密码',\n          trigger: 'blur'\n        }],\n        new_password: [{\n          required: true,\n          message: '请输入新密码',\n          trigger: 'blur'\n        }, {\n          validator: validatePass,\n          trigger: 'blur'\n        }],\n        check_new_password: [{\n          required: true,\n          message: '请再次输入密码',\n          trigger: 'blur'\n        }, {\n          validator: validatePass2,\n          trigger: 'blur'\n        }]\n      },\n      // 视频播放\n      videoOptions: _defineProperty({\n        playbackRates: [0.7, 1.0, 1.5, 2.0],\n        //播放速度\n        autoplay: false,\n        //如果true,浏览器准备好时开始回放。\n        muted: false,\n        // 默认情况下将会消除任何音频。\n        loop: false,\n        // 导致视频一结束就重新开始。\n        preload: 'auto',\n        // 建议浏览器在<video>加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）\n        language: 'zh-CN',\n        aspectRatio: '16:9',\n        // 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）\n        techOrder: ['flash', 'html5'],\n        // 兼容顺序\n        sources: [{\n          // 流配置，数组形式，会根据兼容顺序自动切换\n          type: 'rtmp/hls',\n          src: 'rtmp://211.154.252.186:10935/hls/stream_1'\n        }],\n        poster: '',\n        //你的封面地址\n        // width: document.documentElement.clientWidth,\n        notSupportedMessage: '此视频暂无法播放，请稍后再试',\n        // 允许覆盖Video.js无法播放媒体源时显示的默认信息。\n        controlBar: {\n          timeDivider: true,\n          durationDisplay: true,\n          remainingTimeDisplay: false,\n          fullscreenToggle: true //全屏按钮\n\n        }\n      }, \"autoplay\", true)\n    };\n  },\n  components: {\n    SidebarItem: SidebarItem // videoPlayer\n\n  },\n  computed: _objectSpread({}, mapGetters({\n    routers: 'routers'\n  }), {\n    onRoutes: function onRoutes() {\n      return this.$route.path;\n    },\n    username: function username() {\n      var username = this.$store.state.admin.userName;\n      return !username ? this.name : username;\n    },\n    avatar: function avatar() {\n      var avatar = this.$store.state.admin.avatar;\n      return !avatar ? this.name : avatar;\n    },\n    isCollapse: function isCollapse() {\n      return this.$store.state.app.sidebar.opened;\n    }\n  }),\n  mounted: function mounted() {},\n  methods: {\n    off: function off() {\n      this.$axios({\n        method: 'get',\n        url: 'http://www.dreamdeck.cn:18000/computer/getAllComputer'\n      }).then(function (res) {\n        console.log(res);\n      });\n    },\n    See: function See(e) {\n      window.open('https://www.baidu.com', '_blank');\n    },\n    open: function open() {\n      videojs('my-video', {\n        bigPlayButton: false,\n        textTrackDisplay: false,\n        posterImage: true,\n        errorDisplay: false,\n        controlBar: true\n      }, function () {\n        this.play();\n      });\n    },\n    toggleSideBar: function toggleSideBar() {\n      this.$store.dispatch('ToggleSideBar');\n    },\n    showSideBar: function showSideBar() {\n      this.$store.dispatch('ShowSideBar');\n    },\n    getBreadcrumb: function getBreadcrumb() {\n      var matched = this.$route.matched.filter(function (item) {\n        return item.name;\n      });\n      var first = matched[0];\n\n      if (first && (first.name !== '首页' || first.path !== '')) {\n        matched = [{\n          name: '首页',\n          path: '/'\n        }].concat(matched);\n      }\n\n      this.levelList = matched; // console.log(this.levelList);\n\n      console.log('%c', \"font-size:200px;padding:110px 500px;background:url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1598262465097&di=35bbe65ecf3b55b5cfbbba3355d35b28&imgtype=0&src=http%3A%2F%2Fgss2.bdstatic.com%2F-fo3dSag_xI4khGkpoWK1HF6hhy%2Fbaike%2Fs%3D220%2Fsign%3D26f00493a718972ba73a07c8d6cf7b9d%2F8718367adab44aedd8958663bf1c8701a08bfb5a.jpg') no-repeat;\");\n    },\n    loginOut: function loginOut() {\n      var _this2 = this;\n\n      console.log('2');\n      this.$confirm('此操作将退出系统, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this2.$store.dispatch('loginOut').then(function () {\n          //this.setCookie(\"ddmsAutoLogin\",\"\")\n          window.localStorage.setItem('ddmsAutoLogin', '');\n          location.reload(); // 为了重新实例化vue-router对象 避免bug\n        });\n      }).catch(function () {\n        _this2.$message({\n          type: 'error',\n          message: '操作失败'\n        });\n      });\n    },\n    // 保存cookie\n    setCookie: function setCookie(cName, value, expiredays) {\n      var exdate = new Date();\n      exdate.setDate(exdate.getDate() + expiredays);\n      document.cookie = cName + '=' + decodeURIComponent(value) + (expiredays == null ? '' : ';expires=' + exdate.toGMTString());\n    },\n    handleUserInfo: function handleUserInfo() {\n      this.$router.push({\n        path: '/admin/user/info'\n      });\n    },\n    // 显示修改密码界面\n    handlePassword: function handlePassword() {\n      this.passwordFormVisible = true;\n      this.passwordFormData = {\n        old_password: '',\n        new_password: '',\n        check_new_password: ''\n      };\n    },\n    addSubmit: function addSubmit(formName) {\n      var _this3 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          //this.passwordLoading = true;\n          var data = Object.assign({});\n          data.userId = getUserId();\n          data.password = _this3.passwordFormData.old_password;\n          data.newpassword1 = _this3.passwordFormData.new_password;\n          console.log(data);\n          password(data).then(function (res) {\n            //this.passwordLoading = false;\n            console.log(res.data.data);\n\n            if (res.data.data) {\n              _this3.$message({\n                message: '修改成功',\n                type: 'success'\n              }); // 刷新表单\n\n\n              _this3.$refs['passwordFormData'].resetFields();\n\n              _this3.passwordFormVisible = false;\n\n              _this3.$store.dispatch('loginOut').then(function () {\n                location.reload(); // 为了重新实例化vue-router对象 避免bug\n              });\n            } else {\n              _this3.$message({\n                message: res.data.msg,\n                type: 'error'\n              });\n            }\n          }).catch(function () {\n            _this3.$message({\n              type: 'error',\n              message: '操作失败'\n            });\n          });\n        }\n      });\n    },\n    setImage: function setImage() {\n      var that = this; //   event.preventDefault();\n\n      var canvas2 = document.createElement('canvas'); // let _canvas = document.getElementById('child');\n\n      var _canvas = document.getElementById('app');\n\n      var w = parseInt(window.getComputedStyle(_canvas).width);\n      var h = parseInt(window.getComputedStyle(_canvas).height); //将canvas画布放大若干倍，然后盛放在较小的容器内，就显得不模糊了\n\n      canvas2.width = w * 2;\n      canvas2.height = h * 2;\n      canvas2.style.width = w + 'px';\n      canvas2.style.height = h + 'px'; //可以按照自己的需求，对context的参数修改,translate指的是偏移量\n      //  var context = canvas.getContext(\"2d\");\n      //  context.translate(0,0);\n\n      var context = canvas2.getContext('2d');\n      context.scale(2, 2); // html2canvas(document.getElementById('child'), {\n\n      html2canvas(document.getElementById('app'), {\n        canvas: canvas2\n      }).then(function (canvas) {\n        var blob = that.getBlob(canvas);\n        var oMyForm = new FormData();\n        var fileName = 'mobile' + '.jpg';\n        oMyForm.append('file', blob, fileName); //\t\t\t\toMyForm.append(\"fileName\", fileName);\n\n        oMyForm.append('fileType', 'image');\n        oMyForm.append('user_id', that);\n      });\n      this.dialogVisible = true;\n    },\n    getBlob: function getBlob(canvas) {\n      //获取blob对象\n      var data = canvas.toDataURL('image/jpeg', 1);\n      this.dataurl = data; //console.log(this.dataurl)\n\n      data = data.split(',')[1];\n      data = window.atob(data);\n      var ia = new Uint8Array(data.length);\n\n      for (var i = 0; i < data.length; i++) {\n        ia[i] = data.charCodeAt(i);\n      }\n\n      return new Blob([ia], {\n        type: 'image/jpeg'\n      });\n    }\n  },\n  created: function created() {\n    this.getBreadcrumb();\n  },\n  watch: {\n    $route: function $route() {\n      this.getBreadcrumb();\n    }\n  }\n};",null]}