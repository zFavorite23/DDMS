{"remainingRequest":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js!D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\apply\\receipt\\Form.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\apply\\receipt\\Form.vue","mtime":1595384938769},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"D:\\\\DDMS\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { addObj, editObj } from \"../../../api/apply/receipt.js\";\nimport { getApplyUserInfo } from \"../../../api/admin/user.js\";\nimport { getItemVosWithUserId as _getItemVosWithUserId } from \"../../../api/project/team.js\";\nimport { getFirstpartyAll as _getFirstpartyAll } from \"../../../api/customer/firstparty.js\";\nimport { getStandardApplyInfoById } from \"../../../api/standard/apply.js\";\nimport { mapGetters } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      query: {\n        itemId: null,\n        userId: null,\n        deptId: null,\n        type: 8\n      },\n      formData: {\n        newData: true,\n        receiptId: null,\n        itemId: null,\n        companyId: null,\n        userId: null,\n        type: '2',\n        firstPartyId: null,\n        name: '',\n        dutyParagraph: '',\n        address: '',\n        telephone: '',\n        bankName: '',\n        bankAccount: '',\n        proportion: '',\n        priceYuan: '',\n        content: '11',\n        remark: '',\n        detailedList: '',\n        isAffirm: '1'\n      },\n      uploadUrl: '',\n      rules: {\n        itemId: [{\n          required: true,\n          message: '请选择开票项目',\n          trigger: 'change'\n        }],\n        companyId: [{\n          required: true,\n          message: '请选择开票公司',\n          trigger: 'change'\n        }],\n        type: [{\n          required: true,\n          message: '请选择开票类型',\n          trigger: 'change'\n        }],\n        name: [{\n          required: true,\n          message: '请填写公司名称'\n        }],\n        dutyParagraph: [{\n          required: true,\n          message: '请填写公司税号'\n        }],\n        address: [{\n          required: true,\n          message: '请填写公司注册地址'\n        }],\n        telephone: [{\n          required: true,\n          message: '请填写公司电话'\n        }],\n        bankName: [{\n          required: true,\n          message: '请填写开户行名称'\n        }],\n        bankAccount: [{\n          required: true,\n          message: '请填写开户行账号'\n        }],\n        proportion: [{\n          required: true,\n          message: '请填写开票百分比'\n        }],\n        priceYuan: [{\n          required: true,\n          message: '请填写开票金额'\n        }],\n        content: [{\n          required: true,\n          message: '请选择开票内容',\n          trigger: 'blur'\n        }],\n        remark: [{\n          required: true,\n          message: '请选择发票备注',\n          trigger: 'blur'\n        }],\n        detailedList: [{\n          required: true,\n          message: '请上传产品清单',\n          trigger: 'blur'\n        }],\n        isAffirm: [{\n          required: true,\n          message: '请选择是否与对方确认',\n          trigger: 'blur'\n        }]\n      },\n      type1Visible: false,\n      itemOptions: [],\n      companyOptions: [{\n        label: '北京甲板智慧科技有限公司',\n        value: 1\n      }, {\n        label: '北京甲板数字科技有限公司',\n        value: 2\n      }],\n      firstPartyList: [],\n      firstPartyOptions: [],\n      saving: false,\n      applyUserList: []\n    };\n  },\n  created: function created() {\n    this.getStandardApplyInfo();\n    this.getApplyUser(this.userId);\n    this.getItemVosWithUserId(this.userId);\n    this.getFirstpartyAll();\n    this.formData.userId = this.userId;\n    this.query.userId = this.userId;\n    this.uploadUrl = \"\".concat(window.location.origin, \"/apply/receipt/upload\");\n    var editReceiptInfo = JSON.parse(window.localStorage.getItem('editReceiptInfo'));\n\n    if (editReceiptInfo) {\n      console.log(editReceiptInfo);\n      this.formData.newData = false;\n      this.formData.receiptId = editReceiptInfo.receiptId;\n      this.formData.itemId = editReceiptInfo.itemId;\n\n      if (this.formData.itemId) {\n        this.selectItem(this.formData.itemId);\n      }\n\n      this.formData.companyId = editReceiptInfo.companyId;\n      this.formData.type = editReceiptInfo.type;\n      this.formData.firstPartyId = editReceiptInfo.firstPartyId;\n      this.formData.name = editReceiptInfo.name;\n      this.formData.dutyParagraph = editReceiptInfo.dutyParagraph;\n      this.formData.address = editReceiptInfo.address;\n      this.formData.telephone = editReceiptInfo.telephone;\n      this.formData.bankName = editReceiptInfo.bankName;\n      this.formData.bankAccount = editReceiptInfo.bankAccount;\n      this.formData.proportion = editReceiptInfo.proportion;\n      this.formData.priceYuan = editReceiptInfo.priceYuan;\n      this.formData.content = editReceiptInfo.content;\n      this.formData.remark = editReceiptInfo.remark; //this.formData.detailedList = editReceiptInfo.detailedList;\n\n      this.formData.isAffirm = editReceiptInfo.isAffirm;\n    }\n  },\n  computed: _objectSpread({}, mapGetters(['permissions', 'userId'])),\n  methods: {\n    selectItem: function selectItem(val) {\n      if (val == null || val == '') {\n        this.query.itemId = null;\n        this.formData.itemId = null;\n        this.getApplyUser();\n      } else {\n        this.query.itemId = val;\n        this.formData.itemId = val;\n        this.getApplyUser();\n      }\n    },\n    getApplyUser: function getApplyUser() {\n      var _this = this;\n\n      getApplyUserInfo(this.query).then(function (response) {\n        _this.applyUserList = [];\n        _this.formData.approverids = null;\n        response.data.data.forEach(function (element) {\n          if (element != null) {\n            _this.applyUserList.push({\n              userId: element.userId,\n              username: element.username,\n              avatar: element.avatar\n            });\n\n            if (_this.formData.approverids == null) {\n              _this.formData.approverids += element.userId;\n            } else {\n              _this.formData.approverids += ',' + element.userId;\n            }\n          }\n        });\n      });\n    },\n    getItemVosWithUserId: function getItemVosWithUserId(userId) {\n      var _this2 = this;\n\n      _getItemVosWithUserId(userId).then(function (response) {\n        console.log(response);\n        response.data.data.forEach(function (element) {\n          _this2.itemOptions.push({\n            value: element.itemId,\n            label: element.alias\n          });\n        });\n      });\n    },\n    getFirstpartyAll: function getFirstpartyAll() {\n      var _this3 = this;\n\n      _getFirstpartyAll().then(function (response) {\n        _this3.firstPartyList = response.data.data;\n        response.data.data.forEach(function (element) {\n          _this3.firstPartyOptions.push({\n            firstPartyId: element.firstPartyId,\n            name: element.name\n          });\n        });\n      });\n    },\n    selectFirstParty: function selectFirstParty(val) {\n      var that = this;\n      this.firstPartyList.forEach(function (element) {\n        if (element.firstPartyId == val) {\n          that.formData.name = element.name;\n          that.formData.dutyParagraph = element.dutyParagraph;\n          that.formData.address = element.address;\n          that.formData.telephone = element.telephone;\n          that.formData.bankName = element.bankName;\n          that.formData.bankAccount = element.bankAccount;\n        }\n      });\n    },\n    backHistory: function backHistory() {\n      window.localStorage.removeItem('editReceiptInfo');\n      this.formData.newData = true;\n      this.formData.receiptId = null;\n      this.formData.itemId = null;\n      this.formData.companyId = null;\n      this.formData.userId = null;\n      this.formData.type = '2';\n      this.formData.firstPartyId = null;\n      this.formData.name = '';\n      this.formData.dutyParagraph = '';\n      this.formData.address = '';\n      this.formData.telephone = '';\n      this.formData.bankName = '';\n      this.formData.bankAccount = '';\n      this.formData.proportion = '';\n      this.formData.priceYuan = '';\n      this.formData.content = '11';\n      this.formData.remark = '';\n      this.formData.detailedList = '';\n      this.formData.isAffirm = '1';\n      this.$router.go(-1);\n    },\n    onSubmit: function onSubmit() {\n      var _this4 = this;\n\n      this.$refs['formData'].validate(function (valid) {\n        if (valid) {\n          _this4.saving = true;\n\n          if (!_this4.formData.newData) {\n            _this4.formData.status = 0;\n            editObj(_this4.formData).then(function (res) {\n              if (res.data.data) {\n                _this4.backHistory();\n              }\n            }).finally(function () {\n              _this4.saving = false;\n            });\n          } else {\n            addObj(_this4.formData).then(function (res) {\n              if (res.data.data) {\n                _this4.backHistory();\n              }\n            }).finally(function () {\n              _this4.saving = false;\n            });\n          }\n        }\n      });\n    },\n    getStandardApplyInfo: function getStandardApplyInfo() {\n      var _this5 = this;\n\n      getStandardApplyInfoById(8).then(function (response) {\n        if (response.data.data) {\n          var data = response.data.data;\n          _this5.content = data.content;\n          var receiptStandardApply = JSON.parse(window.localStorage.getItem('receiptStandardApply'));\n\n          if (receiptStandardApply) {\n            if (receiptStandardApply.version < data.version) {\n              _this5.open();\n            }\n          } else {\n            _this5.open();\n          }\n\n          window.localStorage.setItem('receiptStandardApply', JSON.stringify(data));\n        }\n      });\n    },\n    open: function open() {\n      var content = this.content.split('\\n\\n');\n      var newDatas = [];\n      var h = this.$createElement;\n\n      for (var i in content) {\n        newDatas.push(h('p', null, content[i]));\n      }\n\n      this.$alert(h('div', null, newDatas), '开票规范');\n    },\n\n    /**\n     * 产品清单模板下载\n     */\n    templateDownload: function templateDownload() {\n      //this.$refs.upload.submit();\n      window.location.href = 'http://192.168.1.88/receipt-temp.xlsx';\n    },\n    handleRemove: function handleRemove(file, fileList) {\n      console.log(file, fileList);\n      this.formData.detailedList = '';\n    },\n    handlePreview: function handlePreview(file) {\n      console.log(file);\n    },\n    handSuccess: function handSuccess(data) {\n      var fileInfo = data.data;\n      var fileUrl = fileInfo.bucketName + '-' + fileInfo.fileName;\n      console.log(fileUrl);\n      this.formData.detailedList = fileUrl;\n    }\n  },\n  mounted: function mounted() {}\n};",{"version":3,"sources":["Form.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div>\n        <el-form ref=\"formData\" :rules=\"rules\" :model=\"formData\" label-width=\"160px\" class=\"demo-ruleForm form\" style=\"text-align: left;\">\n            <el-form-item label=\"开票项目：\" prop=\"itemId\">\n                <el-select v-model=\"formData.itemId\" placeholder=\"请选择\" filterable @change=\"selectItem\">\n                    <el-option v-for=\"(item, index) in itemOptions\" :value=\"item.value\" :key=\"index\" :label=\"item.label\"></el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item label=\"开票公司：\" prop=\"companyId\">\n                <el-select v-model=\"formData.companyId\" placeholder=\"请选择公司\">\n                    <el-option v-for=\"(item, index) in companyOptions\" :value=\"item.value\" :key=\"index\" :label=\"item.label\"></el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item label=\"开票类型：\" prop=\"type\">\n                <el-radio-group v-model=\"formData.type\">\n                    <el-radio label=\"1\">专票</el-radio>\n                    <el-radio label=\"2\">普票</el-radio>\n                </el-radio-group>\n            </el-form-item>\n            <el-form-item label=\"甲方信息：\">\n                <el-select v-model=\"formData.firstPartyId\" placeholder=\"请选择\" @change=\"selectFirstParty\">\n                    <el-option v-for=\"(item, index) in firstPartyOptions\" :value=\"item.firstPartyId\" :key=\"index\" :label=\"item.name\"></el-option>\n                </el-select>\n            </el-form-item>\n\n            <el-form-item label=\"公司名称：\" prop=\"name\"><el-input v-model=\"formData.name\" placeholder=\"请填写公司名称\" maxlength=\"50\" show-word-limit></el-input></el-form-item>\n            <el-form-item label=\"公司税号：\" prop=\"dutyParagraph\">\n                <el-input v-model=\"formData.dutyParagraph\" placeholder=\"请填写税号\" maxlength=\"50\" show-word-limit></el-input>\n            </el-form-item>\n            <div v-if=\"formData.type == 1\">\n                <el-form-item label=\"公司注册地址：\" prop=\"address\">\n                    <el-input v-model=\"formData.address\" placeholder=\"请填写公司地址\" maxlength=\"50\" show-word-limit></el-input>\n                </el-form-item>\n                <el-form-item label=\"公司电话：\" prop=\"telephone\">\n                    <el-input v-model=\"formData.telephone\" placeholder=\"请填写电话\" maxlength=\"50\" show-word-limit></el-input>\n                </el-form-item>\n                <el-form-item label=\"开户行名称：\" prop=\"bankName\">\n                    <el-input v-model=\"formData.bankName\" placeholder=\"请填写开户行名称\" maxlength=\"50\" show-word-limit></el-input>\n                </el-form-item>\n                <el-form-item label=\"开户行账号：\" prop=\"bankAccount\">\n                    <el-input v-model=\"formData.bankAccount\" placeholder=\"请填写开户行账号\" maxlength=\"30\" show-word-limit></el-input>\n                </el-form-item>\n            </div>\n\n            <el-form-item label=\"开票百分比（%）：\" prop=\"proportion\">\n                <el-input v-model=\"formData.proportion\" placeholder=\"请填写开票百分比\" maxlength=\"10\" show-word-limit></el-input>\n            </el-form-item>\n            <el-form-item label=\"开票金额（元）：\" prop=\"priceYuan\"><el-input type=\"number\" v-model=\"formData.priceYuan\" placeholder=\"请填写开票金额\"></el-input></el-form-item>\n            <el-form-item label=\"开票内容：\" prop=\"content\">\n                <el-select v-model=\"formData.content\" placeholder=\"请选择\">\n                    <el-option label=\"*研发和技术服务*专业技术服务\" value=\"11\"></el-option>\n                    <el-option label=\"*研发和技术服务*软件开发\" value=\"12\"></el-option>\n                    <el-option label=\"*设计服务*专业设计服务\" value=\"13\"></el-option>\n                    <el-option label=\"*其他咨询服务*其他咨询服务\" value=\"14\"></el-option>\n                    <el-option label=\"*印刷品*图片、设计图样及照片\" value=\"21\"></el-option>\n                    <el-option label=\"*软件*系统软件产品\" value=\"22\"></el-option>\n                    <el-option label=\"*硬件*\" value=\"23\"></el-option>\n                    <el-option label=\"*现代服务*服务费\" value=\"24\"></el-option>\n                    <el-option label=\"*工程服务*\" value=\"25\"></el-option>\n                    <el-option label=\"*现代服务*\" value=\"26\"></el-option>\n                </el-select>\n            </el-form-item>\n            <el-form-item label=\"开票备注\" prop=\"remark\">\n                <el-input v-model=\"formData.remark\" placeholder=\"请填写开票备注\" maxlength=\"60\" show-word-limit></el-input>\n                <el-tag size=\"mini\" type=\"danger\">财务开票时填写的备注信息</el-tag>\n            </el-form-item>\n            <el-form-item label=\"产品清单：\" prop=\"detailedList\" v-if=\"formData.content == 22 || formData.content == 23\">\n                <el-upload\n                    ref=\"upload\"\n                    :action=\"uploadUrl\"\n                    name=\"file\"\n                    :on-preview=\"handlePreview\"\n                    :on-remove=\"handleRemove\"\n                    :on-success=\"handSuccess\"\n                    accept=\".xls,.xlsx\"\n                    :auto-upload=\"true\"\n                >\n                    <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取文件</el-button>\n                    <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"templateDownload\">模板下载</el-button>\n                    <div slot=\"tip\" class=\"el-upload__tip\">只能上传xls文件，且不超过500kb</div>\n                </el-upload>\n            </el-form-item>\n            <el-form-item label=\"是否与对方确认：\" prop=\"isAffirm\">\n                <el-radio-group v-model=\"formData.isAffirm\">\n                    <el-radio label=\"1\">是</el-radio>\n                    <el-radio label=\"2\">否</el-radio>\n                </el-radio-group>\n                <p></p>\n                <el-tag size=\"mini\" type=\"danger\">是否与对方确认开票信息</el-tag>\n            </el-form-item>\n            <el-form-item label=\"审批人：\">\n                <div class=\"apply-user-list\" v-for=\"user in applyUserList\">\n                    <el-avatar :size=\"60\" :src=\"user.avatar\"></el-avatar>\n                    <span class=\"username\">{{ user.username }}</span>\n                </div>\n            </el-form-item>\n            <el-form-item style=\"text-align: center\" class=\"save\">\n                <el-button type=\"primary\" @click=\"onSubmit\" :loading=\"saving\">保存</el-button>\n                <el-button @click=\"backHistory\">取消</el-button>\n            </el-form-item>\n        </el-form>\n        <el-button type=\"primary\" class=\"invoiceRules\" @click=\"open\">开票规范</el-button>\n    </div>\n</template>\n<script>\nimport { addObj, editObj } from '../../../api/apply/receipt.js';\nimport { getApplyUserInfo } from '../../../api/admin/user.js';\nimport { getItemVosWithUserId } from '../../../api/project/team.js';\nimport { getFirstpartyAll } from '../../../api/customer/firstparty.js';\nimport { getStandardApplyInfoById } from '../../../api/standard/apply.js';\nimport { mapGetters } from 'vuex';\nexport default {\n    data() {\n        return {\n            query: {\n                itemId: null,\n                userId: null,\n                deptId: null,\n                type: 8\n            },\n            formData: {\n                newData: true,\n                receiptId: null,\n                itemId: null,\n                companyId: null,\n                userId: null,\n                type: '2',\n                firstPartyId: null,\n                name: '',\n                dutyParagraph: '',\n                address: '',\n                telephone: '',\n                bankName: '',\n                bankAccount: '',\n                proportion: '',\n                priceYuan: '',\n                content: '11',\n                remark: '',\n                detailedList: '',\n                isAffirm: '1'\n            },\n            uploadUrl: '',\n            rules: {\n                itemId: [\n                    {\n                        required: true,\n                        message: '请选择开票项目',\n                        trigger: 'change'\n                    }\n                ],\n                companyId: [\n                    {\n                        required: true,\n                        message: '请选择开票公司',\n                        trigger: 'change'\n                    }\n                ],\n                type: [\n                    {\n                        required: true,\n                        message: '请选择开票类型',\n                        trigger: 'change'\n                    }\n                ],\n                name: [{ required: true, message: '请填写公司名称' }],\n                dutyParagraph: [{ required: true, message: '请填写公司税号' }],\n                address: [{ required: true, message: '请填写公司注册地址' }],\n                telephone: [{ required: true, message: '请填写公司电话' }],\n                bankName: [{ required: true, message: '请填写开户行名称' }],\n                bankAccount: [{ required: true, message: '请填写开户行账号' }],\n                proportion: [{ required: true, message: '请填写开票百分比' }],\n                priceYuan: [{ required: true, message: '请填写开票金额' }],\n                content: [\n                    {\n                        required: true,\n                        message: '请选择开票内容',\n                        trigger: 'blur'\n                    }\n                ],\n                remark: [\n                    {\n                        required: true,\n                        message: '请选择发票备注',\n                        trigger: 'blur'\n                    }\n                ],\n                detailedList: [\n                    {\n                        required: true,\n                        message: '请上传产品清单',\n                        trigger: 'blur'\n                    }\n                ],\n                isAffirm: [\n                    {\n                        required: true,\n                        message: '请选择是否与对方确认',\n                        trigger: 'blur'\n                    }\n                ]\n            },\n            type1Visible: false,\n            itemOptions: [],\n            companyOptions: [\n                {\n                    label: '北京甲板智慧科技有限公司',\n                    value: 1\n                },\n                {\n                    label: '北京甲板数字科技有限公司',\n                    value: 2\n                }\n            ],\n            firstPartyList: [],\n            firstPartyOptions: [],\n            saving: false,\n            applyUserList: []\n        };\n    },\n    created() {\n        this.getStandardApplyInfo();\n        this.getApplyUser(this.userId);\n        this.getItemVosWithUserId(this.userId);\n        this.getFirstpartyAll();\n\n        this.formData.userId = this.userId;\n        this.query.userId = this.userId;\n\n        this.uploadUrl = `${window.location.origin}/apply/receipt/upload`;\n\n        const editReceiptInfo = JSON.parse(window.localStorage.getItem('editReceiptInfo'));\n        if (editReceiptInfo) {\n            console.log(editReceiptInfo);\n            this.formData.newData = false;\n            this.formData.receiptId = editReceiptInfo.receiptId;\n            this.formData.itemId = editReceiptInfo.itemId;\n            if (this.formData.itemId) {\n                this.selectItem(this.formData.itemId);\n            }\n            this.formData.companyId = editReceiptInfo.companyId;\n            this.formData.type = editReceiptInfo.type;\n            this.formData.firstPartyId = editReceiptInfo.firstPartyId;\n            this.formData.name = editReceiptInfo.name;\n            this.formData.dutyParagraph = editReceiptInfo.dutyParagraph;\n            this.formData.address = editReceiptInfo.address;\n            this.formData.telephone = editReceiptInfo.telephone;\n            this.formData.bankName = editReceiptInfo.bankName;\n            this.formData.bankAccount = editReceiptInfo.bankAccount;\n            this.formData.proportion = editReceiptInfo.proportion;\n            this.formData.priceYuan = editReceiptInfo.priceYuan;\n            this.formData.content = editReceiptInfo.content;\n            this.formData.remark = editReceiptInfo.remark;\n            //this.formData.detailedList = editReceiptInfo.detailedList;\n            this.formData.isAffirm = editReceiptInfo.isAffirm;\n        }\n    },\n    computed: {\n        ...mapGetters(['permissions', 'userId'])\n    },\n    methods: {\n        selectItem(val) {\n            if (val == null || val == '') {\n                this.query.itemId = null;\n                this.formData.itemId = null;\n                this.getApplyUser();\n            } else {\n                this.query.itemId = val;\n                this.formData.itemId = val;\n                this.getApplyUser();\n            }\n        },\n        getApplyUser() {\n            getApplyUserInfo(this.query).then(response => {\n                this.applyUserList = [];\n                this.formData.approverids = null;\n                response.data.data.forEach(element => {\n                    if(element!=null){\n                        this.applyUserList.push({\n                            userId: element.userId,\n                            username: element.username,\n                            avatar: element.avatar\n                        });\n                        if (this.formData.approverids == null) {\n                            this.formData.approverids += element.userId;\n                        } else {\n                            this.formData.approverids += ',' + element.userId;\n                        }\n                    }\n\n\n                });\n            });\n        },\n        getItemVosWithUserId(userId) {\n            getItemVosWithUserId(userId).then(response => {\n                console.log(response)\n                response.data.data.forEach(element => {\n                    this.itemOptions.push({\n                        value: element.itemId,\n                        label: element.alias\n                    });\n                });\n            });\n        },\n        getFirstpartyAll() {\n            getFirstpartyAll().then(response => {\n                this.firstPartyList = response.data.data;\n                response.data.data.forEach(element => {\n                    this.firstPartyOptions.push({\n                        firstPartyId: element.firstPartyId,\n                        name: element.name\n                    });\n                });\n            });\n        },\n        selectFirstParty(val) {\n            var that = this;\n            this.firstPartyList.forEach(element => {\n                if (element.firstPartyId == val) {\n                    that.formData.name = element.name;\n                    that.formData.dutyParagraph = element.dutyParagraph;\n                    that.formData.address = element.address;\n                    that.formData.telephone = element.telephone;\n                    that.formData.bankName = element.bankName;\n                    that.formData.bankAccount = element.bankAccount;\n                }\n            });\n        },\n        backHistory() {\n            window.localStorage.removeItem('editReceiptInfo');\n            this.formData.newData = true;\n            this.formData.receiptId = null;\n            this.formData.itemId = null;\n            this.formData.companyId = null;\n            this.formData.userId = null;\n            this.formData.type = '2';\n            this.formData.firstPartyId = null;\n            this.formData.name = '';\n            this.formData.dutyParagraph = '';\n            this.formData.address = '';\n            this.formData.telephone = '';\n            this.formData.bankName = '';\n            this.formData.bankAccount = '';\n            this.formData.proportion = '';\n            this.formData.priceYuan = '';\n            this.formData.content = '11';\n            this.formData.remark = '';\n            this.formData.detailedList = '';\n            this.formData.isAffirm = '1';\n\n            this.$router.go(-1);\n        },\n        onSubmit() {\n            this.$refs['formData'].validate(valid => {\n                if (valid) {\n                    this.saving = true;\n                    if (!this.formData.newData) {\n                        this.formData.status = 0;\n                        editObj(this.formData)\n                            .then(res => {\n                                if (res.data.data) {\n                                    this.backHistory();\n                                }\n                            })\n                            .finally(() => {\n                                this.saving = false;\n                            });\n                    } else {\n                        addObj(this.formData)\n                            .then(res => {\n                                if (res.data.data) {\n                                    this.backHistory();\n                                }\n                            })\n                            .finally(() => {\n                                this.saving = false;\n                            });\n                    }\n                }\n            });\n        },\n        getStandardApplyInfo() {\n            getStandardApplyInfoById(8).then(response => {\n                if (response.data.data) {\n                    const data = response.data.data;\n                    this.content = data.content;\n                    const receiptStandardApply = JSON.parse(window.localStorage.getItem('receiptStandardApply'));\n                    if (receiptStandardApply) {\n                        if (receiptStandardApply.version < data.version) {\n                            this.open();\n                        }\n                    } else {\n                        this.open();\n                    }\n                    window.localStorage.setItem('receiptStandardApply', JSON.stringify(data));\n                }\n            });\n        },\n        open() {\n            let content = this.content.split('\\n\\n');\n            let newDatas = [];\n            const h = this.$createElement;\n            for (let i in content) {\n                newDatas.push(h('p', null, content[i]));\n            }\n            this.$alert(h('div', null, newDatas), '开票规范');\n        },\n        /**\n         * 产品清单模板下载\n         */\n        templateDownload() {\n            //this.$refs.upload.submit();\n            window.location.href = 'http://192.168.1.88/receipt-temp.xlsx';\n        },\n        handleRemove(file, fileList) {\n            console.log(file, fileList);\n            this.formData.detailedList = '';\n        },\n        handlePreview(file) {\n            console.log(file);\n        },\n        handSuccess(data) {\n            const fileInfo = data.data;\n            const fileUrl = fileInfo.bucketName + '-' + fileInfo.fileName;\n            console.log(fileUrl);\n            this.formData.detailedList = fileUrl;\n        }\n    },\n    mounted() {}\n};\n</script>\n<style type=\"text/scss\" lang=\"scss\" scoped>\n.el-input .el-input__count .el-input__count-inner {\n    height: 50%;\n}\n</style>\n"],"sourceRoot":"src/views/apply/receipt"}]}