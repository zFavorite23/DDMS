{"remainingRequest":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js!D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\home\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\home\\index.vue","mtime":1598261483786},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.typed.uint8-array\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"D:\\\\DDMS\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters } from 'vuex';\nimport SidebarItem from \"./SidebarItem.vue\";\nimport { password } from \"../../api/auth/login\";\nimport { getUserId } from \"../../utils/auth\";\nimport html2canvas from 'html2canvas'; // import 'video.js/dist/video-js.css';\n// import 'vue-video-player/src/custom-theme.css';\n// import { videoPlayer } from 'vue-video-player';\n// import 'videojs-flash';\n\nimport videojs from 'video.js';\nimport 'videojs-contrib-hls';\nexport default {\n  name: 'top-mag',\n  data: function data() {\n    var _this = this;\n\n    var validatePass = function validatePass(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else {\n        if (!/^[0-9A-Za-z]{6,15}$/.test(value)) {\n          callback(new Error('密码少于6位'));\n        }\n\n        if (_this.passwordFormData.check_new_password !== '') {\n          _this.$refs.passwordFormData.validateField('check_new_password');\n        }\n\n        callback();\n      }\n    };\n\n    var validatePass2 = function validatePass2(rule, value, callback) {\n      if (value === '') {\n        callback(new Error('请再次输入密码'));\n      } else if (value !== _this.passwordFormData.new_password) {\n        callback(new Error('两次输入密码不一致!'));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      isShow: false,\n      dataurl: '',\n      dialogVisible: false,\n      menuShow: false,\n      levelList: null,\n      passwordLoading: false,\n      passwordFormVisible: false,\n      passwordFormData: {\n        old_password: '',\n        new_password: '',\n        check_new_password: ''\n      },\n      passwordFormDataRules: {\n        old_password: [{\n          required: true,\n          message: '请输入原始密码',\n          trigger: 'blur'\n        }],\n        new_password: [{\n          required: true,\n          message: '请输入新密码',\n          trigger: 'blur'\n        }, {\n          validator: validatePass,\n          trigger: 'blur'\n        }],\n        check_new_password: [{\n          required: true,\n          message: '请再次输入密码',\n          trigger: 'blur'\n        }, {\n          validator: validatePass2,\n          trigger: 'blur'\n        }]\n      },\n      // 视频播放\n      videoOptions: _defineProperty({\n        playbackRates: [0.7, 1.0, 1.5, 2.0],\n        //播放速度\n        autoplay: false,\n        //如果true,浏览器准备好时开始回放。\n        muted: false,\n        // 默认情况下将会消除任何音频。\n        loop: false,\n        // 导致视频一结束就重新开始。\n        preload: 'auto',\n        // 建议浏览器在<video>加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）\n        language: 'zh-CN',\n        aspectRatio: '16:9',\n        // 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）\n        techOrder: ['flash', 'html5'],\n        // 兼容顺序\n        sources: [{\n          // 流配置，数组形式，会根据兼容顺序自动切换\n          type: 'rtmp/hls',\n          src: 'rtmp://211.154.252.186:10935/hls/stream_1'\n        }],\n        poster: '',\n        //你的封面地址\n        // width: document.documentElement.clientWidth,\n        notSupportedMessage: '此视频暂无法播放，请稍后再试',\n        // 允许覆盖Video.js无法播放媒体源时显示的默认信息。\n        controlBar: {\n          timeDivider: true,\n          durationDisplay: true,\n          remainingTimeDisplay: false,\n          fullscreenToggle: true //全屏按钮\n\n        }\n      }, \"autoplay\", true)\n    };\n  },\n  components: {\n    SidebarItem: SidebarItem // videoPlayer\n\n  },\n  computed: _objectSpread({}, mapGetters({\n    routers: 'routers'\n  }), {\n    onRoutes: function onRoutes() {\n      return this.$route.path;\n    },\n    username: function username() {\n      var username = this.$store.state.admin.userName;\n      return !username ? this.name : username;\n    },\n    avatar: function avatar() {\n      var avatar = this.$store.state.admin.avatar;\n      return !avatar ? this.name : avatar;\n    },\n    isCollapse: function isCollapse() {\n      return this.$store.state.app.sidebar.opened;\n    }\n  }),\n  mounted: function mounted() {},\n  methods: {\n    off: function off() {\n      this.$axios({\n        method: 'get',\n        url: 'http://www.dreamdeck.cn:18000/computer/getAllComputer'\n      }).then(function (res) {\n        console.log(res);\n      });\n    },\n    See: function See(e) {\n      window.open('https://www.baidu.com', '_blank');\n    },\n    open: function open() {\n      videojs('my-video', {\n        bigPlayButton: false,\n        textTrackDisplay: false,\n        posterImage: true,\n        errorDisplay: false,\n        controlBar: true\n      }, function () {\n        this.play();\n      });\n    },\n    toggleSideBar: function toggleSideBar() {\n      this.$store.dispatch('ToggleSideBar');\n    },\n    showSideBar: function showSideBar() {\n      this.$store.dispatch('ShowSideBar');\n    },\n    getBreadcrumb: function getBreadcrumb() {\n      var matched = this.$route.matched.filter(function (item) {\n        return item.name;\n      });\n      var first = matched[0];\n\n      if (first && (first.name !== '首页' || first.path !== '')) {\n        matched = [{\n          name: '首页',\n          path: '/'\n        }].concat(matched);\n      }\n\n      this.levelList = matched; // console.log(this.levelList);\n\n      console.log('%c', \"font-size:200px;padding:110px 500px;background:url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1598262465097&di=35bbe65ecf3b55b5cfbbba3355d35b28&imgtype=0&src=http%3A%2F%2Fgss2.bdstatic.com%2F-fo3dSag_xI4khGkpoWK1HF6hhy%2Fbaike%2Fs%3D220%2Fsign%3D26f00493a718972ba73a07c8d6cf7b9d%2F8718367adab44aedd8958663bf1c8701a08bfb5a.jpg') no-repeat;\");\n    },\n    loginOut: function loginOut() {\n      var _this2 = this;\n\n      console.log('2');\n      this.$confirm('此操作将退出系统, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this2.$store.dispatch('loginOut').then(function () {\n          //this.setCookie(\"ddmsAutoLogin\",\"\")\n          window.localStorage.setItem('ddmsAutoLogin', '');\n          location.reload(); // 为了重新实例化vue-router对象 避免bug\n        });\n      }).catch(function () {\n        _this2.$message({\n          type: 'error',\n          message: '操作失败'\n        });\n      });\n    },\n    // 保存cookie\n    setCookie: function setCookie(cName, value, expiredays) {\n      var exdate = new Date();\n      exdate.setDate(exdate.getDate() + expiredays);\n      document.cookie = cName + '=' + decodeURIComponent(value) + (expiredays == null ? '' : ';expires=' + exdate.toGMTString());\n    },\n    handleUserInfo: function handleUserInfo() {\n      this.$router.push({\n        path: '/admin/user/info'\n      });\n    },\n    // 显示修改密码界面\n    handlePassword: function handlePassword() {\n      this.passwordFormVisible = true;\n      this.passwordFormData = {\n        old_password: '',\n        new_password: '',\n        check_new_password: ''\n      };\n    },\n    addSubmit: function addSubmit(formName) {\n      var _this3 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          //this.passwordLoading = true;\n          var data = Object.assign({});\n          data.userId = getUserId();\n          data.password = _this3.passwordFormData.old_password;\n          data.newpassword1 = _this3.passwordFormData.new_password;\n          console.log(data);\n          password(data).then(function (res) {\n            //this.passwordLoading = false;\n            console.log(res.data.data);\n\n            if (res.data.data) {\n              _this3.$message({\n                message: '修改成功',\n                type: 'success'\n              }); // 刷新表单\n\n\n              _this3.$refs['passwordFormData'].resetFields();\n\n              _this3.passwordFormVisible = false;\n\n              _this3.$store.dispatch('loginOut').then(function () {\n                location.reload(); // 为了重新实例化vue-router对象 避免bug\n              });\n            } else {\n              _this3.$message({\n                message: res.data.msg,\n                type: 'error'\n              });\n            }\n          }).catch(function () {\n            _this3.$message({\n              type: 'error',\n              message: '操作失败'\n            });\n          });\n        }\n      });\n    },\n    setImage: function setImage() {\n      var that = this; //   event.preventDefault();\n\n      var canvas2 = document.createElement('canvas'); // let _canvas = document.getElementById('child');\n\n      var _canvas = document.getElementById('app');\n\n      var w = parseInt(window.getComputedStyle(_canvas).width);\n      var h = parseInt(window.getComputedStyle(_canvas).height); //将canvas画布放大若干倍，然后盛放在较小的容器内，就显得不模糊了\n\n      canvas2.width = w * 2;\n      canvas2.height = h * 2;\n      canvas2.style.width = w + 'px';\n      canvas2.style.height = h + 'px'; //可以按照自己的需求，对context的参数修改,translate指的是偏移量\n      //  var context = canvas.getContext(\"2d\");\n      //  context.translate(0,0);\n\n      var context = canvas2.getContext('2d');\n      context.scale(2, 2); // html2canvas(document.getElementById('child'), {\n\n      html2canvas(document.getElementById('app'), {\n        canvas: canvas2\n      }).then(function (canvas) {\n        var blob = that.getBlob(canvas);\n        var oMyForm = new FormData();\n        var fileName = 'mobile' + '.jpg';\n        oMyForm.append('file', blob, fileName); //\t\t\t\toMyForm.append(\"fileName\", fileName);\n\n        oMyForm.append('fileType', 'image');\n        oMyForm.append('user_id', that);\n      });\n      this.dialogVisible = true;\n    },\n    getBlob: function getBlob(canvas) {\n      //获取blob对象\n      var data = canvas.toDataURL('image/jpeg', 1);\n      this.dataurl = data; //console.log(this.dataurl)\n\n      data = data.split(',')[1];\n      data = window.atob(data);\n      var ia = new Uint8Array(data.length);\n\n      for (var i = 0; i < data.length; i++) {\n        ia[i] = data.charCodeAt(i);\n      }\n\n      return new Blob([ia], {\n        type: 'image/jpeg'\n      });\n    }\n  },\n  created: function created() {\n    this.getBreadcrumb();\n  },\n  watch: {\n    $route: function $route() {\n      this.getBreadcrumb();\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <el-container class=\"wrapper\">\r\n        <el-scrollbar class=\"container-left\" wrap-class=\"container-left-wrap\" :class=\"{ 'slide-hide': isCollapse, 'slide-in-left': menuShow }\">\r\n            <div class=\"logo\">\r\n                <!--图片logo-->\r\n                <img src=\"../../assets/DDMS.png\" />\r\n                <!--文字logo-->\r\n                <span>后台</span>\r\n            </div>\r\n            <el-menu\r\n                class=\"menu\"\r\n                :default-active=\"onRoutes\"\r\n                :collapse=\"isCollapse\"\r\n                style=\"border: none;\"\r\n                text-color=\"rgb(191, 203, 217)\"\r\n                background-color=\"rgb(48, 65, 86)\"\r\n                active-text-color=\"rgb(64, 158, 255)\"\r\n                unique-opened\r\n                router\r\n            >\r\n                <sidebar-item v-for=\"item in routers\" :key=\"item.path\" :item=\"item\"></sidebar-item>\r\n            </el-menu>\r\n        </el-scrollbar>\r\n\r\n        <el-container\r\n            class=\"container-box\"\r\n            v-bind:class=\"{\r\n                'slide-hide': isCollapse,\r\n                'slide-in-left': menuShow\r\n            }\"\r\n        >\r\n            <el-header class=\"header\">\r\n                <div class=\"header-left\">\r\n                    <div\r\n                        class=\"header-toggle\"\r\n                        @click=\"\r\n                            menuShow = !menuShow;\r\n                            showSideBar();\r\n                        \"\r\n                    >\r\n                        <span></span>\r\n                        <span></span>\r\n                        <span></span>\r\n                    </div>\r\n                    <div class=\"slide-toggle\" :class=\"{ 'slide-toggle-open': isCollapse }\" @click=\"toggleSideBar\">\r\n                        <span></span>\r\n                        <span></span>\r\n                        <span></span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"header-tabs-box\">\r\n                    <el-breadcrumb class=\"app-levelbar\" separator=\"/\">\r\n                        <el-breadcrumb-item v-for=\"(item, index) in levelList\" :key=\"item.path\">\r\n                            <span v-if=\"item.redirect === 'noredirect' || index == levelList.length - 1\" class=\"no-redirect\">{{ item.name }}</span>\r\n                            <router-link v-else :to=\"item.redirect || item.path\">{{ item.name }}</router-link>\r\n                        </el-breadcrumb-item>\r\n                    </el-breadcrumb>\r\n                </div>\r\n\r\n                <div class=\"header-right\">\r\n                    <el-popover placement=\"bottom\" width=\"350\" trigger=\"hover\">\r\n                        <!--                        <avue-crud :data=\"data\" :option=\"option\"></avue-crud>-->\r\n                        <div style=\"margin-left: 45%;\">暂无数据</div>\r\n                        <div slot=\"reference\" class=\"top-bar__item top-bar__item--show\">\r\n                            <i class=\"el-icon-bell\"></i>\r\n                            <el-badge is-dot class=\"dot\"></el-badge>\r\n                        </div>\r\n                    </el-popover>\r\n\r\n                    <el-dropdown trigger=\"click\">\r\n                        <!--                        <el-avatar style=\"margin-top: 14px;margin-right: 6px;\" size=\"medium\" :src=\"avatar\"></el-avatar>-->\r\n                        <!--                        <span>{{username}}<i class=\"el-icon-arrow-down el-icon&#45;&#45;right\"></i></span>-->\r\n\r\n                        <div>\r\n                            <img :src=\"avatar\" style=\"width: 35px;margin-bottom: 12.5px;border-radius: 50%;margin-right: 10px\" />\r\n                            <span>{{ username }}</span>\r\n                            <span class=\"el-icon-arrow-down\" style=\"line-height: 60px;margin-left: 5px\"></span>\r\n                        </div>\r\n\r\n                        <el-dropdown-menu slot=\"dropdown\">\r\n\t\t\t\t\t\t\t<el-dropdown-item @click.native=\"off\"><span>关机</span></el-dropdown-item>\r\n                            <el-dropdown-item @click.native=\"isShow = !isShow\"><span>实时监控</span></el-dropdown-item>\r\n                            <el-dropdown-item @click.native=\"See()\"><span>软件产品</span></el-dropdown-item>\r\n                            <el-dropdown-item @click.native=\"See()\"><span>物联网平台</span></el-dropdown-item>\r\n                            <el-dropdown-item @click.native=\"handleUserInfo()\"><span>基本资料</span></el-dropdown-item>\r\n                            <!--                            <el-dropdown-item @click.native=\"handlePassword()\"><span>个人主页</span></el-dropdown-item>-->\r\n                            <!--                            <el-dropdown-item @click.native=\"handlePassword()\"><span>更换密码</span></el-dropdown-item>-->\r\n                            <el-dropdown-item @click.native=\"loginOut()\"><span>退出</span></el-dropdown-item>\r\n                        </el-dropdown-menu>\r\n                    </el-dropdown>\r\n                </div>\r\n\r\n                <!--新增界面-->\r\n                <el-dialog title=\"修改密码\" :visible.sync=\"passwordFormVisible\" top=\"5vh\">\r\n                    <el-form :model=\"passwordFormData\" :rules=\"passwordFormDataRules\" ref=\"passwordFormData\">\r\n                        <el-form-item label=\"原始密码\" prop=\"old_password\">\r\n                            <el-input type=\"password\" v-model=\"passwordFormData.old_password\" auto-complete=\"off\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"新密码\" prop=\"new_password\">\r\n                            <el-input type=\"password\" v-model=\"passwordFormData.new_password\" auto-complete=\"off\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"确认密码\" prop=\"check_new_password\">\r\n                            <el-input type=\"password\" v-model=\"passwordFormData.check_new_password\" auto-complete=\"off\"></el-input>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                    <div slot=\"footer\" class=\"dialog-footer\">\r\n                        <el-button @click.native=\"passwordFormVisible = !passwordFormVisible\">取消</el-button>\r\n                        <el-button type=\"primary\" @click.native=\"addSubmit('passwordFormData')\" :loading=\"passwordLoading\">提交</el-button>\r\n                    </div>\r\n                </el-dialog>\r\n            </el-header>\r\n            <div class=\"play\" v-if=\"isShow\">\r\n                <video id=\"my-video\" class=\"video-js vjs-default-skin\" controls preload=\"auto\" >\r\n                    <source src=\"http://192.168.115.51:10800/hls/stream_1/stream_1_live.m3u8\" type=\"application/x-mpegURL\" />\r\n                </video>\r\n\r\n                <!-- <videoPlayer class=\"video-player vjs-custom-skin\" :options=\"videoOptions\"></videoPlayer> -->\r\n            </div>\r\n            <!--遮板-->\r\n            <div class=\"main-mask\" v-show=\"menuShow\" @click=\"menuShow = !menuShow\"></div>\r\n\r\n            <el-main class=\"main\">\r\n                <transition name=\"move\" mode=\"out-in\"><router-view></router-view></transition>\r\n                <el-button type=\"primary\" class=\"upload-exception\" icon=\"el-icon-edit\" circle @click=\"setImage\"></el-button>\r\n                <el-dialog title=\"测试\" @click=\"dialogVisible = true\" :visible.sync=\"dialogVisible\"><img id=\"downImg\" :src=\"dataurl\" alt=\"\" style=\"width: 100%;\" /></el-dialog>\r\n            </el-main>\r\n        </el-container>\r\n    </el-container>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex';\r\nimport SidebarItem from './SidebarItem.vue';\r\nimport { password } from '../../api/auth/login';\r\nimport { getUserId } from '../../utils/auth';\r\nimport html2canvas from 'html2canvas';\r\n\r\n// import 'video.js/dist/video-js.css';\r\n// import 'vue-video-player/src/custom-theme.css';\r\n// import { videoPlayer } from 'vue-video-player';\r\n// import 'videojs-flash';\r\n\r\nimport videojs from 'video.js';\r\nimport 'videojs-contrib-hls';\r\nexport default {\r\n    name: 'top-mag',\r\n\r\n    data() {\r\n        let validatePass = (rule, value, callback) => {\r\n            if (value === '') {\r\n                callback(new Error('请输入密码'));\r\n            } else {\r\n                if (!/^[0-9A-Za-z]{6,15}$/.test(value)) {\r\n                    callback(new Error('密码少于6位'));\r\n                }\r\n                if (this.passwordFormData.check_new_password !== '') {\r\n                    this.$refs.passwordFormData.validateField('check_new_password');\r\n                }\r\n                callback();\r\n            }\r\n        };\r\n        let validatePass2 = (rule, value, callback) => {\r\n            if (value === '') {\r\n                callback(new Error('请再次输入密码'));\r\n            } else if (value !== this.passwordFormData.new_password) {\r\n                callback(new Error('两次输入密码不一致!'));\r\n            } else {\r\n                callback();\r\n            }\r\n        };\r\n        return {\r\n            isShow: false,\r\n            dataurl: '',\r\n            dialogVisible: false,\r\n            menuShow: false,\r\n            levelList: null,\r\n            passwordLoading: false,\r\n            passwordFormVisible: false,\r\n            passwordFormData: {\r\n                old_password: '',\r\n                new_password: '',\r\n                check_new_password: ''\r\n            },\r\n            passwordFormDataRules: {\r\n                old_password: [\r\n                    {\r\n                        required: true,\r\n                        message: '请输入原始密码',\r\n                        trigger: 'blur'\r\n                    }\r\n                ],\r\n                new_password: [\r\n                    {\r\n                        required: true,\r\n                        message: '请输入新密码',\r\n                        trigger: 'blur'\r\n                    },\r\n                    { validator: validatePass, trigger: 'blur' }\r\n                ],\r\n                check_new_password: [\r\n                    {\r\n                        required: true,\r\n                        message: '请再次输入密码',\r\n                        trigger: 'blur'\r\n                    },\r\n                    { validator: validatePass2, trigger: 'blur' }\r\n                ]\r\n            },\r\n            // 视频播放\r\n            videoOptions: {\r\n                playbackRates: [0.7, 1.0, 1.5, 2.0], //播放速度\r\n                autoplay: false, //如果true,浏览器准备好时开始回放。\r\n                muted: false, // 默认情况下将会消除任何音频。\r\n                loop: false, // 导致视频一结束就重新开始。\r\n                preload: 'auto', // 建议浏览器在<video>加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）\r\n                language: 'zh-CN',\r\n                aspectRatio: '16:9', // 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如\"16:9\"或\"4:3\"）\r\n                techOrder: ['flash', 'html5'], // 兼容顺序\r\n                sources: [\r\n                    {\r\n                        // 流配置，数组形式，会根据兼容顺序自动切换\r\n                        type: 'rtmp/hls',\r\n                        src: 'rtmp://211.154.252.186:10935/hls/stream_1'\r\n                    }\r\n                ],\r\n                poster: '', //你的封面地址\r\n                // width: document.documentElement.clientWidth,\r\n                notSupportedMessage: '此视频暂无法播放，请稍后再试', // 允许覆盖Video.js无法播放媒体源时显示的默认信息。\r\n                controlBar: {\r\n                    timeDivider: true,\r\n                    durationDisplay: true,\r\n                    remainingTimeDisplay: false,\r\n                    fullscreenToggle: true //全屏按钮\r\n                },\r\n                autoplay: true\r\n            }\r\n        };\r\n    },\r\n    components: {\r\n        SidebarItem\r\n        // videoPlayer\r\n    },\r\n    computed: {\r\n        ...mapGetters({\r\n            routers: 'routers'\r\n        }),\r\n        onRoutes() {\r\n            return this.$route.path;\r\n        },\r\n        username() {\r\n            let username = this.$store.state.admin.userName;\r\n            return !username ? this.name : username;\r\n        },\r\n        avatar() {\r\n            let avatar = this.$store.state.admin.avatar;\r\n            return !avatar ? this.name : avatar;\r\n        },\r\n        isCollapse() {\r\n            return this.$store.state.app.sidebar.opened;\r\n        }\r\n    },\r\n    mounted() {},\r\n    methods: {\r\n        off(){\r\n            this.$axios({\r\n                method:'get',\r\n                url:'http://www.dreamdeck.cn:18000/computer/getAllComputer'\r\n            }).then(res=>{\r\n                console.log(res)\r\n            })\r\n        },\r\n        See(e) {\r\n            window.open('https://www.baidu.com', '_blank');\r\n        },\r\n        open() {\r\n            videojs(\r\n                'my-video',\r\n                {\r\n                    bigPlayButton: false,\r\n                    textTrackDisplay: false,\r\n                    posterImage: true,\r\n                    errorDisplay: false,\r\n                    controlBar: true\r\n                },\r\n                function() {\r\n                    this.play();\r\n                }\r\n            );\r\n        },\r\n\r\n        toggleSideBar() {\r\n            this.$store.dispatch('ToggleSideBar');\r\n        },\r\n        showSideBar() {\r\n            this.$store.dispatch('ShowSideBar');\r\n        },\r\n        getBreadcrumb() {\r\n            let matched = this.$route.matched.filter(item => item.name);\r\n            const first = matched[0];\r\n            if (first && (first.name !== '首页' || first.path !== '')) {\r\n                matched = [{ name: '首页', path: '/' }].concat(matched);\r\n            }\r\n            this.levelList = matched;\r\n            // console.log(this.levelList);\n            console.log(\n                '%c',\n                \"font-size:200px;padding:110px 500px;background:url('https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1598262465097&di=35bbe65ecf3b55b5cfbbba3355d35b28&imgtype=0&src=http%3A%2F%2Fgss2.bdstatic.com%2F-fo3dSag_xI4khGkpoWK1HF6hhy%2Fbaike%2Fs%3D220%2Fsign%3D26f00493a718972ba73a07c8d6cf7b9d%2F8718367adab44aedd8958663bf1c8701a08bfb5a.jpg') no-repeat;\"\n            );\r\n        },\r\n        loginOut() {\r\n            console.log('2');\r\n            this.$confirm('此操作将退出系统, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            })\r\n                .then(() => {\r\n                    this.$store.dispatch('loginOut').then(() => {\r\n                        //this.setCookie(\"ddmsAutoLogin\",\"\")\r\n                        window.localStorage.setItem('ddmsAutoLogin', '');\r\n                        location.reload(); // 为了重新实例化vue-router对象 避免bug\r\n                    });\r\n                })\r\n                .catch(() => {\r\n                    this.$message({\r\n                        type: 'error',\r\n                        message: '操作失败'\r\n                    });\r\n                });\r\n        },\r\n        // 保存cookie\r\n        setCookie: function(cName, value, expiredays) {\r\n            var exdate = new Date();\r\n            exdate.setDate(exdate.getDate() + expiredays);\r\n            document.cookie = cName + '=' + decodeURIComponent(value) + (expiredays == null ? '' : ';expires=' + exdate.toGMTString());\r\n        },\r\n        handleUserInfo() {\r\n            this.$router.push({\r\n                path: '/admin/user/info'\r\n            });\r\n        },\r\n        // 显示修改密码界面\r\n        handlePassword() {\r\n            this.passwordFormVisible = true;\r\n            this.passwordFormData = {\r\n                old_password: '',\r\n                new_password: '',\r\n                check_new_password: ''\r\n            };\r\n        },\r\n        addSubmit(formName) {\r\n            this.$refs[formName].validate(valid => {\r\n                if (valid) {\r\n                    //this.passwordLoading = true;\r\n                    let data = Object.assign({});\r\n                    data.userId = getUserId();\r\n                    data.password = this.passwordFormData.old_password;\r\n                    data.newpassword1 = this.passwordFormData.new_password;\r\n                    console.log(data);\r\n                    password(data)\r\n                        .then(res => {\r\n                            //this.passwordLoading = false;\r\n                            console.log(res.data.data);\r\n                            if (res.data.data) {\r\n                                this.$message({\r\n                                    message: '修改成功',\r\n                                    type: 'success'\r\n                                });\r\n                                // 刷新表单\r\n                                this.$refs['passwordFormData'].resetFields();\r\n                                this.passwordFormVisible = false;\r\n                                this.$store.dispatch('loginOut').then(() => {\r\n                                    location.reload(); // 为了重新实例化vue-router对象 避免bug\r\n                                });\r\n                            } else {\r\n                                this.$message({\r\n                                    message: res.data.msg,\r\n                                    type: 'error'\r\n                                });\r\n                            }\r\n                        })\r\n                        .catch(() => {\r\n                            this.$message({\r\n                                type: 'error',\r\n                                message: '操作失败'\r\n                            });\r\n                        });\r\n                }\r\n            });\r\n        },\r\n        setImage() {\r\n            let that = this;\r\n            //   event.preventDefault();\r\n            var canvas2 = document.createElement('canvas');\r\n            // let _canvas = document.getElementById('child');\r\n            let _canvas = document.getElementById('app');\r\n\r\n            var w = parseInt(window.getComputedStyle(_canvas).width);\r\n            var h = parseInt(window.getComputedStyle(_canvas).height);\r\n            //将canvas画布放大若干倍，然后盛放在较小的容器内，就显得不模糊了\r\n            canvas2.width = w * 2;\r\n            canvas2.height = h * 2;\r\n            canvas2.style.width = w + 'px';\r\n            canvas2.style.height = h + 'px';\r\n            //可以按照自己的需求，对context的参数修改,translate指的是偏移量\r\n            //  var context = canvas.getContext(\"2d\");\r\n            //  context.translate(0,0);\r\n            var context = canvas2.getContext('2d');\r\n            context.scale(2, 2);\r\n            // html2canvas(document.getElementById('child'), {\r\n            html2canvas(document.getElementById('app'), {\r\n                canvas: canvas2\r\n            }).then(function(canvas) {\r\n                var blob = that.getBlob(canvas);\r\n                var oMyForm = new FormData();\r\n                var fileName = 'mobile' + '.jpg';\r\n                oMyForm.append('file', blob, fileName);\r\n                //\t\t\t\toMyForm.append(\"fileName\", fileName);\r\n                oMyForm.append('fileType', 'image');\r\n                oMyForm.append('user_id', that);\r\n            });\r\n            this.dialogVisible = true;\r\n        },\r\n        getBlob(canvas) {\r\n            //获取blob对象\r\n            var data = canvas.toDataURL('image/jpeg', 1);\r\n            this.dataurl = data;\r\n            //console.log(this.dataurl)\r\n            data = data.split(',')[1];\r\n            data = window.atob(data);\r\n            var ia = new Uint8Array(data.length);\r\n            for (var i = 0; i < data.length; i++) {\r\n                ia[i] = data.charCodeAt(i);\r\n            }\r\n            return new Blob([ia], {\r\n                type: 'image/jpeg'\r\n            });\r\n        }\r\n    },\r\n    created() {\r\n        this.getBreadcrumb();\n\r\n    },\r\n    watch: {\r\n        $route() {\r\n            this.getBreadcrumb();\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style type=\"text/scss\" lang=\"scss\" scoped>\r\n.el-icon-bell:before {\r\n    font-size: 20px;\r\n}\r\n.dot {\r\n    margin-left: -4px;\r\n    margin-right: 15px;\r\n    margin-top: -22px;\r\n}\r\n@import '../../styles/mixin';\r\n.el-header {\r\n    /*background-color: #eef1f6;*/\r\n    color: #333;\r\n    padding: 0 10px;\r\n}\r\n\r\n.el-aside {\r\n    color: #333;\r\n}\r\n\r\n.el-main {\r\n    position: relative;\r\n    padding: 0 10px 10px;\r\n    background-color: #fff;\r\n    margin-left: 7px;\r\n    margin-top: 5px;\r\n}\r\n.main-mask {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 200%;\r\n    z-index: 100;\r\n    background-color: #000;\r\n    opacity: 0.3;\r\n}\r\n\r\n.move-enter-active,\r\n.move-leave-active {\r\n    transition: opacity 0.5s;\r\n}\r\n\r\n.move-enter,\r\n.move-leave {\r\n    opacity: 0;\r\n}\r\n\r\n.wrapper {\r\n    height: 100%;\r\n    overflow-y: hidden;\r\n    background-color: #f5f7f9;\r\n}\r\n\r\n.container-box {\r\n    height: 100%;\r\n    transition: -webkit-transform 0.3s ease-in-out;\r\n    transition: transform 0.3s ease-in-out, -webkit-transform 0.3s ease-in-out;\r\n    overflow-y: auto;\r\n}\r\n\r\n.container-left {\r\n    background-color: rgb(48, 65, 86);\r\n    transition: left 0.23s ease-in-out;\r\n    height: 100%;\r\n    flex: 0 0 auto;\r\n}\r\n.container-left-wrap {\r\n    overflow-x: hidden !important;\r\n}\r\n\r\n.container-left .svg-icon {\r\n    font-size: 20px;\r\n    margin-right: 5px;\r\n}\r\n\r\n.container-left:not(.slide-hide) {\r\n    width: 200px;\r\n}\r\n\r\n.container-left.slide-hide {\r\n    .logo img {\r\n        display: none;\r\n    }\r\n    .logo span {\r\n        display: inline-block;\r\n    }\r\n}\r\n\r\n.menu {\r\n    width: 100% !important;\r\n}\r\n\r\n/*.menu::-webkit-scrollbar{*/\r\n/*display: none;*/\r\n/*}*/\r\n\r\n.header {\r\n    position: relative;\r\n    text-align: left;\r\n    font-size: 12px;\r\n    line-height: $header-height;\r\n    border-bottom: 1px solid #d8dce5;\r\n    background-color: #fff;\r\n}\r\n\r\n.logo {\r\n    display: block;\r\n    width: 100%;\r\n    line-height: 80px;\r\n    text-align: center;\r\n    color: #fff;\r\n    transition: display 0.7s ease-in-out;\r\n    img {\r\n        vertical-align: middle;\r\n        width: 70px;\r\n    }\r\n    span {\r\n        display: none;\r\n    }\r\n}\r\n\r\n.header-left {\r\n    display: inline-block;\r\n    height: $header-height;\r\n    overflow: hidden;\r\n}\r\n\r\n.header-tabs-box {\r\n    display: inline-block;\r\n    height: $header-height;\r\n    max-width: 60%;\r\n    overflow: hidden;\r\n}\r\n\r\n.header-right {\r\n    display: flex;\r\n    height: 100%;\r\n    margin-left: 10px;\r\n    float: right;\r\n    .el-dropdown {\r\n        display: flex;\r\n        cursor: pointer;\r\n    }\r\n    span {\r\n        display: inline-block;\r\n        @include text-overflow;\r\n    }\r\n    i {\r\n        line-height: $header-height;\r\n        margin-top: 2px;\r\n    }\r\n}\r\n\r\n.app-levelbar {\r\n    margin-left: 20px;\r\n    line-height: 57px !important;\r\n}\r\n\r\n/*宽屏时出现*/\r\n.slide-toggle {\r\n    display: inline-block;\r\n    height: $header-height;\r\n    line-height: $header-height;\r\n    text-align: center;\r\n    cursor: pointer;\r\n}\r\n\r\n.slide-toggle span {\r\n    display: inline-block;\r\n    width: 2px;\r\n    height: 12px;\r\n    background-color: rgba(135, 141, 153, 0.8);\r\n    margin-left: 5px;\r\n}\r\n.slide-toggle-open span {\r\n    display: block;\r\n    margin-left: 4px;\r\n    margin-top: 4px;\r\n    width: 16px;\r\n    height: 2px;\r\n}\r\n.slide-toggle-open {\r\n    padding-top: 17px;\r\n}\r\n\r\n@media screen and (min-width: 768px) {\r\n    .main-mask {\r\n        display: none;\r\n    }\r\n}\r\n\r\n/*.slide-hide {*/\r\n/*width: 64px !important;*/\r\n/*}*/\r\n\r\n@media screen and (max-width: 768px) {\r\n    .main {\r\n        overflow-y: scroll !important;\r\n        -webkit-overflow-scrolling: touch;\r\n    }\r\n\r\n    .slide-hide.slide-in-left {\r\n        -webkit-transform: translate3d(64px, 0, 0) !important;\r\n        transform: translate3d(64px, 0, 0) !important;\r\n    }\r\n    .container-left.slide-hide.slide-in-left {\r\n        left: -64px;\r\n        width: 64px;\r\n    }\r\n    .container-left.slide-in-left {\r\n        left: 0;\r\n    }\r\n    .container-left {\r\n        margin-right: 0;\r\n        opacity: 1;\r\n        position: absolute !important;\r\n        top: 0;\r\n        left: -225px;\r\n        z-index: 10;\r\n        padding: 0;\r\n    }\r\n\r\n    .container-box.slide-in-left {\r\n        min-width: 0;\r\n        opacity: 1;\r\n        -webkit-transform: translate3d(187px, 0, 0);\r\n        transform: translate3d(187px, 0, 0);\r\n        overflow: initial;\r\n    }\r\n    .header-toggle {\r\n        display: block;\r\n        /*background-color: #26a2ff;*/\r\n        border-radius: 4px;\r\n        /*border: 1px solid #fff;*/\r\n        height: 40px;\r\n        margin: 10px 0;\r\n        padding: 2px 6px;\r\n        outline: none;\r\n        width: 40px;\r\n        z-index: 10;\r\n    }\r\n\r\n    .header-toggle span {\r\n        display: block;\r\n        width: 100%;\r\n        height: 4px;\r\n        margin: 5px auto;\r\n        background-color: rgba(135, 141, 153, 0.8);\r\n    }\r\n\r\n    .logo {\r\n        display: none;\r\n    }\r\n    .slide-toggle {\r\n        display: none;\r\n    }\r\n    .top-mag {\r\n        &__menu {\r\n            float: right;\r\n        }\r\n    }\r\n}\r\n.upload-exception {\r\n    position: fixed;\r\n    right: 30px;\r\n    bottom: 30px;\r\n}\r\n</style>\n"],"sourceRoot":"src/views/home"}]}