{"remainingRequest":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js!D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\purchase\\execute\\Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\purchase\\execute\\Edit.vue","mtime":1597996042416},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"D:\\\\DDMS\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getApplyUserInfo } from \"../../../api/admin/user.js\";\nimport { getPurchase as _getPurchase, getPurchaseInfo as _getPurchaseInfo, applyEditpurchaseEs } from \"../../../api/purchase/purchase.js\";\nimport { mapGetters } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      query: {\n        companyId: null,\n        userId: null,\n        deptId: null,\n        itemId: null,\n        type: 6,\n        priceYuan: 0\n      },\n      formData: {\n        userId: null,\n        itemId: 0,\n        // 数据id\n        purchaseId: null,\n        // 采购名称\n        name: '',\n        // 详细分类\n        type1: '',\n        type2: '',\n        type3: '',\n        // 链接\n        buyUrl: '',\n        // 推荐厂家\n        factoryName: '',\n        // 型号参数\n        model: '',\n        // 数量\n        num: '',\n        // 单位\n        unit: '',\n        // 单价\n        price: '',\n        // 预估总价\n        guessPrice: '',\n        // 备注\n        remark: '',\n        // 预计到货时间\n        guessTime: '',\n        // 需求描述\n        demand: '',\n        // 型号参数图片\n        purchaseImg: '',\n        // 收货地址联系方式\n        contact: '',\n        // 其它参数\n        expressName: null,\n        expressNum: null,\n        isOpen: 1,\n        purchaseType: 1,\n        applyId: 1,\n        pactImg: null,\n        performNote: '',\n        pactPrice: null,\n        purchaseStatus: null,\n        payStatus: null,\n        invoiceStatus: null,\n        companyName: null,\n        bankName: null,\n        bankAccount: null,\n        guessPriceYuan: '',\n        priceYuan: '',\n        relPriceYuan: '',\n        pactPriceYuan: '',\n        aliasNext: '',\n        itemNextId: null\n      },\n      userOptions: [{\n        value: '合同谈判中',\n        label: '合同谈判中'\n      }, {\n        value: '合同已签订',\n        label: '合同已签订'\n      }, {\n        value: '已打全款',\n        label: '已打全款'\n      }, {\n        value: '已打首付款',\n        label: '已打首付款'\n      }, {\n        value: '已收货',\n        label: '已收货'\n      }],\n      invoice: [{\n        value: '未取得',\n        label: '未取得'\n      }, {\n        value: '未报销',\n        label: '未报销'\n      }, {\n        value: '已取得未报销',\n        label: '已取得未报销'\n      }, {\n        value: '已取得已报销',\n        label: '已取得已报销'\n      }, {\n        value: '无发票',\n        label: '无发票'\n      }, {\n        value: '已找票',\n        label: '已找票'\n      }],\n      userOptions2: [{\n        value: '已下单',\n        label: '已下单'\n      }, {\n        value: '已发货',\n        label: '已发货'\n      }, {\n        value: '已收货',\n        label: '已收货'\n      }, {\n        value: '已退货',\n        label: '已退货'\n      }, {\n        value: '已退款',\n        label: '已退款'\n      }],\n      fileList2: [],\n      applyUserList: [],\n      sumClassifyOptions: [],\n      mainClassifyOptions: [],\n      subClassifyOptions: [],\n      purchaseId: null,\n      uploadUrl: '',\n      rules: {\n        isOpen: [{\n          required: true,\n          message: '请选择对公状态',\n          trigger: 'change'\n        }],\n        companyName: [{\n          required: true,\n          message: '请填写公司名称',\n          trigger: 'change'\n        }],\n        bankName: [{\n          required: true,\n          message: '请填写开户行名称'\n        }],\n        bankAccount: [{\n          required: true,\n          message: '请填写开户行账号',\n          trigger: 'change'\n        }]\n      },\n      saving: false\n    };\n  },\n  created: function created() {\n    // this.formData.userId = this.userId;\n    this.query.userId = this.userId;\n    this.getPurchase('100000', this.userId);\n    this.uploadUrl = \"\".concat(window.location.origin, \"/apply/purchase/upload\");\n    this.purchaseId = this.$route.query.purchaseId;\n    this.getPurchaseInfo();\n  },\n  computed: _objectSpread({}, mapGetters(['permissions', 'userId'])),\n  methods: {\n    // 获取总类\n    getPurchase: function getPurchase(id, userId) {\n      var _this = this;\n\n      _getPurchase(id, userId).then(function (res) {\n        _this.sumClassifyOptions = res.data.data.purchaseType;\n      });\n    },\n    getPurchaseInfo: function getPurchaseInfo() {\n      var _this2 = this;\n\n      _getPurchaseInfo(this.purchaseId).then(function (res) {\n        var editPurchaseInfo = res.data.data;\n        _this2.formData.name = editPurchaseInfo.name;\n        _this2.formData.buyUrl = editPurchaseInfo.buyUrl;\n        _this2.formData.itemId = editPurchaseInfo.itemId;\n        _this2.formData.aliasNext = editPurchaseInfo.aliasNext;\n        _this2.formData.itemNextId = editPurchaseInfo.itemNextId;\n        _this2.formData.purchaseId = editPurchaseInfo.purchaseId;\n        _this2.query.itemId = editPurchaseInfo.itemId;\n        _this2.formData.type1 = editPurchaseInfo.type1;\n\n        if (editPurchaseInfo.itemId != null && editPurchaseInfo.itemNextId == null) {\n          _this2.formData.type2 = [editPurchaseInfo.type2, editPurchaseInfo.itemId];\n        } else if (editPurchaseInfo.itemNextId != null) {\n          _this2.formData.type2 = [editPurchaseInfo.type2, editPurchaseInfo.itemNextId, editPurchaseInfo.itemId];\n        } else {\n          _this2.formData.type2 = [editPurchaseInfo.type2];\n        }\n\n        _this2.formData.type3 = editPurchaseInfo.type3;\n        _this2.formData.factoryName = editPurchaseInfo.factoryName;\n        _this2.formData.model = editPurchaseInfo.model;\n        _this2.formData.demand = editPurchaseInfo.demand;\n        _this2.formData.num = editPurchaseInfo.num;\n        _this2.formData.unit = editPurchaseInfo.unit;\n        _this2.formData.priceYuan = editPurchaseInfo.priceYuan;\n        _this2.formData.pactPriceYuan = editPurchaseInfo.pactPriceYuan;\n        _this2.formData.guessPriceYuan = editPurchaseInfo.guessPriceYuan;\n        _this2.formData.remark = editPurchaseInfo.remark;\n        _this2.formData.purchaseImg = editPurchaseInfo.purchaseImg;\n        _this2.formData.contact = editPurchaseInfo.contact;\n        _this2.formData.guessTime = editPurchaseInfo.guessTime;\n        _this2.formData.expressName = editPurchaseInfo.expressName;\n        _this2.formData.expressNum = editPurchaseInfo.expressNum;\n        _this2.formData.isOpen = editPurchaseInfo.isOpen;\n        _this2.formData.purchaseType = editPurchaseInfo.purchaseType;\n        _this2.formData.applyId = editPurchaseInfo.applyId;\n\n        if (editPurchaseInfo.pactImg == null) {\n          _this2.formData.pactImg = '';\n        } else {\n          _this2.formData.pactImg = editPurchaseInfo.pactImg;\n          editPurchaseInfo.pactImg.split(',').forEach(function (item, index) {\n            if (item) {\n              _this2.fileList2.push({\n                url: \"\".concat(window.location.origin, \"/apply/purchase/\") + item\n              });\n            }\n          });\n        }\n\n        _this2.formData.pactPrice = editPurchaseInfo.pactPrice * 0.01;\n        _this2.formData.purchaseStatus = editPurchaseInfo.purchaseStatus;\n        _this2.formData.performNote = editPurchaseInfo.performNote;\n        _this2.formData.payStatus = editPurchaseInfo.payStatus;\n        _this2.formData.invoiceStatus = editPurchaseInfo.invoiceStatus;\n        _this2.formData.companyName = editPurchaseInfo.companyName;\n        _this2.formData.bankName = editPurchaseInfo.bankName;\n        _this2.formData.bankAccount = editPurchaseInfo.bankAccount;\n        _this2.formData.relPriceYuan = editPurchaseInfo.relPriceYuan;\n        editPurchaseInfo.checkUserList.forEach(function (item) {\n          _this2.applyUserList.push({\n            userId: item.checkUserId,\n            username: item.checkUserName,\n            avatar: item.checkUserAvatar\n          });\n        }); //console.log(editPurchaseInfo.invoiceImg)\n\n        _getPurchase(_this2.formData.type1, _this2.userId).then(function (res) {\n          res.data.data.purchaseType.forEach(function (item) {\n            _this2.mainClassifyOptions.push({\n              value: item.id,\n              label: item.name,\n              children: item.children\n            });\n          });\n        });\n\n        _getPurchase(_this2.formData.type2[0], _this2.userId).then(function (res) {\n          _this2.subClassifyOptions = res.data.data.purchaseType;\n        });\n      });\n\n      console.log(this.formData);\n    },\n    // 提交\n    onSubmit: function onSubmit() {\n      var _this3 = this;\n\n      this.formData.type2 = this.formData.type2[0];\n      console.log(this.formData);\n      this.$refs['formData'].validate(function (valid) {\n        if (valid) {\n          _this3.saving = true;\n          applyEditpurchaseEs(_this3.formData).then(function (res) {\n            console.log(res);\n\n            _this3.backHistory();\n          }).finally(function () {\n            _this3.saving = false;\n          });\n        }\n      });\n    },\n    handlePreview2: function handlePreview2(file) {\n      console.log(file);\n    },\n    handleRemove2: function handleRemove2(data) {\n      var serverUrl = \"\".concat(window.location.origin, \"/apply/purchase/\");\n      var imgUrl = data.url.replace(serverUrl, '');\n      this.formData.pactImg = this.formData.pactImg.replace(imgUrl + ',', '');\n    },\n    handSuccess2: function handSuccess2(data) {\n      var imgInfo = data.data;\n      var imgUrl = imgInfo.bucketName + '-' + imgInfo.fileName;\n      this.formData.pactImg += imgUrl + ',';\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isJPG = file.type === 'image/jpeg';\n      var isPNG = file.type === 'image/png';\n      var isPG = isJPG || isPNG; //限制图片格式为jpg / png\n\n      var isLt5M = file.size / 1024 / 1024 < 5; //限制图片大小\n\n      if (!isPG) {\n        this.$message.error('上传头像图片只能是 JPG 或 PNG 格式!');\n      }\n\n      if (!isLt5M) {\n        this.$message.error('上传头像图片大小不能超过 5MB!');\n      }\n\n      return isPG && isLt5M;\n    },\n    // 取消\n    backHistory: function backHistory() {\n      this.$router.go(-1);\n    },\n    goExpense: function goExpense() {\n      this.formData.type2 = this.formData.type2[0];\n      window.localStorage.setItem('editPurchaseInfo', JSON.stringify(this.formData));\n      this.$router.push({\n        path: '/apply/expense/form'\n      });\n    },\n    isOpen: function isOpen(val) {\n      if (val == 2) {\n        // console.log(132132132);\n        this.formData.companyName = '';\n        this.formData.bankName = '';\n        this.formData.bankAccount = '';\n        this.formData.pactPrice = '';\n        this.formData.pactImg = null;\n        this.formData.payStatus = '';\n        this.formData.purchaseStatus = '';\n      }\n\n      console.log(this.formData);\n    }\n  }\n};",{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8MA,SAAA,gBAAA;AACA,SAAA,WAAA,IAAA,YAAA,EAAA,eAAA,IAAA,gBAAA,EAAA,mBAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,SAAA,EAAA,IADA;AAEA,QAAA,MAAA,EAAA,IAFA;AAGA,QAAA,MAAA,EAAA,IAHA;AAIA,QAAA,MAAA,EAAA,IAJA;AAKA,QAAA,IAAA,EAAA,CALA;AAMA,QAAA,SAAA,EAAA;AANA,OADA;AASA,MAAA,QAAA,EAAA;AACA,QAAA,MAAA,EAAA,IADA;AAEA,QAAA,MAAA,EAAA,CAFA;AAGA;AACA,QAAA,UAAA,EAAA,IAJA;AAKA;AACA,QAAA,IAAA,EAAA,EANA;AAOA;AACA,QAAA,KAAA,EAAA,EARA;AASA,QAAA,KAAA,EAAA,EATA;AAUA,QAAA,KAAA,EAAA,EAVA;AAWA;AACA,QAAA,MAAA,EAAA,EAZA;AAaA;AACA,QAAA,WAAA,EAAA,EAdA;AAeA;AACA,QAAA,KAAA,EAAA,EAhBA;AAiBA;AACA,QAAA,GAAA,EAAA,EAlBA;AAmBA;AACA,QAAA,IAAA,EAAA,EApBA;AAqBA;AACA,QAAA,KAAA,EAAA,EAtBA;AAuBA;AACA,QAAA,UAAA,EAAA,EAxBA;AAyBA;AACA,QAAA,MAAA,EAAA,EA1BA;AA2BA;AACA,QAAA,SAAA,EAAA,EA5BA;AA6BA;AACA,QAAA,MAAA,EAAA,EA9BA;AA+BA;AACA,QAAA,WAAA,EAAA,EAhCA;AAiCA;AACA,QAAA,OAAA,EAAA,EAlCA;AAmCA;AACA,QAAA,WAAA,EAAA,IApCA;AAqCA,QAAA,UAAA,EAAA,IArCA;AAsCA,QAAA,MAAA,EAAA,CAtCA;AAuCA,QAAA,YAAA,EAAA,CAvCA;AAwCA,QAAA,OAAA,EAAA,CAxCA;AAyCA,QAAA,OAAA,EAAA,IAzCA;AA0CA,QAAA,WAAA,EAAA,EA1CA;AA2CA,QAAA,SAAA,EAAA,IA3CA;AA4CA,QAAA,cAAA,EAAA,IA5CA;AA6CA,QAAA,SAAA,EAAA,IA7CA;AA8CA,QAAA,aAAA,EAAA,IA9CA;AA+CA,QAAA,WAAA,EAAA,IA/CA;AAgDA,QAAA,QAAA,EAAA,IAhDA;AAiDA,QAAA,WAAA,EAAA,IAjDA;AAkDA,QAAA,cAAA,EAAA,EAlDA;AAmDA,QAAA,SAAA,EAAA,EAnDA;AAoDA,QAAA,YAAA,EAAA,EApDA;AAqDA,QAAA,aAAA,EAAA,EArDA;AAsDA,QAAA,SAAA,EAAA,EAtDA;AAuDA,QAAA,UAAA,EAAA;AAvDA,OATA;AAmEA,MAAA,WAAA,EAAA,CACA;AACA,QAAA,KAAA,EAAA,OADA;AAEA,QAAA,KAAA,EAAA;AAFA,OADA,EAKA;AACA,QAAA,KAAA,EAAA,OADA;AAEA,QAAA,KAAA,EAAA;AAFA,OALA,EASA;AACA,QAAA,KAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA;AAFA,OATA,EAaA;AACA,QAAA,KAAA,EAAA,OADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAbA,EAiBA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAjBA,CAnEA;AAyFA,MAAA,OAAA,EAAA,CACA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OADA,EAKA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OALA,EASA;AACA,QAAA,KAAA,EAAA,QADA;AAEA,QAAA,KAAA,EAAA;AAFA,OATA,EAaA;AACA,QAAA,KAAA,EAAA,QADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAbA,EAiBA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAjBA,EAqBA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OArBA,CAzFA;AAmHA,MAAA,YAAA,EAAA,CACA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OADA,EAKA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OALA,EASA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OATA,EAaA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAbA,EAiBA;AACA,QAAA,KAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAjBA,CAnHA;AA0IA,MAAA,SAAA,EAAA,EA1IA;AA2IA,MAAA,aAAA,EAAA,EA3IA;AA4IA,MAAA,kBAAA,EAAA,EA5IA;AA6IA,MAAA,mBAAA,EAAA,EA7IA;AA8IA,MAAA,kBAAA,EAAA,EA9IA;AA+IA,MAAA,UAAA,EAAA,IA/IA;AAgJA,MAAA,SAAA,EAAA,EAhJA;AAiJA,MAAA,KAAA,EAAA;AACA,QAAA,MAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,SAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA,CADA;AAEA,QAAA,WAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,SAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA,CAFA;AAGA,QAAA,QAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA,CAHA;AAIA,QAAA,WAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,UAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA;AAJA,OAjJA;AAuJA,MAAA,MAAA,EAAA;AAvJA,KAAA;AAyJA,GA3JA;AA4JA,EAAA,OA5JA,qBA4JA;AACA;AACA,SAAA,KAAA,CAAA,MAAA,GAAA,KAAA,MAAA;AACA,SAAA,WAAA,CAAA,QAAA,EAAA,KAAA,MAAA;AACA,SAAA,SAAA,aAAA,MAAA,CAAA,QAAA,CAAA,MAAA;AACA,SAAA,UAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,UAAA;AACA,SAAA,eAAA;AACA,GAnKA;AAoKA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,aAAA,EAAA,QAAA,CAAA,CADA,CApKA;AAuKA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,WAFA,uBAEA,EAFA,EAEA,MAFA,EAEA;AAAA;;AACA,MAAA,YAAA,CAAA,EAAA,EAAA,MAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,kBAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,YAAA;AACA,OAFA;AAGA,KANA;AAQA,IAAA,eARA,6BAQA;AAAA;;AACA,MAAA,gBAAA,CAAA,KAAA,UAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,gBAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,IAAA,GAAA,gBAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,MAAA,GAAA,gBAAA,CAAA,MAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,MAAA,GAAA,gBAAA,CAAA,MAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,SAAA,GAAA,gBAAA,CAAA,SAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,UAAA,GAAA,gBAAA,CAAA,UAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,UAAA,GAAA,gBAAA,CAAA,UAAA;AAEA,QAAA,MAAA,CAAA,KAAA,CAAA,MAAA,GAAA,gBAAA,CAAA,MAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,KAAA,GAAA,gBAAA,CAAA,KAAA;;AACA,YAAA,gBAAA,CAAA,MAAA,IAAA,IAAA,IAAA,gBAAA,CAAA,UAAA,IAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,GAAA,CAAA,gBAAA,CAAA,KAAA,EAAA,gBAAA,CAAA,MAAA,CAAA;AACA,SAFA,MAEA,IAAA,gBAAA,CAAA,UAAA,IAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,GAAA,CAAA,gBAAA,CAAA,KAAA,EAAA,gBAAA,CAAA,UAAA,EAAA,gBAAA,CAAA,MAAA,CAAA;AACA,SAFA,MAEA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,KAAA,GAAA,CAAA,gBAAA,CAAA,KAAA,CAAA;AACA;;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,KAAA,GAAA,gBAAA,CAAA,KAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,WAAA,GAAA,gBAAA,CAAA,WAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,KAAA,GAAA,gBAAA,CAAA,KAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,MAAA,GAAA,gBAAA,CAAA,MAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,GAAA,GAAA,gBAAA,CAAA,GAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,IAAA,GAAA,gBAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,SAAA,GAAA,gBAAA,CAAA,SAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,aAAA,GAAA,gBAAA,CAAA,aAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,cAAA,GAAA,gBAAA,CAAA,cAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,MAAA,GAAA,gBAAA,CAAA,MAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,WAAA,GAAA,gBAAA,CAAA,WAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,OAAA,GAAA,gBAAA,CAAA,OAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,SAAA,GAAA,gBAAA,CAAA,SAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,WAAA,GAAA,gBAAA,CAAA,WAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,UAAA,GAAA,gBAAA,CAAA,UAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,MAAA,GAAA,gBAAA,CAAA,MAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,YAAA,GAAA,gBAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,OAAA,GAAA,gBAAA,CAAA,OAAA;;AACA,YAAA,gBAAA,CAAA,OAAA,IAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,GAAA,EAAA;AACA,SAFA,MAEA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,GAAA,gBAAA,CAAA,OAAA;AACA,UAAA,gBAAA,CAAA,OAAA,CAAA,KAAA,CAAA,GAAA,EAAA,OAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AACA,gBAAA,IAAA,EAAA;AACA,cAAA,MAAA,CAAA,SAAA,CAAA,IAAA,CAAA;AACA,gBAAA,GAAA,EAAA,UAAA,MAAA,CAAA,QAAA,CAAA,MAAA,wBAAA;AADA,eAAA;AAGA;AACA,WANA;AAOA;;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,SAAA,GAAA,gBAAA,CAAA,SAAA,GAAA,IAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,cAAA,GAAA,gBAAA,CAAA,cAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,WAAA,GAAA,gBAAA,CAAA,WAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,SAAA,GAAA,gBAAA,CAAA,SAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,aAAA,GAAA,gBAAA,CAAA,aAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,WAAA,GAAA,gBAAA,CAAA,WAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,QAAA,GAAA,gBAAA,CAAA,QAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,WAAA,GAAA,gBAAA,CAAA,WAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,YAAA,GAAA,gBAAA,CAAA,YAAA;AACA,QAAA,gBAAA,CAAA,aAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,aAAA,CAAA,IAAA,CAAA;AACA,YAAA,MAAA,EAAA,IAAA,CAAA,WADA;AAEA,YAAA,QAAA,EAAA,IAAA,CAAA,aAFA;AAGA,YAAA,MAAA,EAAA,IAAA,CAAA;AAHA,WAAA;AAKA,SANA,EAzDA,CAiEA;;AACA,QAAA,YAAA,CAAA,MAAA,CAAA,QAAA,CAAA,KAAA,EAAA,MAAA,CAAA,MAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,MAAA,CAAA,mBAAA,CAAA,IAAA,CAAA;AACA,cAAA,KAAA,EAAA,IAAA,CAAA,EADA;AAEA,cAAA,KAAA,EAAA,IAAA,CAAA,IAFA;AAGA,cAAA,QAAA,EAAA,IAAA,CAAA;AAHA,aAAA;AAKA,WANA;AAOA,SARA;;AASA,QAAA,YAAA,CAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,CAAA,CAAA,EAAA,MAAA,CAAA,MAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,kBAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,YAAA;AACA,SAFA;AAGA,OA9EA;;AA+EA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,QAAA;AACA,KAzFA;AA2FA;AACA,IAAA,QA5FA,sBA4FA;AAAA;;AACA,WAAA,QAAA,CAAA,KAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,QAAA;AACA,WAAA,KAAA,CAAA,UAAA,EAAA,QAAA,CAAA,UAAA,KAAA,EAAA;AACA,YAAA,KAAA,EAAA;AACA,UAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AAEA,UAAA,mBAAA,CAAA,MAAA,CAAA,QAAA,CAAA,CACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,YAAA,MAAA,CAAA,WAAA;AACA,WAJA,EAKA,OALA,CAKA,YAAA;AACA,YAAA,MAAA,CAAA,MAAA,GAAA,KAAA;AACA,WAPA;AAQA;AACA,OAbA;AAcA,KA7GA;AA+GA,IAAA,cA/GA,0BA+GA,IA/GA,EA+GA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,KAjHA;AAkHA,IAAA,aAlHA,yBAkHA,IAlHA,EAkHA;AACA,UAAA,SAAA,aAAA,MAAA,CAAA,QAAA,CAAA,MAAA,qBAAA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,GAAA,CAAA,OAAA,CAAA,SAAA,EAAA,EAAA,CAAA;AACA,WAAA,QAAA,CAAA,OAAA,GAAA,KAAA,QAAA,CAAA,OAAA,CAAA,OAAA,CAAA,MAAA,GAAA,GAAA,EAAA,EAAA,CAAA;AACA,KAtHA;AAuHA,IAAA,YAvHA,wBAuHA,IAvHA,EAuHA;AACA,UAAA,OAAA,GAAA,IAAA,CAAA,IAAA;AACA,UAAA,MAAA,GAAA,OAAA,CAAA,UAAA,GAAA,GAAA,GAAA,OAAA,CAAA,QAAA;AACA,WAAA,QAAA,CAAA,OAAA,IAAA,MAAA,GAAA,GAAA;AACA,KA3HA;AA4HA,IAAA,kBAAA,EAAA,4BAAA,IAAA,EAAA;AACA,UAAA,KAAA,GAAA,IAAA,CAAA,IAAA,KAAA,YAAA;AACA,UAAA,KAAA,GAAA,IAAA,CAAA,IAAA,KAAA,WAAA;AACA,UAAA,IAAA,GAAA,KAAA,IAAA,KAAA,CAHA,CAGA;;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA,GAAA,CAAA,CAJA,CAIA;;AACA,UAAA,CAAA,IAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,yBAAA;AACA;;AACA,UAAA,CAAA,MAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,mBAAA;AACA;;AACA,aAAA,IAAA,IAAA,MAAA;AACA,KAxIA;AA0IA;AACA,IAAA,WA3IA,yBA2IA;AACA,WAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA,KA7IA;AA8IA,IAAA,SA9IA,uBA8IA;AACA,WAAA,QAAA,CAAA,KAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,MAAA,MAAA,CAAA,YAAA,CAAA,OAAA,CAAA,kBAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,QAAA,CAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA;AADA,OAAA;AAGA,KApJA;AAsJA,IAAA,MAtJA,kBAsJA,GAtJA,EAsJA;AACA,UAAA,GAAA,IAAA,CAAA,EAAA;AACA;AAEA,aAAA,QAAA,CAAA,WAAA,GAAA,EAAA;AACA,aAAA,QAAA,CAAA,QAAA,GAAA,EAAA;AACA,aAAA,QAAA,CAAA,WAAA,GAAA,EAAA;AACA,aAAA,QAAA,CAAA,SAAA,GAAA,EAAA;AACA,aAAA,QAAA,CAAA,OAAA,GAAA,IAAA;AACA,aAAA,QAAA,CAAA,SAAA,GAAA,EAAA;AACA,aAAA,QAAA,CAAA,cAAA,GAAA,EAAA;AACA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,QAAA;AACA;AAnKA;AAvKA,CAAA","sourcesContent":["<template>\r\n    <div>\r\n        <div style=\"border-bottom: 5px solid #777777;margin: 1.6rem 0;\"><span style=\"font-size: 1.2rem;color: #777777;\">采购信息</span></div>\r\n        <el-form :model=\"formData\" class=\"form\" label-width=\"150px\">\r\n            <el-form-item label=\"采购物品名称：\" prop=\"name\">\r\n                <el-input disabled v-model=\"formData.name\" placeholder=\"请填写采购名称\" maxlength=\"50\" show-word-limit></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"总分类：\" prop=\"name\">\r\n                <el-radio-group v-model=\"formData.type1\">\r\n                    <el-radio disabled v-for=\"(item, index) in sumClassifyOptions\" :label=\"item.id\" :key=\"index\">{{ item.name }}</el-radio>\r\n                </el-radio-group>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"主分类：\" prop=\"name\">\r\n                <el-cascader\r\n                    disabled\r\n                    v-model=\"formData.type2\"\r\n                    :options=\"mainClassifyOptions\"\r\n                    :props=\"{ expandTrigger: 'hover' }\"\r\n                    :show-all-levels=\"false\"\r\n                    filterable\r\n                    size=\"mini\"\r\n                ></el-cascader>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"明细分类：\" prop=\"name\">\r\n                <el-radio-group v-model=\"formData.type3\">\r\n                    <el-radio disabled v-for=\"(item, index) in subClassifyOptions\" :label=\"item.id\" :key=\"index\">{{ item.name }}</el-radio>\r\n                </el-radio-group>\r\n            </el-form-item>\r\n\r\n            <el-row>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item label=\"具体需求描述：\">\r\n                        <el-input v-model=\"formData.demand\" disabled placeholder=\"请填写采购名称\" maxlength=\"50\" show-word-limit></el-input>\r\n                    </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item label=\"推荐厂家/联系方式：\">\r\n                        <el-input v-model=\"formData.factoryName\" disabled placeholder=\"请填写采购名称\" maxlength=\"50\" show-word-limit></el-input>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <el-row>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item label=\"推荐淘宝/京东链接：\"><el-input v-model=\"formData.buyUrl\" disabled placeholder=\"请输入链接\"></el-input></el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                    <el-row>\r\n                        <el-col :span=\"12\">\r\n                            <el-form-item label=\"需求数量：\"><el-input v-model.number=\"formData.num\" disabled placeholder=\"请输入数量\"></el-input></el-form-item>\r\n                        </el-col>\r\n                        <el-col :span=\"12\">\r\n                            <el-form-item label=\"单位：\"><el-input v-model=\"formData.unit\" disabled placeholder=\"请输入单位\"></el-input></el-form-item>\r\n                        </el-col>\r\n                    </el-row>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <el-row>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item label=\"型号参数：\"><el-input v-model=\"formData.model\" disabled placeholder=\"请填写采购名称\"></el-input></el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                    <el-row>\r\n                        <el-col :span=\"12\">\r\n                            <el-form-item label=\"预估单价：\"><el-input v-model.number=\"formData.priceYuan\" disabled placeholder=\"请输入单价\"></el-input></el-form-item>\r\n                        </el-col>\r\n                        <el-col :span=\"12\">\r\n                            <el-form-item label=\"预估总价：\"><el-input v-model.number=\"formData.guessPriceYuan\" disabled placeholder=\"请输入总价\"></el-input></el-form-item>\r\n                        </el-col>\r\n                    </el-row>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <el-form-item label=\"备注：\"><el-input type=\"textarea\" v-model=\"formData.remark\" disabled :rows=\"2\"></el-input></el-form-item>\r\n\r\n            <el-row>\r\n                <el-col :span=\"16\">\r\n                    <el-form-item label=\"收货信息：\"><el-input v-model=\"formData.contact\" disabled></el-input></el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"8\">\r\n                    <el-form-item label=\"预计到货时间：\">\r\n                        <el-date-picker\r\n                            disabled\r\n                            format=\"yyyy 年 MM 月 dd 日\"\r\n                            value-format=\"yyyy-MM-dd\"\r\n                            type=\"date\"\r\n                            v-model=\"formData.guessTime\"\r\n                            placeholder=\"选择日期\"\r\n                        ></el-date-picker>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <el-form-item label=\"审批人：\">\r\n                <div class=\"apply-user-list\" v-for=\"user in applyUserList\">\r\n                    <el-avatar :size=\"60\" :src=\"user.avatar\"></el-avatar>\r\n                    <span class=\"username\">{{ user.username }}</span>\r\n                </div>\r\n            </el-form-item>\r\n        </el-form>\r\n\r\n        <div style=\"border-bottom: 5px solid #777777;margin: 1.6rem 0;\"><span style=\"font-size: 1.2rem;color: #777777;\">采购执行</span></div>\r\n        <el-form ref=\"formData\" :model=\"formData\" :rules=\"rules\" class=\"form\" label-width=\"150px\">\r\n            <el-form-item label=\"是否对公：\" prop=\"isOpen\">\r\n                <el-radio-group v-model=\"formData.isOpen\" @change=\"isOpen\">\r\n                    <el-radio label=\"1\">是</el-radio>\r\n                    <el-radio label=\"2\">否</el-radio>\r\n                </el-radio-group>\r\n            </el-form-item>\r\n\r\n            <el-form-item v-if=\"formData.isOpen != 2\" label=\"公司名称：\" prop=\"companyName\"><el-input v-model=\"formData.companyName\" show-word-limit></el-input></el-form-item>\r\n\r\n            <el-form-item v-if=\"formData.isOpen != 2\" label=\"开户行名称：\" prop=\"bankName\"><el-input v-model=\"formData.bankName\" show-word-limit></el-input></el-form-item>\r\n\r\n            <el-form-item v-if=\"formData.isOpen != 2\" label=\"开户行账号：\" prop=\"bankAccount\"><el-input v-model=\"formData.bankAccount\" show-word-limit></el-input></el-form-item>\r\n\r\n            <el-row>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item label=\"采购进展：\" v-if=\"formData.isOpen == 1\">\r\n                        <el-select filterable placeholder=\"请选择\" v-model=\"formData.purchaseStatus\">\r\n                            <el-option v-for=\"item in userOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"采购进展：\" v-if=\"formData.isOpen == 2\">\r\n                        <el-select filterable placeholder=\"请选择\" v-model=\"formData.purchaseStatus\">\r\n                            <el-option v-for=\"item in userOptions2\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\" v-if=\"formData.isOpen != 2\">\r\n                    <el-form-item label=\"合同金额：\" prop=\"name\"><el-input show-word-limit v-model=\"formData.pactPriceYuan\"></el-input></el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <el-row>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item label=\"物流公司：\"><el-input show-word-limit v-model=\"formData.expressName\"></el-input></el-form-item>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item label=\"单号：\" prop=\"name\"><el-input show-word-limit v-model=\"formData.expressNum\"></el-input></el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <el-form-item label=\"合同附件图片：\" prop=\"invoiceImg\" v-if=\"formData.isOpen != 2\">\r\n                <el-upload\r\n                    class=\"upload-demo\"\r\n                    :action=\"uploadUrl\"\r\n                    name=\"file\"\r\n                    :on-preview=\"handlePreview2\"\r\n                    :on-remove=\"handleRemove2\"\r\n                    :on-success=\"handSuccess2\"\r\n                    :before-upload=\"beforeAvatarUpload\"\r\n                    :file-list=\"fileList2\"\r\n                    accept=\".png,.jpg,.jpeg,.JPEG,.PNG,.JPG\"\r\n                    list-type=\"picture\"\r\n                >\r\n                    <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n                    <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过5MB</div>\r\n                </el-upload>\r\n            </el-form-item>\r\n            <el-row>\r\n                <el-col :span=\"12\">\r\n                    <el-form-item label=\"发票进展：\">\r\n                        <el-select filterable placeholder=\"请选择\" v-model=\"formData.invoiceStatus\">\r\n                            <el-option v-for=\"item in invoice\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                </el-col>\r\n            </el-row>\r\n\r\n            <el-form-item v-if=\"formData.isOpen == 1\" label=\"支出状态：\">\r\n                <el-input v-model=\"formData.payStatus\" show-word-limit></el-input>\r\n                <el-button type=\"primary\" size=\"mini\" @click=\"goExpense\">去支出</el-button>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"实际支付金额：\" v-if=\"formData.isOpen == 2\"><el-input v-model=\"formData.relPriceYuan\" show-word-limit></el-input></el-form-item>\r\n            <el-form-item label=\"采购状态：\">\r\n                <el-radio-group v-model=\"formData.purchaseType\">\r\n                    <el-radio label=\"1\">进行中</el-radio>\r\n                    <el-radio label=\"2\">已完成</el-radio>\r\n                </el-radio-group>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"备注信息：\"><el-input type=\"textarea\" v-model=\"formData.performNote\" :rows=\"2\"></el-input></el-form-item>\r\n\r\n            <el-form-item v-if=\"formData.isOpen == 2\" label=\"报销状态：\">\r\n                <el-radio-group v-model=\"formData.applyId\">\r\n                    <el-radio label=\"1\">已报销</el-radio>\r\n                    <el-radio label=\"2\">未报销</el-radio>\r\n                    <el-button type=\"primary\" size=\"mini\" @click=\"$router.push({ path: `/apply/invoice/form` })\">去报销</el-button>\r\n                </el-radio-group>\r\n            </el-form-item>\r\n\r\n            <el-form-item style=\"text-align: center\" class=\"save\">\r\n                <el-button type=\"primary\" @click=\"onSubmit\" :loading=\"saving\">保存</el-button>\r\n                <el-button @click=\"backHistory\">取消</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getApplyUserInfo } from '../../../api/admin/user.js';\r\nimport { getPurchase, getPurchaseInfo, applyEditpurchaseEs } from '../../../api/purchase/purchase.js';\r\nimport { mapGetters } from 'vuex';\r\nexport default {\r\n    data() {\r\n        return {\r\n            query: {\r\n                companyId: null,\r\n                userId: null,\r\n                deptId: null,\r\n                itemId: null,\r\n                type: 6,\r\n                priceYuan: 0\r\n            },\r\n            formData: {\r\n                userId: null,\r\n                itemId: 0,\r\n                // 数据id\r\n                purchaseId: null,\r\n                // 采购名称\r\n                name: '',\r\n                // 详细分类\r\n                type1: '',\r\n                type2: '',\r\n                type3: '',\r\n                // 链接\r\n                buyUrl: '',\r\n                // 推荐厂家\r\n                factoryName: '',\r\n                // 型号参数\r\n                model: '',\r\n                // 数量\r\n                num: '',\r\n                // 单位\r\n                unit: '',\r\n                // 单价\r\n                price: '',\r\n                // 预估总价\r\n                guessPrice: '',\r\n                // 备注\r\n                remark: '',\r\n                // 预计到货时间\r\n                guessTime: '',\r\n                // 需求描述\r\n                demand: '',\r\n                // 型号参数图片\r\n                purchaseImg: '',\r\n                // 收货地址联系方式\r\n                contact: '',\r\n                // 其它参数\r\n                expressName: null,\r\n                expressNum: null,\r\n                isOpen: 1,\r\n                purchaseType: 1,\r\n                applyId: 1,\r\n                pactImg: null,\r\n                performNote: '',\r\n                pactPrice: null,\r\n                purchaseStatus: null,\r\n                payStatus: null,\r\n                invoiceStatus: null,\r\n                companyName: null,\r\n                bankName: null,\r\n                bankAccount: null,\r\n                guessPriceYuan: '',\r\n                priceYuan: '',\r\n                relPriceYuan: '',\r\n                pactPriceYuan: '',\n                aliasNext: '',\n                itemNextId: null\r\n            },\r\n\r\n            userOptions: [\r\n                {\r\n                    value: '合同谈判中',\r\n                    label: '合同谈判中'\r\n                },\r\n                {\r\n                    value: '合同已签订',\r\n                    label: '合同已签订'\r\n                },\r\n                {\r\n                    value: '已打全款',\r\n                    label: '已打全款'\r\n                },\r\n                {\r\n                    value: '已打首付款',\r\n                    label: '已打首付款'\r\n                },\r\n                {\r\n                    value: '已收货',\r\n                    label: '已收货'\r\n                }\r\n            ],\r\n            invoice: [\r\n                {\r\n                    value: '未取得',\r\n                    label: '未取得'\r\n                },\r\n                {\r\n                    value: '未报销',\r\n                    label: '未报销'\r\n                },\r\n                {\r\n                    value: '已取得未报销',\r\n                    label: '已取得未报销'\r\n                },\r\n                {\r\n                    value: '已取得已报销',\r\n                    label: '已取得已报销'\r\n                },\r\n                {\r\n                    value: '无发票',\r\n                    label: '无发票'\r\n                },\r\n                {\r\n                    value: '已找票',\r\n                    label: '已找票'\r\n                }\r\n            ],\r\n            userOptions2: [\r\n                {\r\n                    value: '已下单',\r\n                    label: '已下单'\r\n                },\r\n                {\r\n                    value: '已发货',\r\n                    label: '已发货'\r\n                },\r\n                {\r\n                    value: '已收货',\r\n                    label: '已收货'\r\n                },\r\n                {\r\n                    value: '已退货',\r\n                    label: '已退货'\r\n                },\r\n                {\r\n                    value: '已退款',\r\n                    label: '已退款'\r\n                }\r\n            ],\r\n\r\n            fileList2: [],\r\n            applyUserList: [],\r\n            sumClassifyOptions: [],\r\n            mainClassifyOptions: [],\r\n            subClassifyOptions: [],\r\n            purchaseId: null,\r\n            uploadUrl: '',\r\n            rules: {\r\n                isOpen: [{ required: true, message: '请选择对公状态', trigger: 'change' }],\r\n                companyName: [{ required: true, message: '请填写公司名称', trigger: 'change' }],\r\n                bankName: [{ required: true, message: '请填写开户行名称' }],\r\n                bankAccount: [{ required: true, message: '请填写开户行账号', trigger: 'change' }]\r\n            },\r\n            saving: false\r\n        };\r\n    },\r\n    created() {\r\n        // this.formData.userId = this.userId;\r\n        this.query.userId = this.userId;\r\n        this.getPurchase('100000', this.userId);\r\n        this.uploadUrl = `${window.location.origin}/apply/purchase/upload`;\r\n        this.purchaseId = this.$route.query.purchaseId;\r\n        this.getPurchaseInfo();\r\n    },\r\n    computed: {\r\n        ...mapGetters(['permissions', 'userId'])\r\n    },\r\n    methods: {\r\n        // 获取总类\r\n        getPurchase(id, userId) {\r\n            getPurchase(id, userId).then(res => {\r\n                this.sumClassifyOptions = res.data.data.purchaseType;\r\n            });\r\n        },\r\n\r\n        getPurchaseInfo() {\r\n            getPurchaseInfo(this.purchaseId).then(res => {\r\n                const editPurchaseInfo = res.data.data;\r\n                this.formData.name = editPurchaseInfo.name;\r\n                this.formData.buyUrl = editPurchaseInfo.buyUrl;\r\n                this.formData.itemId = editPurchaseInfo.itemId;\r\n                this.formData.aliasNext = editPurchaseInfo.aliasNext;\r\n                this.formData.itemNextId = editPurchaseInfo.itemNextId;\r\n                this.formData.purchaseId = editPurchaseInfo.purchaseId;\r\n\r\n                this.query.itemId = editPurchaseInfo.itemId;\r\n                this.formData.type1 = editPurchaseInfo.type1;\r\n                if (editPurchaseInfo.itemId != null && editPurchaseInfo.itemNextId == null) {\n                    this.formData.type2 = [editPurchaseInfo.type2, editPurchaseInfo.itemId];\n                } else if (editPurchaseInfo.itemNextId != null) {\n                    this.formData.type2 = [editPurchaseInfo.type2, editPurchaseInfo.itemNextId, editPurchaseInfo.itemId];\n                } else {\n                    this.formData.type2 = [editPurchaseInfo.type2];\n                }\r\n                this.formData.type3 = editPurchaseInfo.type3;\r\n                this.formData.factoryName = editPurchaseInfo.factoryName;\r\n                this.formData.model = editPurchaseInfo.model;\r\n                this.formData.demand = editPurchaseInfo.demand;\r\n                this.formData.num = editPurchaseInfo.num;\r\n                this.formData.unit = editPurchaseInfo.unit;\r\n                this.formData.priceYuan = editPurchaseInfo.priceYuan;\r\n                this.formData.pactPriceYuan = editPurchaseInfo.pactPriceYuan;\r\n                this.formData.guessPriceYuan = editPurchaseInfo.guessPriceYuan;\r\n                this.formData.remark = editPurchaseInfo.remark;\r\n                this.formData.purchaseImg = editPurchaseInfo.purchaseImg;\r\n                this.formData.contact = editPurchaseInfo.contact;\r\n                this.formData.guessTime = editPurchaseInfo.guessTime;\r\n                this.formData.expressName = editPurchaseInfo.expressName;\r\n                this.formData.expressNum = editPurchaseInfo.expressNum;\r\n                this.formData.isOpen = editPurchaseInfo.isOpen;\r\n                this.formData.purchaseType = editPurchaseInfo.purchaseType;\r\n                this.formData.applyId = editPurchaseInfo.applyId;\r\n                if (editPurchaseInfo.pactImg == null) {\r\n                    this.formData.pactImg = '';\r\n                } else {\r\n\t\t\t\t\tthis.formData.pactImg = editPurchaseInfo.pactImg;\r\n                    editPurchaseInfo.pactImg.split(',').forEach((item, index) => {\r\n                        if (item) {\r\n                            this.fileList2.push({\r\n                                url: `${window.location.origin}/apply/purchase/` + item\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n                this.formData.pactPrice = editPurchaseInfo.pactPrice * 0.01;\r\n                this.formData.purchaseStatus = editPurchaseInfo.purchaseStatus;\r\n                this.formData.performNote = editPurchaseInfo.performNote;\r\n                this.formData.payStatus = editPurchaseInfo.payStatus;\r\n                this.formData.invoiceStatus = editPurchaseInfo.invoiceStatus;\r\n                this.formData.companyName = editPurchaseInfo.companyName;\r\n                this.formData.bankName = editPurchaseInfo.bankName;\r\n                this.formData.bankAccount = editPurchaseInfo.bankAccount;\r\n                this.formData.relPriceYuan = editPurchaseInfo.relPriceYuan;\r\n                editPurchaseInfo.checkUserList.forEach(item => {\r\n                    this.applyUserList.push({\r\n                        userId: item.checkUserId,\r\n                        username: item.checkUserName,\r\n                        avatar: item.checkUserAvatar\r\n                    });\r\n                });\r\n\r\n                //console.log(editPurchaseInfo.invoiceImg)\r\n                getPurchase(this.formData.type1, this.userId).then(res => {\r\n                    res.data.data.purchaseType.forEach(item => {\r\n                        this.mainClassifyOptions.push({\r\n                            value: item.id,\r\n                            label: item.name,\r\n                            children: item.children\r\n                        });\r\n                    });\r\n                });\r\n                getPurchase(this.formData.type2[0], this.userId).then(res => {\r\n                    this.subClassifyOptions = res.data.data.purchaseType;\r\n                });\r\n            });\n            console.log(this.formData)\r\n        },\r\n\r\n        // 提交\r\n        onSubmit() {\r\n            this.formData.type2 = this.formData.type2[0];\r\n            console.log(this.formData);\r\n            this.$refs['formData'].validate(valid => {\r\n                if (valid) {\r\n                    this.saving = true;\r\n\r\n                    applyEditpurchaseEs(this.formData)\r\n                        .then(res => {\r\n                            console.log(res);\r\n                            this.backHistory();\r\n                        })\r\n                        .finally(() => {\r\n                            this.saving = false;\r\n                        });\r\n                }\r\n            });\r\n        },\r\n\r\n        handlePreview2(file) {\r\n            console.log(file);\r\n        },\r\n        handleRemove2(data) {\r\n            var serverUrl = `${window.location.origin}/apply/purchase/`;\r\n            const imgUrl = data.url.replace(serverUrl, '');\r\n            this.formData.pactImg = this.formData.pactImg.replace(imgUrl + ',', '');\r\n        },\r\n        handSuccess2(data) {\r\n            const imgInfo = data.data;\r\n            const imgUrl = imgInfo.bucketName + '-' + imgInfo.fileName;\r\n            this.formData.pactImg += imgUrl + ',';\r\n        },\r\n        beforeAvatarUpload: function(file) {\r\n            const isJPG = file.type === 'image/jpeg';\r\n            const isPNG = file.type === 'image/png';\r\n            const isPG = isJPG || isPNG; //限制图片格式为jpg / png\r\n            const isLt5M = file.size / 1024 / 1024 < 5; //限制图片大小\r\n            if (!isPG) {\r\n                this.$message.error('上传头像图片只能是 JPG 或 PNG 格式!');\r\n            }\r\n            if (!isLt5M) {\r\n                this.$message.error('上传头像图片大小不能超过 5MB!');\r\n            }\r\n            return isPG && isLt5M;\r\n        },\r\n\r\n        // 取消\r\n        backHistory() {\r\n            this.$router.go(-1);\r\n        },\r\n        goExpense() {\r\n            this.formData.type2 = this.formData.type2[0];\r\n            window.localStorage.setItem('editPurchaseInfo', JSON.stringify(this.formData));\r\n            this.$router.push({\r\n                path: '/apply/expense/form'\r\n            });\r\n        },\r\n\r\n        isOpen(val) {\r\n            if (val == 2) {\r\n                // console.log(132132132);\r\n\r\n                this.formData.companyName = '';\r\n                this.formData.bankName = '';\r\n                this.formData.bankAccount = '';\r\n                this.formData.pactPrice = '';\r\n                this.formData.pactImg = null;\r\n                this.formData.payStatus = '';\r\n                this.formData.purchaseStatus = '';\r\n            }\r\n            console.log(this.formData);\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style></style>\n"],"sourceRoot":"src/views/purchase/execute"}]}