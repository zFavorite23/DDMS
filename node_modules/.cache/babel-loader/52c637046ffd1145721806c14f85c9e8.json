{"remainingRequest":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js!D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\project\\Total.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\project\\Total.vue","mtime":1588235430075},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { adList, adSave, adDelete } from \"../../api/ad/ad\";\nimport Upload from \"../../components/File/Upload.vue\";\nvar formJson = {\n  ad_id: \"\",\n  title: \"\",\n  describe: \"\",\n  pic: \"\",\n  pic_url: \"\",\n  jump_type: \"\",\n  jump_url: \"\",\n  ios_url: \"\",\n  android_url: \"\",\n  wxa_appid: \"\",\n  channel_type: 0,\n  channel_list: [],\n  android_version_type: 0,\n  android_version_list: [],\n  ios_version_type: 0,\n  ios_version_list: [],\n  new_show_start_num: 0,\n  new_show_max_num: 0,\n  old_show_start_num: 0,\n  old_show_max_num: 0,\n  end_time: \"\",\n  event_name: \"\",\n  status: 1\n};\nexport default {\n  data: function data() {\n    return {\n      query: {\n        title: \"\",\n        page: 1,\n        limit: 20\n      },\n      channelListInput: \"\",\n      androidVersionListInput: \"\",\n      iosVersionListInput: \"\",\n      list: [],\n      total: 0,\n      loading: true,\n      index: null,\n      formName: null,\n      formMap: {\n        add: \"新增\",\n        edit: \"编辑\"\n      },\n      formLoading: false,\n      formVisible: false,\n      formData: formJson,\n      formRules: {\n        title: [{\n          required: true,\n          message: \"请输入广告标题\",\n          trigger: \"blur\"\n        }],\n        pic: [{\n          required: true,\n          message: \"请选择封面图片\",\n          trigger: \"change\"\n        }],\n        jump_type: [{\n          required: true,\n          message: \"请选择跳转方式\",\n          trigger: \"change\"\n        }],\n        jump_url: [{\n          required: true,\n          message: \"请输入跳转链接\",\n          trigger: \"blur\"\n        }],\n        android_url: [{\n          required: true,\n          message: \"请输入Android类名\",\n          trigger: \"blur\"\n        }],\n        ios_url: [{\n          required: true,\n          message: \"请输入IOS类名\",\n          trigger: \"blur\"\n        }],\n        wxa_appid: [{\n          required: true,\n          message: \"请输入小程序Appid\",\n          trigger: \"blur\"\n        }],\n        channel_list: [{\n          required: true,\n          message: \"请输入至少一个渠道名单\",\n          trigger: \"change\"\n        }],\n        android_version_list: [{\n          required: true,\n          message: \"请输入至少一个Android版本名单\",\n          trigger: \"change\"\n        }],\n        ios_version_list: [{\n          required: true,\n          message: \"请输入至少一个iOS版本名单\",\n          trigger: \"change\"\n        }],\n        status: [{\n          required: true,\n          message: \"请选择状态\",\n          trigger: \"change\"\n        }]\n      },\n      deleteLoading: false\n    };\n  },\n  components: {\n    Upload: Upload\n  },\n  methods: {\n    onReset: function onReset() {\n      this.$router.push({\n        path: \"\"\n      });\n      this.query = {\n        title: \"\",\n        page: 1,\n        limit: 20\n      };\n      this.getList();\n    },\n    onSubmit: function onSubmit() {\n      this.$router.push({\n        path: \"\",\n        query: this.query\n      });\n      this.getList();\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.query.limit = val;\n      this.getList();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.query.page = val;\n      this.getList();\n    },\n    getList: function getList() {\n      var _this = this;\n\n      this.loading = true;\n      adList(this.query).then(function (response) {\n        _this.loading = false;\n        _this.list = response.data.List || [];\n        _this.total = response.data.total || 0;\n      }).catch(function () {\n        _this.loading = false;\n        _this.list = [];\n        _this.total = 0;\n      });\n    },\n    // 删除渠道\n    handleChannelListClose: function handleChannelListClose(index) {\n      console.log(index); // 更改值\n\n      this.formData.channel_list.splice(index, 1);\n    },\n    // 添加渠道白名单\n    handleChannelListSubmit: function handleChannelListSubmit() {\n      // 更改值\n      if (this.channelListInput && this.formData.channel_list.length < 15) {\n        var arr = this.channelListInput.split(\",\");\n\n        for (var i in arr) {\n          if (arr[i] !== \"\" && (this.formData.channel_list.length === 0 || this.formData.channel_list.indexOf(arr[i]) < 0)) {\n            this.formData.channel_list.push(arr[i]);\n          }\n        }\n\n        this.channelListInput = \"\";\n        this.$refs.channelListRef.focus();\n      }\n    },\n    // 删除Android版本\n    handleAndroidVersionListClose: function handleAndroidVersionListClose(index) {\n      // 更改值\n      this.formData.android_version_list.splice(index, 1);\n    },\n    // 添加Android版本\n    handleAndroidVersionListSubmit: function handleAndroidVersionListSubmit() {\n      // 更改值\n      if (this.androidVersionListInput && this.formData.android_version_list.length < 15) {\n        var arr = this.androidVersionListInput.split(\",\");\n\n        for (var i in arr) {\n          var avList = this.formData.android_version_list;\n\n          if (arr[i] !== \"\" && (avList.length === 0 || avList.indexOf(arr[i]) < 0)) {\n            this.formData.android_version_list.push(arr[i]);\n          }\n        }\n\n        this.androidVersionListInput = \"\";\n        this.$refs.androidVersionListRef.focus();\n      }\n    },\n    // 删除Ios版本\n    handleIosVersionListClose: function handleIosVersionListClose(index) {\n      // 更改值\n      this.formData.ios_version_list.splice(index, 1);\n    },\n    // 添加Ios版本\n    handleIosVersionListSubmit: function handleIosVersionListSubmit() {\n      // 更改值\n      if (this.iosVersionListInput && this.formData.ios_version_list.length < 15) {\n        var arr = this.iosVersionListInput.split(\",\");\n\n        for (var i in arr) {\n          if (arr[i] !== \"\" && (this.formData.ios_version_list.length === 0 || this.formData.ios_version_list.indexOf(arr[i]) < 0)) {\n            this.formData.ios_version_list.push(arr[i]);\n          }\n        }\n\n        this.iosVersionListInput = \"\";\n        this.$refs.iosVersionListRef.focus();\n      }\n    },\n    // 刷新表单\n    resetForm: function resetForm() {\n      if (this.$refs[\"dataForm\"]) {\n        // 清空字段\n        this.$refs[\"dataForm\"].resetFields(); // 清空验证信息表单\n\n        this.$refs[\"dataForm\"].clearValidate();\n      }\n    },\n    // 隐藏表单\n    hideForm: function hideForm() {\n      // 更改值\n      this.formVisible = !this.formVisible;\n      return true;\n    },\n    // 显示表单\n    handleForm: function handleForm(index, row) {\n      this.formVisible = true; // 刷新表单\n\n      this.resetForm();\n      this.formData = JSON.parse(JSON.stringify(formJson));\n\n      if (row !== null) {\n        this.formData = Object.assign({}, row);\n      }\n\n      this.formName = \"add\";\n\n      if (index !== null) {\n        this.index = index;\n        this.formName = \"edit\";\n      }\n    },\n    formSubmit: function formSubmit() {\n      var _this2 = this;\n\n      this.$refs[\"dataForm\"].validate(function (valid) {\n        if (valid) {\n          _this2.formLoading = true;\n          var data = Object.assign({}, _this2.formData);\n          adSave(data, _this2.formName).then(function (response) {\n            _this2.formLoading = false;\n\n            if (response.code) {\n              _this2.$message.error(response.message);\n\n              return false;\n            }\n\n            _this2.$message.success(\"操作成功\");\n\n            _this2.formVisible = false;\n\n            if (_this2.formName === \"add\") {\n              // 向头部添加数据\n              data.ad_id = response.data.ad_id;\n\n              _this2.list.unshift(data);\n            } else {\n              _this2.list.splice(_this2.index, 1, data);\n            }\n          }).catch(function () {\n            _this2.formLoading = false;\n          });\n        }\n      });\n    },\n    // 删除\n    handleDel: function handleDel(index, row) {\n      var _this3 = this;\n\n      if (row.ad_id) {\n        this.$confirm(\"确认删除该记录吗?\", \"提示\", {\n          type: \"warning\"\n        }).then(function () {\n          var para = {\n            ad_id: row.ad_id\n          };\n          _this3.deleteLoading = true;\n          adDelete(para).then(function (response) {\n            _this3.deleteLoading = false;\n\n            if (response.code) {\n              _this3.$message.error(response.message);\n\n              return false;\n            }\n\n            _this3.$message(\"删除成功\"); // 刷新数据\n\n\n            _this3.list.splice(index, 1);\n          }).catch(function () {\n            _this3.deleteLoading = false;\n          });\n        }).catch(function () {\n          _this3.$message.info(\"取消删除\");\n        });\n      }\n    },\n    onSelectPic: function onSelectPic(filePath, filePathUrl) {\n      this.formData.pic = filePath;\n      this.formData.pic_url = filePathUrl;\n    }\n  },\n  filters: {\n    statusFilterType: function statusFilterType(status) {\n      var statusMap = {\n        0: \"gray\",\n        1: \"success\"\n      };\n      return statusMap[status];\n    },\n    statusFilterName: function statusFilterName(status) {\n      var statusMap = {\n        0: \"禁用\",\n        1: \"正常\"\n      };\n      return statusMap[status];\n    }\n  },\n  mounted: function mounted() {},\n  created: function created() {\n    // 将参数拷贝进查询对象\n    var query = this.$route.query;\n    this.query = Object.assign(this.query, query);\n    this.query.limit = parseInt(this.query.limit); // 加载表格数据\n\n    this.getList();\n  }\n};",{"version":3,"sources":["Total.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <el-form :inline=\"true\" :model=\"query\" class=\"query-form\" size=\"mini\">\r\n            <el-form-item class=\"query-form-item\">\r\n                <el-input\r\n                    v-model=\"query.title\"\r\n                    placeholder=\"广告标题\"\r\n                ></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button-group>\r\n                    <el-button\r\n                        type=\"primary\"\r\n                        icon=\"el-icon-refresh\"\r\n                        @click=\"getList\"\r\n                    ></el-button>\r\n                    <el-button type=\"primary\" icon=\"search\" @click=\"onSubmit\"\r\n                        >查询</el-button\r\n                    >\r\n                    <el-button\r\n                        type=\"primary\"\r\n                        @click.native=\"handleForm(null, null)\"\r\n                        >新增</el-button\r\n                    >\r\n                </el-button-group>\r\n            </el-form-item>\r\n        </el-form>\r\n        <el-table v-loading=\"loading\" :data=\"list\" style=\"width: 100%;\">\r\n            <el-table-column label=\"ID\" prop=\"ad_id\" fixed> </el-table-column>\r\n            <el-table-column\r\n                label=\"标题\"\r\n                prop=\"title\"\r\n                with=\"300\"\r\n                :show-overflow-tooltip=\"true\"\r\n                fixed\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n                label=\"描述\"\r\n                prop=\"describe\"\r\n                with=\"300\"\r\n                :show-overflow-tooltip=\"true\"\r\n            >\r\n            </el-table-column>\r\n            <el-table-column label=\"封面\" prop=\"pic_url\">\r\n                <template slot-scope=\"scope\">\r\n                    <img\r\n                        style=\"max-width: 200px;max-height: 150px;\"\r\n                        :src=\"scope.row.pic_url\"\r\n                    />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"状态\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-tag :type=\"scope.row.status | statusFilterType\">{{\r\n                        scope.row.status | statusFilterName\r\n                    }}</el-tag>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" fixed=\"right\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button\r\n                        type=\"text\"\r\n                        size=\"small\"\r\n                        @click.native=\"handleForm(scope.$index, scope.row)\"\r\n                        >编辑</el-button\r\n                    >\r\n                    <el-button\r\n                        type=\"text\"\r\n                        size=\"small\"\r\n                        @click.native=\"handleDel(scope.$index, scope.row)\"\r\n                        >删除</el-button\r\n                    >\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <el-pagination\r\n            :page-size=\"query.limit\"\r\n            @current-change=\"handleCurrentChange\"\r\n            layout=\"prev, pager, next\"\r\n            :total=\"total\"\r\n        >\r\n        </el-pagination>\r\n\r\n        <!--表单-->\r\n        <el-dialog\r\n            :title=\"formMap[formName]\"\r\n            :visible.sync=\"formVisible\"\r\n            :before-close=\"hideForm\"\r\n            width=\"85%\"\r\n            top=\"5vh\"\r\n        >\r\n            <el-form :model=\"formData\" :rules=\"formRules\" ref=\"dataForm\">\r\n                <el-form-item label=\"标题\" prop=\"title\">\r\n                    <el-input\r\n                        v-model=\"formData.title\"\r\n                        auto-complete=\"off\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"封面图片（上传或填写网络地址）\" prop=\"pic\">\r\n                    <div>\r\n                        <el-input\r\n                            size=\"small\"\r\n                            v-model=\"formData.pic\"\r\n                            auto-complete=\"off\"\r\n                            placeholder=\"图片路径\"\r\n                        ></el-input>\r\n\r\n                        <upload\r\n                            ext=\"jpg,png,jpeg\"\r\n                            :size=\"716800\"\r\n                            @on-select=\"onSelectPic\"\r\n                        ></upload>\r\n                    </div>\r\n                    <div class=\"upload-img\" v-if=\"formData.pic_url\">\r\n                        <img\r\n                            :src=\"formData.pic_url\"\r\n                            style=\"max-width: 200px;max-height: 200px;\"\r\n                        />\r\n                    </div>\r\n                </el-form-item>\r\n                <el-form-item label=\"描述\" prop=\"describe\">\r\n                    <el-input\r\n                        v-model=\"formData.describe\"\r\n                        auto-complete=\"off\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"跳转方式\" prop=\"jump_type\">\r\n                    <el-radio-group v-model=\"formData.jump_type\">\r\n                        <el-radio :label=\"0\">web 网页</el-radio>\r\n                        <el-radio :label=\"1\">APP内跳转</el-radio>\r\n                        <el-radio :label=\"2\">小程序跳转</el-radio>\r\n                    </el-radio-group>\r\n                </el-form-item>\r\n\r\n                <el-form-item\r\n                    label=\"URL链接（web网页和小程序时）\"\r\n                    prop=\"jump_url\"\r\n                    v-if=\"formData.jump_type === 0 || formData.jump_type === 2\"\r\n                >\r\n                    <el-input\r\n                        v-model=\"formData.jump_url\"\r\n                        auto-complete=\"off\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item\r\n                    label=\"IOS 类名（APP内跳转时）\"\r\n                    prop=\"ios_url\"\r\n                    v-if=\"formData.jump_type === 1\"\r\n                >\r\n                    <el-input\r\n                        v-model=\"formData.ios_url\"\r\n                        auto-complete=\"off\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item\r\n                    label=\"Android 类名（APP内跳转时）\"\r\n                    prop=\"android_url\"\r\n                    v-if=\"formData.jump_type === 1\"\r\n                >\r\n                    <el-input\r\n                        v-model=\"formData.android_url\"\r\n                        auto-complete=\"off\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item\r\n                    label=\"小程序的 appid（小程序跳转时）\"\r\n                    prop=\"wxa_appid\"\r\n                    v-if=\"formData.jump_type === 2\"\r\n                >\r\n                    <el-input\r\n                        v-model=\"formData.wxa_appid\"\r\n                        auto-complete=\"off\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"开始时间\">\r\n                    <el-form-item\r\n                        prop=\"start_time\"\r\n                        style=\"display: inline-block;\"\r\n                    >\r\n                        <el-date-picker\r\n                            v-model=\"formData.start_time\"\r\n                            type=\"datetime\"\r\n                            size=\"mini\"\r\n                            placeholder=\"开始时间（默认不限制）\"\r\n                        >\r\n                        </el-date-picker>\r\n                    </el-form-item>\r\n                    -\r\n                    <el-form-item\r\n                        prop=\"end_time\"\r\n                        style=\"display: inline-block;\"\r\n                    >\r\n                        <el-date-picker\r\n                            v-model=\"formData.end_time\"\r\n                            type=\"datetime\"\r\n                            size=\"mini\"\r\n                            placeholder=\"结束时间（默认不限制）\"\r\n                        >\r\n                        </el-date-picker>\r\n                    </el-form-item>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"统计事件的名称\" prop=\"event_name\">\r\n                    <el-input\r\n                        v-model=\"formData.event_name\"\r\n                        auto-complete=\"off\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"状态\" prop=\"status\">\r\n                    <el-radio-group v-model=\"formData.status\">\r\n                        <el-radio :label=\"0\">禁用</el-radio>\r\n                        <el-radio :label=\"1\">正常</el-radio>\r\n                    </el-radio-group>\r\n                </el-form-item>\r\n\r\n                <el-form-item>\r\n                    <el-button\r\n                        style=\"float: right;\"\r\n                        type=\"primary\"\r\n                        @click.native=\"formSubmit()\"\r\n                        :loading=\"formLoading\"\r\n                        >提前提交</el-button\r\n                    >\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"新用户展示逻辑\">\r\n                    <div class=\"remove-list-box\">\r\n                        第几次展示\r\n                        <el-form-item\r\n                            prop=\"new_show_start_num\"\r\n                            style=\"display: inline-block;\"\r\n                        >\r\n                            <el-input-number\r\n                                v-model=\"formData.new_show_start_num\"\r\n                                :min=\"0\"\r\n                                controls-position=\"right\"\r\n                                size=\"mini\"\r\n                                label=\"第几次展示\"\r\n                            >\r\n                            </el-input-number>\r\n                        </el-form-item>\r\n                        - 展示最大次数\r\n                        <el-form-item\r\n                            prop=\"new_show_max_num\"\r\n                            style=\"display: inline-block;\"\r\n                        >\r\n                            <el-input-number\r\n                                v-model=\"formData.new_show_max_num\"\r\n                                :min=\"0\"\r\n                                controls-position=\"right\"\r\n                                size=\"mini\"\r\n                                label=\"展示最大次数\"\r\n                            >\r\n                            </el-input-number>\r\n                        </el-form-item>\r\n                    </div>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"老用户展示逻辑\">\r\n                    <div class=\"remove-list-box\">\r\n                        第几次展示\r\n                        <el-form-item\r\n                            prop=\"old_show_start_num\"\r\n                            style=\"display: inline-block;\"\r\n                        >\r\n                            <el-input-number\r\n                                v-model=\"formData.old_show_start_num\"\r\n                                :min=\"0\"\r\n                                controls-position=\"right\"\r\n                                size=\"mini\"\r\n                                label=\"第几次展示\"\r\n                            >\r\n                            </el-input-number>\r\n                        </el-form-item>\r\n                        - 展示最大次数\r\n                        <el-form-item\r\n                            prop=\"old_show_max_num\"\r\n                            style=\"display: inline-block;\"\r\n                        >\r\n                            <el-input-number\r\n                                v-model=\"formData.old_show_max_num\"\r\n                                :min=\"0\"\r\n                                controls-position=\"right\"\r\n                                size=\"mini\"\r\n                                label=\"展示最大次数\"\r\n                            >\r\n                            </el-input-number>\r\n                        </el-form-item>\r\n                    </div>\r\n                </el-form-item>\r\n\r\n                <el-form-item>\r\n                    <span style=\"color:red;\"\r\n                        >以下内容（注意：不要输入空格和逗号，批量添加以英文逗号隔开）黑白名单用来控制屏蔽或者显示</span\r\n                    >\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"渠道名单\" required>\r\n                    <el-form-item prop=\"channel_type\">\r\n                        <el-radio-group v-model=\"formData.channel_type\">\r\n                            <el-radio :label=\"0\">不限制</el-radio>\r\n                            <el-radio :label=\"1\">白名单</el-radio>\r\n                            <el-radio :label=\"2\">黑名单</el-radio>\r\n                        </el-radio-group>\r\n                    </el-form-item>\r\n                    <el-form-item\r\n                        prop=\"channel_list\"\r\n                        v-if=\"formData.channel_type !== 0\"\r\n                    >\r\n                        <div class=\"remove-list-box\">\r\n                            <div class=\"remove-list\">\r\n                                <div\r\n                                    class=\"remove-list-item\"\r\n                                    v-for=\"(item,\r\n                                    index) in formData.channel_list\"\r\n                                    :key=\"index\"\r\n                                >\r\n                                    {{ item }}\r\n                                    <i\r\n                                        class=\"el-icon-close remove-list-close\"\r\n                                        @click=\"handleChannelListClose(index)\"\r\n                                    ></i>\r\n                                </div>\r\n                            </div>\r\n                            <div\r\n                                v-show=\"formData.channel_list.length >= 15\"\r\n                                style=\"color: red;\"\r\n                            >\r\n                                到达最大次数，最大15个\r\n                            </div>\r\n                            <el-input\r\n                                size=\"mini\"\r\n                                v-model=\"channelListInput\"\r\n                                placeholder=\"输入渠道版本插入\"\r\n                                style=\"width: 190px;\"\r\n                                ref=\"channelListRef\"\r\n                                @keyup.enter.native=\"handleChannelListSubmit\"\r\n                                maxlength=\"12\"\r\n                            >\r\n                            </el-input>\r\n                            <el-button\r\n                                type=\"primary\"\r\n                                size=\"mini\"\r\n                                @click.native=\"handleChannelListSubmit()\"\r\n                                style=\"margin-left: 5px;\"\r\n                                >插入</el-button\r\n                            >\r\n                        </div>\r\n                    </el-form-item>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"Android版本名单\" required>\r\n                    <el-form-item prop=\"android_version_type\">\r\n                        <el-radio-group v-model=\"formData.android_version_type\">\r\n                            <el-radio :label=\"0\">不限制</el-radio>\r\n                            <el-radio :label=\"1\">白名单</el-radio>\r\n                            <el-radio :label=\"2\">黑名单</el-radio>\r\n                        </el-radio-group>\r\n                    </el-form-item>\r\n                    <el-form-item\r\n                        prop=\"android_version_list\"\r\n                        v-if=\"formData.android_version_type !== 0\"\r\n                    >\r\n                        <div class=\"remove-list-box\">\r\n                            <div class=\"remove-list\">\r\n                                <div\r\n                                    class=\"remove-list-item\"\r\n                                    v-for=\"(item,\r\n                                    index) in formData.android_version_list\"\r\n                                    :key=\"index\"\r\n                                >\r\n                                    {{ item }}\r\n                                    <i\r\n                                        class=\"el-icon-close remove-list-close\"\r\n                                        @click=\"\r\n                                            handleAndroidVersionListClose(index)\r\n                                        \"\r\n                                    ></i>\r\n                                </div>\r\n                            </div>\r\n                            <div\r\n                                v-show=\"\r\n                                    formData.android_version_list.length >= 15\r\n                                \"\r\n                                style=\"color: red;\"\r\n                            >\r\n                                到达最大次数，最大15个\r\n                            </div>\r\n                            <el-input\r\n                                size=\"mini\"\r\n                                v-model=\"androidVersionListInput\"\r\n                                placeholder=\"输入Android版本插入\"\r\n                                style=\"width: 190px;\"\r\n                                ref=\"androidVersionListRef\"\r\n                                @keyup.enter.native=\"\r\n                                    handleAndroidVersionListSubmit\r\n                                \"\r\n                                maxlength=\"12\"\r\n                            >\r\n                            </el-input>\r\n                            <el-button\r\n                                type=\"primary\"\r\n                                size=\"mini\"\r\n                                @click.native=\"handleAndroidVersionListSubmit()\"\r\n                                style=\"margin-left: 5px;\"\r\n                                >插入</el-button\r\n                            >\r\n                        </div>\r\n                    </el-form-item>\r\n                </el-form-item>\r\n\r\n                <el-form-item label=\"iOS版本名单\" required>\r\n                    <el-form-item prop=\"ios_version_type\">\r\n                        <el-radio-group v-model=\"formData.ios_version_type\">\r\n                            <el-radio :label=\"0\">不限制</el-radio>\r\n                            <el-radio :label=\"1\">白名单</el-radio>\r\n                            <el-radio :label=\"2\">黑名单</el-radio>\r\n                        </el-radio-group>\r\n                    </el-form-item>\r\n                    <el-form-item\r\n                        prop=\"ios_version_list\"\r\n                        v-if=\"formData.ios_version_type !== 0\"\r\n                    >\r\n                        <div class=\"remove-list-box\">\r\n                            <div class=\"remove-list\">\r\n                                <div\r\n                                    class=\"remove-list-item\"\r\n                                    v-for=\"(item,\r\n                                    index) in formData.ios_version_list\"\r\n                                    :key=\"index\"\r\n                                >\r\n                                    {{ item }}\r\n                                    <i\r\n                                        class=\"el-icon-close remove-list-close\"\r\n                                        @click=\"\r\n                                            handleIosVersionListClose(index)\r\n                                        \"\r\n                                    ></i>\r\n                                </div>\r\n                            </div>\r\n                            <div\r\n                                v-show=\"formData.ios_version_list.length >= 15\"\r\n                                style=\"color: red;\"\r\n                            >\r\n                                到达最大次数，最大15个\r\n                            </div>\r\n                            <el-input\r\n                                size=\"mini\"\r\n                                v-model=\"iosVersionListInput\"\r\n                                placeholder=\"输入iOS版本插入\"\r\n                                style=\"width: 190px;\"\r\n                                ref=\"iosVersionListRef\"\r\n                                @keyup.enter.native=\"handleIosVersionListSubmit\"\r\n                                maxlength=\"12\"\r\n                            >\r\n                            </el-input>\r\n                            <el-button\r\n                                type=\"primary\"\r\n                                size=\"mini\"\r\n                                @click.native=\"handleIosVersionListSubmit()\"\r\n                                style=\"margin-left: 5px;\"\r\n                                >插入</el-button\r\n                            >\r\n                        </div>\r\n                    </el-form-item>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click.native=\"hideForm\">取消</el-button>\r\n                <el-button\r\n                    type=\"primary\"\r\n                    @click.native=\"formSubmit()\"\r\n                    :loading=\"formLoading\"\r\n                    >提交</el-button\r\n                >\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { adList, adSave, adDelete } from \"../../api/ad/ad\";\r\nimport Upload from \"../../components/File/Upload.vue\";\r\nconst formJson = {\r\n    ad_id: \"\",\r\n    title: \"\",\r\n    describe: \"\",\r\n    pic: \"\",\r\n    pic_url: \"\",\r\n    jump_type: \"\",\r\n    jump_url: \"\",\r\n    ios_url: \"\",\r\n    android_url: \"\",\r\n    wxa_appid: \"\",\r\n    channel_type: 0,\r\n    channel_list: [],\r\n    android_version_type: 0,\r\n    android_version_list: [],\r\n    ios_version_type: 0,\r\n    ios_version_list: [],\r\n    new_show_start_num: 0,\r\n    new_show_max_num: 0,\r\n    old_show_start_num: 0,\r\n    old_show_max_num: 0,\r\n    end_time: \"\",\r\n    event_name: \"\",\r\n    status: 1\r\n};\r\nexport default {\r\n    data() {\r\n        return {\r\n            query: {\r\n                title: \"\",\r\n                page: 1,\r\n                limit: 20\r\n            },\r\n            channelListInput: \"\",\r\n            androidVersionListInput: \"\",\r\n            iosVersionListInput: \"\",\r\n            list: [],\r\n            total: 0,\r\n            loading: true,\r\n            index: null,\r\n            formName: null,\r\n            formMap: {\r\n                add: \"新增\",\r\n                edit: \"编辑\"\r\n            },\r\n            formLoading: false,\r\n            formVisible: false,\r\n            formData: formJson,\r\n            formRules: {\r\n                title: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入广告标题\",\r\n                        trigger: \"blur\"\r\n                    }\r\n                ],\r\n                pic: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请选择封面图片\",\r\n                        trigger: \"change\"\r\n                    }\r\n                ],\r\n                jump_type: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请选择跳转方式\",\r\n                        trigger: \"change\"\r\n                    }\r\n                ],\r\n                jump_url: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入跳转链接\",\r\n                        trigger: \"blur\"\r\n                    }\r\n                ],\r\n                android_url: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入Android类名\",\r\n                        trigger: \"blur\"\r\n                    }\r\n                ],\r\n                ios_url: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入IOS类名\",\r\n                        trigger: \"blur\"\r\n                    }\r\n                ],\r\n                wxa_appid: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入小程序Appid\",\r\n                        trigger: \"blur\"\r\n                    }\r\n                ],\r\n                channel_list: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入至少一个渠道名单\",\r\n                        trigger: \"change\"\r\n                    }\r\n                ],\r\n                android_version_list: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入至少一个Android版本名单\",\r\n                        trigger: \"change\"\r\n                    }\r\n                ],\r\n                ios_version_list: [\r\n                    {\r\n                        required: true,\r\n                        message: \"请输入至少一个iOS版本名单\",\r\n                        trigger: \"change\"\r\n                    }\r\n                ],\r\n                status: [\r\n                    { required: true, message: \"请选择状态\", trigger: \"change\" }\r\n                ]\r\n            },\r\n            deleteLoading: false\r\n        };\r\n    },\r\n    components: {\r\n        Upload\r\n    },\r\n    methods: {\r\n        onReset() {\r\n            this.$router.push({\r\n                path: \"\"\r\n            });\r\n            this.query = {\r\n                title: \"\",\r\n                page: 1,\r\n                limit: 20\r\n            };\r\n            this.getList();\r\n        },\r\n        onSubmit() {\r\n            this.$router.push({\r\n                path: \"\",\r\n                query: this.query\r\n            });\r\n            this.getList();\r\n        },\r\n        handleSizeChange(val) {\r\n            this.query.limit = val;\r\n            this.getList();\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.query.page = val;\r\n            this.getList();\r\n        },\r\n        getList() {\r\n            this.loading = true;\r\n            adList(this.query)\r\n                .then(response => {\r\n                    this.loading = false;\r\n                    this.list = response.data.List || [];\r\n                    this.total = response.data.total || 0;\r\n                })\r\n                .catch(() => {\r\n                    this.loading = false;\r\n                    this.list = [];\r\n                    this.total = 0;\r\n                });\r\n        },\r\n        // 删除渠道\r\n        handleChannelListClose(index) {\r\n            console.log(index);\r\n            // 更改值\r\n            this.formData.channel_list.splice(index, 1);\r\n        },\r\n        // 添加渠道白名单\r\n        handleChannelListSubmit() {\r\n            // 更改值\r\n            if (\r\n                this.channelListInput &&\r\n                this.formData.channel_list.length < 15\r\n            ) {\r\n                let arr = this.channelListInput.split(\",\");\r\n                for (let i in arr) {\r\n                    if (\r\n                        arr[i] !== \"\" &&\r\n                        (this.formData.channel_list.length === 0 ||\r\n                            this.formData.channel_list.indexOf(arr[i]) < 0)\r\n                    ) {\r\n                        this.formData.channel_list.push(arr[i]);\r\n                    }\r\n                }\r\n                this.channelListInput = \"\";\r\n                this.$refs.channelListRef.focus();\r\n            }\r\n        },\r\n        // 删除Android版本\r\n        handleAndroidVersionListClose(index) {\r\n            // 更改值\r\n            this.formData.android_version_list.splice(index, 1);\r\n        },\r\n        // 添加Android版本\r\n        handleAndroidVersionListSubmit() {\r\n            // 更改值\r\n            if (\r\n                this.androidVersionListInput &&\r\n                this.formData.android_version_list.length < 15\r\n            ) {\r\n                let arr = this.androidVersionListInput.split(\",\");\r\n                for (let i in arr) {\r\n                    let avList = this.formData.android_version_list;\r\n                    if (\r\n                        arr[i] !== \"\" &&\r\n                        (avList.length === 0 || avList.indexOf(arr[i]) < 0)\r\n                    ) {\r\n                        this.formData.android_version_list.push(arr[i]);\r\n                    }\r\n                }\r\n                this.androidVersionListInput = \"\";\r\n                this.$refs.androidVersionListRef.focus();\r\n            }\r\n        },\r\n        // 删除Ios版本\r\n        handleIosVersionListClose(index) {\r\n            // 更改值\r\n            this.formData.ios_version_list.splice(index, 1);\r\n        },\r\n        // 添加Ios版本\r\n        handleIosVersionListSubmit() {\r\n            // 更改值\r\n            if (\r\n                this.iosVersionListInput &&\r\n                this.formData.ios_version_list.length < 15\r\n            ) {\r\n                let arr = this.iosVersionListInput.split(\",\");\r\n                for (let i in arr) {\r\n                    if (\r\n                        arr[i] !== \"\" &&\r\n                        (this.formData.ios_version_list.length === 0 ||\r\n                            this.formData.ios_version_list.indexOf(arr[i]) < 0)\r\n                    ) {\r\n                        this.formData.ios_version_list.push(arr[i]);\r\n                    }\r\n                }\r\n                this.iosVersionListInput = \"\";\r\n                this.$refs.iosVersionListRef.focus();\r\n            }\r\n        },\r\n        // 刷新表单\r\n        resetForm() {\r\n            if (this.$refs[\"dataForm\"]) {\r\n                // 清空字段\r\n                this.$refs[\"dataForm\"].resetFields();\r\n                // 清空验证信息表单\r\n                this.$refs[\"dataForm\"].clearValidate();\r\n            }\r\n        },\r\n        // 隐藏表单\r\n        hideForm() {\r\n            // 更改值\r\n            this.formVisible = !this.formVisible;\r\n            return true;\r\n        },\r\n        // 显示表单\r\n        handleForm(index, row) {\r\n            this.formVisible = true;\r\n            // 刷新表单\r\n            this.resetForm();\r\n            this.formData = JSON.parse(JSON.stringify(formJson));\r\n            if (row !== null) {\r\n                this.formData = Object.assign({}, row);\r\n            }\r\n            this.formName = \"add\";\r\n            if (index !== null) {\r\n                this.index = index;\r\n                this.formName = \"edit\";\r\n            }\r\n        },\r\n        formSubmit() {\r\n            this.$refs[\"dataForm\"].validate(valid => {\r\n                if (valid) {\r\n                    this.formLoading = true;\r\n                    let data = Object.assign({}, this.formData);\r\n                    adSave(data, this.formName)\r\n                        .then(response => {\r\n                            this.formLoading = false;\r\n                            if (response.code) {\r\n                                this.$message.error(response.message);\r\n                                return false;\r\n                            }\r\n                            this.$message.success(\"操作成功\");\r\n                            this.formVisible = false;\r\n                            if (this.formName === \"add\") {\r\n                                // 向头部添加数据\r\n                                data.ad_id = response.data.ad_id;\r\n                                this.list.unshift(data);\r\n                            } else {\r\n                                this.list.splice(this.index, 1, data);\r\n                            }\r\n                        })\r\n                        .catch(() => {\r\n                            this.formLoading = false;\r\n                        });\r\n                }\r\n            });\r\n        },\r\n        // 删除\r\n        handleDel(index, row) {\r\n            if (row.ad_id) {\r\n                this.$confirm(\"确认删除该记录吗?\", \"提示\", {\r\n                    type: \"warning\"\r\n                })\r\n                    .then(() => {\r\n                        let para = { ad_id: row.ad_id };\r\n                        this.deleteLoading = true;\r\n                        adDelete(para)\r\n                            .then(response => {\r\n                                this.deleteLoading = false;\r\n                                if (response.code) {\r\n                                    this.$message.error(response.message);\r\n                                    return false;\r\n                                }\r\n                                this.$message(\"删除成功\");\r\n                                // 刷新数据\r\n                                this.list.splice(index, 1);\r\n                            })\r\n                            .catch(() => {\r\n                                this.deleteLoading = false;\r\n                            });\r\n                    })\r\n                    .catch(() => {\r\n                        this.$message.info(\"取消删除\");\r\n                    });\r\n            }\r\n        },\r\n        onSelectPic(filePath, filePathUrl) {\r\n            this.formData.pic = filePath;\r\n            this.formData.pic_url = filePathUrl;\r\n        }\r\n    },\r\n    filters: {\r\n        statusFilterType(status) {\r\n            const statusMap = {\r\n                0: \"gray\",\r\n                1: \"success\"\r\n            };\r\n            return statusMap[status];\r\n        },\r\n        statusFilterName(status) {\r\n            const statusMap = {\r\n                0: \"禁用\",\r\n                1: \"正常\"\r\n            };\r\n            return statusMap[status];\r\n        }\r\n    },\r\n    mounted() {},\r\n    created() {\r\n        // 将参数拷贝进查询对象\r\n        let query = this.$route.query;\r\n        this.query = Object.assign(this.query, query);\r\n        this.query.limit = parseInt(this.query.limit);\r\n        // 加载表格数据\r\n        this.getList();\r\n    }\r\n};\r\n</script>\r\n\r\n<style type=\"text/scss\" lang=\"scss\"></style>\r\n"],"sourceRoot":"src/views/project"}]}