{"remainingRequest":"D:\\DDMS\\node_modules\\thread-loader\\dist\\cjs.js!D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js!D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\project\\ItemForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\project\\ItemForm.vue","mtime":1592626873102},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"D:\\\\DDMS\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { addItem, editItem } from \"../../api/project/item.js\";\nimport { getUserList as _getUserList } from \"../../api/admin/user.js\";\nimport { getItemVosWithItemId as _getItemVosWithItemId } from \"../../api/project/team.js\";\nimport { mapGetters } from 'vuex';\nexport default {\n  data: function data() {\n    return {\n      aliasName: '项目别名',\n      userName: '总协调',\n      formData: {\n        newData: true,\n        itemId: '',\n        userId: null,\n        type: '1',\n        name: '',\n        alias: '',\n        teamList: [],\n        status: '0',\n        endDate: '',\n        contractAmountYuan: 0,\n        approverids: ''\n      },\n      statusOptions: [{\n        value: '0',\n        label: '未签'\n      }, {\n        value: '1',\n        label: '已签未付'\n      }, {\n        value: '11',\n        label: '已签已付1'\n      }, {\n        value: '12',\n        label: '已签已付2'\n      }, {\n        value: '13',\n        label: '已签已付3'\n      }, {\n        value: '14',\n        label: '已签已付4'\n      }, {\n        value: '15',\n        label: '已签已付5'\n      }, {\n        value: '5',\n        label: '付清未完成'\n      }, {\n        value: '6',\n        label: '付清已完成'\n      }, {\n        value: '9',\n        label: '结项'\n      }],\n      userOptions: [],\n      saving: false,\n      rules: {\n        type: [{\n          required: true,\n          message: '请选择类别',\n          trigger: 'change'\n        }],\n        alias: [{\n          required: true,\n          message: '请填写项目别名',\n          trigger: 'blur'\n        }],\n        userId: [{\n          required: true,\n          message: '请选择',\n          trigger: 'change'\n        }],\n        status: [{\n          required: true,\n          message: '请选择',\n          trigger: 'change'\n        }],\n        contractAmountYuan: [{\n          required: true,\n          message: '请填【与'\n        }] // endDate: [\n        //     { required: true, message: '请选择', trigger: 'change' },\n        // ]\n\n      },\n      applyUserList: [{\n        userId: '12',\n        username: '伍晓苑',\n        avatar: 'http://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaELZRia3451hkfbsd4LrTrJgNB0elwzR9LGQcGczTibaN3WvaWf5U14oSGJrQb0JTbdPSIKSF7MNhhPQ/132'\n      }],\n      applyUserList2: [{\n        userId: '14',\n        username: '徐金波',\n        avatar: 'http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI3tWGQkicicpiacbnA2PvkrgnCHXafsZUeFAB2DTmlTXDj4454J7l2NO1LLBPpFWjy85VOEiaWNMdhgw/132'\n      }]\n    };\n  },\n  created: function created() {\n    this.formData.userId = this.userId;\n    this.getUserList();\n    var editProjectInfo = JSON.parse(window.localStorage.getItem('editProjectInfo'));\n\n    if (editProjectInfo) {\n      this.typeChange(editProjectInfo.type);\n      this.formData.newData = false;\n      this.formData.itemId = editProjectInfo.itemId;\n      this.formData.userId = editProjectInfo.userId;\n      this.formData.type = editProjectInfo.type;\n      this.formData.name = editProjectInfo.name;\n      this.formData.alias = editProjectInfo.alias;\n      this.getItemVosWithItemId(editProjectInfo.itemId);\n      this.formData.status = editProjectInfo.status;\n      this.formData.endDate = editProjectInfo.endDate;\n      this.formData.contractAmountYuan = editProjectInfo.contractAmountYuan;\n    }\n  },\n  computed: _objectSpread({}, mapGetters(['permissions', 'userId'])),\n  methods: {\n    getItemVosWithItemId: function getItemVosWithItemId(itemId) {\n      var _this = this;\n\n      _getItemVosWithItemId(itemId).then(function (response) {\n        response.data.data.forEach(function (element) {\n          _this.formData.teamList.push(element.userId);\n        });\n      });\n    },\n    getUserList: function getUserList() {\n      var _this2 = this;\n\n      _getUserList().then(function (response) {\n        response.data.data.forEach(function (element) {\n          _this2.userOptions.push({\n            value: element.userId,\n            label: element.username\n          });\n        });\n      });\n    },\n    teamSelect: function teamSelect(val) {\n      console.log(val);\n    },\n    typeChange: function typeChange(val) {\n      this.aliasName = val === '1' ? '项目别名' : '产品别名';\n      this.userName = val === '1' ? '总协调' : '产品经理';\n    },\n    backHistory: function backHistory() {\n      window.localStorage.removeItem('editProjectInfo');\n      this.formData.newData = true;\n      this.formData.itemId = '';\n      this.formData.userId = '';\n      this.formData.type = '1';\n      this.formData.name = '';\n      this.formData.alias = '';\n      this.formData.status = '';\n      this.formData.endDate = '';\n      this.formData.contractAmountYuan = 0;\n      this.$router.go(-1);\n    },\n    onSubmit: function onSubmit() {\n      var _this3 = this;\n\n      if (this.formData.type == 1) {\n        this.formData.approverids = '12';\n      }\n\n      if (this.formData.type == 2) {\n        this.formData.approverids = '14';\n      }\n\n      this.$refs['formData'].validate(function (valid) {\n        if (valid) {\n          var aliasList = _this3.formData.alias.split('-');\n\n          if (aliasList.length < 2) {\n            _this3.$message.error('项目别名不规范');\n\n            return false;\n          }\n\n          _this3.saving = true;\n\n          if (!_this3.formData.newData) {\n            editItem(_this3.formData).then(function (res) {\n              if (res.data.data) {\n                _this3.backHistory();\n              }\n            }).finally(function () {\n              _this3.saving = false;\n            });\n          } else {\n            addItem(_this3.formData).then(function (res) {\n              if (res.data.data) {\n                _this3.backHistory();\n              }\n            }).finally(function () {\n              _this3.saving = false;\n            });\n          }\n        }\n      });\n    }\n  },\n  mounted: function mounted() {}\n};",null]}