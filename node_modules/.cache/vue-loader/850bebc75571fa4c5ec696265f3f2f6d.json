{"remainingRequest":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\standard\\apply\\List.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\standard\\apply\\List.vue","mtime":1588235430076},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getStandardApplyPage, putObj } from \"../../../api/standard/apply.js\";\r\nimport { mapGetters } from \"vuex\";\r\nexport default {\r\n    data() {\r\n        return {\r\n            query: {\r\n                type: null,\r\n                likeKeyWords: \"\",\r\n                current: 1,\r\n                size: 10\r\n            },\r\n            formData: {\r\n                id: \"\",\r\n                type: \"\",\r\n                content: \"\",\r\n                version: 1\r\n            },\r\n            rules: {\r\n                type: [\r\n                    { required: true, message: \"请选择类型\", trigger: \"change\" }\r\n                ],\r\n                content: [{ required: true, message: \"请输入\" }]\r\n            },\r\n            typeOptions: [\r\n                {\r\n                    value: \"1\",\r\n                    label: \"任务\"\r\n                },\r\n                {\r\n                    value: \"2\",\r\n                    label: \"外出\"\r\n                },\r\n                {\r\n                    value: \"3\",\r\n                    label: \"出差\"\r\n                },\r\n                {\r\n                    value: \"4\",\r\n                    label: \"请假\"\r\n                },\r\n                {\r\n                    value: \"5\",\r\n                    label: \"未打卡\"\r\n                },\r\n                {\r\n                    value: \"6\",\r\n                    label: \"报销\"\r\n                },\r\n                {\r\n                    value: \"7\",\r\n                    label: \"支出\"\r\n                },\r\n                {\r\n                    value: \"8\",\r\n                    label: \"开票\"\r\n                }\r\n            ],\r\n            pages: 0,\r\n            total: 0,\r\n            listLoading: false,\r\n            list: [],\r\n            dialogVisible: false,\r\n            saving: false\r\n        };\r\n    },\r\n    created() {\r\n        this.getStandardApplyPage();\r\n    },\r\n    computed: {\r\n        ...mapGetters([\"permissions\"])\r\n    },\r\n    methods: {\r\n        getStandardApplyPage() {\r\n            this.listLoading = true;\r\n            getStandardApplyPage(this.query)\r\n                .then(response => {\r\n                    this.listLoading = false;\r\n                    this.total = response.data.data.total;\r\n                    this.query.current = response.data.data.current;\r\n                    this.query.size = response.data.data.size;\r\n                    this.list = response.data.data.records;\r\n                })\r\n                .catch(() => {\r\n                    this.listLoading = false;\r\n                });\r\n        },\r\n        handleSizeChange(val) {\r\n            this.query.size = val;\r\n            this.getSupplierPage();\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.query.current = val;\r\n            this.getSupplierPage();\r\n        },\r\n        handleModal(data) {\r\n            this.formData.id = data.id;\r\n            this.formData.type = data.type;\r\n            this.formData.content = data.content;\r\n            this.formData.version = data.version;\r\n\r\n            this.dialogVisible = true;\r\n        },\r\n        handleSubmit() {\r\n            this.$refs[\"formData\"].validate(valid => {\r\n                if (valid) {\r\n                    this.saving = true;\r\n                    putObj(this.formData)\r\n                        .then(res => {\r\n                            if (res.data.data) {\r\n                                this.dialogVisible = false;\r\n                                this.getStandardApplyPage();\r\n                            }\r\n                        })\r\n                        .finally(() => {\r\n                            this.saving = false;\r\n                        });\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n",null]}