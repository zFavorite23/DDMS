{"remainingRequest":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\purchase\\execute\\Info.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\purchase\\execute\\Info.vue","mtime":1594896033955},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getPurchaseInfo, updatePurchaseApprover, getBusinessDept } from '../../../api/purchase/purchase.js';\r\nimport { mapGetters } from 'vuex';\r\nimport ElImageViewer from 'element-ui/packages/image/src/image-viewer';\r\nexport default {\r\n    components: { ElImageViewer },\r\n    data() {\r\n        return {\r\n            purchaseId: null,\r\n            purchaseInfo: '',\r\n            approverList: [],\r\n            url: '',\r\n            urls2: [],\r\n            urls1: [],\r\n            showViewer: false // 显示查看器\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapGetters(['permissions', 'userId'])\r\n    },\r\n    created() {\r\n        this.purchaseId = this.$route.params.purchaseId;\r\n        this.getPurchaseInfo();\r\n    },\r\n    methods: {\r\n        backHistory() {\r\n            this.$router.go(-1);\r\n        },\r\n        getPurchaseInfo() {\r\n            getPurchaseInfo(this.purchaseId).then(res => {\r\n                this.purchaseInfo = res.data.data;\r\n                console.log(this.purchaseInfo);\r\n                this.approverList = res.data.data.checkUserList;\r\n                this.urls2 = [];\r\n                this.urls1 = [];\r\n                if (this.purchaseInfo.pactImg) {\r\n                    this.purchaseInfo.pactImg.split(',').forEach((item, index) => {\r\n                        if (item) {\r\n                            this.urls2.push(`${window.location.origin}/apply/purchase/` + item);\r\n                        }\r\n                    });\r\n                }\r\n                if (this.purchaseInfo.purchaseImg) {\r\n                    this.purchaseInfo.purchaseImg.split(',').forEach((item, index) => {\r\n                        if (item) {\r\n                            this.urls1.push(`${window.location.origin}/apply/purchase/` + item);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        closeViewer() {\r\n            this.showViewer = false;\r\n            this.url = '';\r\n        },\r\n        onPreview2(val) {\r\n            this.url = this.urls2[val];\r\n            this.showViewer = true;\r\n        },\r\n        onPreview1(val) {\r\n            this.url = this.urls1[val];\r\n            this.showViewer = true;\r\n        }\r\n    }\r\n};\r\n",null]}