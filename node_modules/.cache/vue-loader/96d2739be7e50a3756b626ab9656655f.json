{"remainingRequest":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\apply\\businesstrip\\Info.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\apply\\businesstrip\\Info.vue","mtime":1588235430046},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {\r\n    getBusinesstripInfo,\r\n    getBusinesstripApproverList,\r\n    updateBusinesstripApprover\r\n} from \"../../../api/apply/businesstrip.js\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            formData: {\r\n                approverId: null,\r\n                checkUserId: null,\r\n                check: \"1\",\r\n                summary: \"同意\"\r\n            },\r\n            businxesstripId: null,\r\n            businxesstripInfo: null,\r\n            createTime: null,\r\n            listLoading: false,\r\n            list: [],\r\n            rules: {\r\n                summary: [{ required: true, message: \"请填写原因\" }]\r\n            },\r\n            approverList: [],\r\n            showCheck: false,\r\n            saving: false\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapGetters([\"permissions\", \"userId\"])\r\n    },\r\n    created() {\r\n        this.formData.checkUserId = this.userId;\r\n        this.businesstripId = this.$route.params.businesstripId;\r\n        this.getBusinesstripInfo();\r\n        this.getBusinesstripApproverList();\r\n    },\r\n    methods: {\r\n        getBusinesstripInfo() {\r\n            var itemName;\r\n            getBusinesstripInfo(this.businesstripId).then(response => {\r\n                this.businxesstripInfo = response.data.data;\r\n            });\r\n        },\r\n        getBusinesstripApproverList() {\r\n            getBusinesstripApproverList(this.businesstripId).then(response => {\r\n                this.approverList = response.data.data;\r\n                this.approverList.forEach((item, index) => {\r\n                    if (\r\n                        item.check == 0 &&\r\n                        item.userId == this.formData.checkUserId\r\n                    ) {\r\n                        this.formData.approverId = item.approverId;\r\n                        this.showCheck = true;\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        backHistory() {\r\n            this.$router.go(-1);\r\n        },\r\n        selectChcek() {\r\n            if (this.formData.check == 1) {\r\n                this.formData.summary = \"同意\";\r\n            } else {\r\n                this.formData.summary = \"\";\r\n            }\r\n        },\r\n        onSubmit() {\r\n            updateBusinesstripApprover(this.formData)\r\n                .then(res => {\r\n                    if (res.data.data) {\r\n                        this.backHistory();\r\n                    }\r\n                })\r\n                .finally(() => {\r\n                    this.saving = false;\r\n                });\r\n        }\r\n    }\r\n};\r\n",{"version":3,"sources":["Info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Info.vue","sourceRoot":"src/views/apply/businesstrip","sourcesContent":["<template>\r\n    <div style=\"max-width: 800px;\">\r\n        <el-button @click=\"backHistory\" class=\"back\">返回</el-button>\r\n        <div class=\"title\" style=\" margin-top: -40px;\">\r\n            <p class=\"name\">出差单</p>\r\n            <table\r\n                border=\"0\"\r\n                cellspacing=\"0\"\r\n                cellpadding=\"0\"\r\n                v-if=\"businxesstripInfo\"\r\n            >\r\n                <tr>\r\n                    <td>项目</td>\r\n                    <td v-if=\"businxesstripInfo.alias != null\">\r\n                        {{ businxesstripInfo.alias }}\r\n                    </td>\r\n                    <td v-else>与项目无关</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>申请人</td>\r\n                    <td>{{ businxesstripInfo.applyUserName }}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>目的地</td>\r\n                    <td>{{ businxesstripInfo.destinations }}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>开始日期</td>\r\n                    <td>{{ businxesstripInfo.start }}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>结束日期</td>\r\n                    <td>{{ businxesstripInfo.end }}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>出差时长</td>\r\n                    <td>{{ businxesstripInfo.days }} 天</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>出差事由</td>\r\n                    <td>{{ businxesstripInfo.reason }}</td>\r\n                </tr>\r\n                <tr>\r\n                    <td>状态</td>\r\n                    <td v-if=\"businxesstripInfo.status == 0\">\r\n                        <el-tag type=\"warning\">审批中</el-tag>\r\n                    </td>\r\n                    <td v-if=\"businxesstripInfo.status == 1\">\r\n                        <el-tag type=\"success\">已同意</el-tag>\r\n                    </td>\r\n                    <td v-if=\"businxesstripInfo.status == 2\">\r\n                        <el-tag type=\"danger\">已拒绝</el-tag>\r\n                    </td>\r\n                </tr>\r\n                <tr>\r\n                    <td>申请时间</td>\r\n                    <td>{{ businxesstripInfo.createTime }}</td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n        <div class=\"title left\">\r\n            <p class=\"name\">审批结果</p>\r\n        </div>\r\n        <div class=\"result\" v-for=\"approver in approverList\">\r\n            <el-avatar\r\n                size=\"medium\"\r\n                :src=\"approver.checkUserAvatar\"\r\n                class=\"avatar\"\r\n            ></el-avatar>\r\n            <span class=\"username\" style=\"color: #65CEA7;\">\r\n                {{ approver.checkUserName }}\r\n                <i\r\n                    class=\"el-icon-time\"\r\n                    style=\"color: #000;margin-left: 10px;margin-right: 5px\"\r\n                    v-if=\"approver.check > 0\"\r\n                ></i>\r\n                <span style=\"color: #000\" v-if=\"approver.check > 0\">{{\r\n                    approver.updateTime\r\n                }}</span>\r\n            </span>\r\n            <span\r\n                style=\"color: #000000;margin-top: 45px;position: absolute;font-size: 12px\"\r\n                >审批意见：{{ approver.summary }}</span\r\n            >\r\n            <div>\r\n                <span v-if=\"approver.check == 1\">\r\n                    <el-tag class=\"checkSty\" type=\"success\">已同意</el-tag>\r\n                </span>\r\n                <span v-if=\"approver.check == 2\">\r\n                    <el-tag class=\"checkSty\" type=\"danger\">已拒绝</el-tag>\r\n                </span>\r\n                <span v-if=\"approver.check == 0\">\r\n                    <el-tag class=\"checkSty\" type=\"warning\">审批中</el-tag>\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <div v-if=\"showCheck\">\r\n            <div class=\"title left\">\r\n                <p class=\"name\">审批</p>\r\n            </div>\r\n            <el-alert title=\"审批流程不可逆转\" type=\"warning\"> </el-alert>\r\n            <el-form\r\n                :model=\"formData\"\r\n                :rules=\"rules\"\r\n                ref=\"formData\"\r\n                label-width=\"100px\"\r\n                class=\"demo-ruleForm res\"\r\n                style=\"width: 100%\"\r\n            >\r\n                <el-radio-group\r\n                    v-model=\"formData.check\"\r\n                    @change=\"selectChcek\"\r\n                    style=\"margin-top: 10px;margin-left: 20px\"\r\n                >\r\n                    <el-radio label=\"1\">同意</el-radio>\r\n                    <el-radio label=\"2\">拒绝</el-radio>\r\n                </el-radio-group>\r\n                <el-form-item\r\n                    prop=\"summary\"\r\n                    style=\"margin-left: -100px;margin-top: 10px\"\r\n                >\r\n                    <el-input\r\n                        type=\"textarea\"\r\n                        v-model=\"formData.summary\"\r\n                        placeholder=\"请填写原因\"\r\n                        maxlength=\"30\"\r\n                        show-word-limit\r\n                    ></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button\r\n                        type=\"success\"\r\n                        class=\"submit\"\r\n                        @click=\"onSubmit\"\r\n                        :loading=\"saving\"\r\n                        >提交</el-button\r\n                    >\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {\r\n    getBusinesstripInfo,\r\n    getBusinesstripApproverList,\r\n    updateBusinesstripApprover\r\n} from \"../../../api/apply/businesstrip.js\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            formData: {\r\n                approverId: null,\r\n                checkUserId: null,\r\n                check: \"1\",\r\n                summary: \"同意\"\r\n            },\r\n            businxesstripId: null,\r\n            businxesstripInfo: null,\r\n            createTime: null,\r\n            listLoading: false,\r\n            list: [],\r\n            rules: {\r\n                summary: [{ required: true, message: \"请填写原因\" }]\r\n            },\r\n            approverList: [],\r\n            showCheck: false,\r\n            saving: false\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapGetters([\"permissions\", \"userId\"])\r\n    },\r\n    created() {\r\n        this.formData.checkUserId = this.userId;\r\n        this.businesstripId = this.$route.params.businesstripId;\r\n        this.getBusinesstripInfo();\r\n        this.getBusinesstripApproverList();\r\n    },\r\n    methods: {\r\n        getBusinesstripInfo() {\r\n            var itemName;\r\n            getBusinesstripInfo(this.businesstripId).then(response => {\r\n                this.businxesstripInfo = response.data.data;\r\n            });\r\n        },\r\n        getBusinesstripApproverList() {\r\n            getBusinesstripApproverList(this.businesstripId).then(response => {\r\n                this.approverList = response.data.data;\r\n                this.approverList.forEach((item, index) => {\r\n                    if (\r\n                        item.check == 0 &&\r\n                        item.userId == this.formData.checkUserId\r\n                    ) {\r\n                        this.formData.approverId = item.approverId;\r\n                        this.showCheck = true;\r\n                    }\r\n                });\r\n            });\r\n        },\r\n\r\n        backHistory() {\r\n            this.$router.go(-1);\r\n        },\r\n        selectChcek() {\r\n            if (this.formData.check == 1) {\r\n                this.formData.summary = \"同意\";\r\n            } else {\r\n                this.formData.summary = \"\";\r\n            }\r\n        },\r\n        onSubmit() {\r\n            updateBusinesstripApprover(this.formData)\r\n                .then(res => {\r\n                    if (res.data.data) {\r\n                        this.backHistory();\r\n                    }\r\n                })\r\n                .finally(() => {\r\n                    this.saving = false;\r\n                });\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ntable {\r\n    margin-top: 20px;\r\n    color: #1f2d3d;\r\n    width: 100%;\r\n    border-right: 1px solid #c8cbce;\r\n    border-bottom: 1px solid #c8cbce;\r\n}\r\ntable td {\r\n    padding: 10px 0;\r\n    border-left: 1px solid #c8cbce;\r\n    border-top: 1px solid #c8cbce;\r\n}\r\n.el-tag {\r\n    line-height: 16px;\r\n    height: auto;\r\n}\r\n.back {\r\n    margin-top: 10px;\r\n}\r\n.title {\r\n    text-align: center;\r\n}\r\n.name {\r\n    font-size: 21px;\r\n    color: #1f2d3d;\r\n    padding: 10px 0 5px 0;\r\n}\r\n.result {\r\n    max-width: 800px;\r\n    height: 100px;\r\n    border: 1px solid #f1f3f4;\r\n    margin-top: 50px;\r\n}\r\n.avatar {\r\n    margin-top: 20px;\r\n    margin-left: 20px;\r\n    margin-right: 20px;\r\n    height: 45px;\r\n    width: 45px;\r\n}\r\n.username {\r\n    margin-top: 22px;\r\n    position: absolute;\r\n}\r\n.res {\r\n    max-width: 800px;\r\n    height: 200px;\r\n    border: 1px solid #f1f3f4;\r\n    padding: 10px;\r\n}\r\n.submit {\r\n    float: right;\r\n    margin-top: -10px;\r\n}\r\n.checkSty {\r\n    float: right;\r\n    right: 10px;\r\n    margin-top: -60px;\r\n    position: relative;\r\n    line-height: 32px;\r\n    height: 32px;\r\n}\r\n</style>\r\n"]}]}