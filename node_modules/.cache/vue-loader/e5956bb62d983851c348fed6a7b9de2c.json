{"remainingRequest":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\other\\Process.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\other\\Process.vue","mtime":1594003824563},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getProcessPage, delProcess } from \"../../api/other/process.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n    data() {\n        return {\n            query: {\n                current: 1,\n                size: 10\n            },\n            listType: '2',\n            dialogVisible: false,\n            pages: 0,\n            total: 0,\n            listLoading: false,\n            list: [],\n            processImageUrl: null,\n        };\n    },\n    created() {\n        this.getProcessPage();\n    },\n    computed: {\n        ...mapGetters([\"permissions\"])\n    },\n    methods: {\n        getProcessPage() {\n            this.loading = true;\n            getProcessPage(this.query)\n                .then(response => {\n                    this.loading = false;\n                    //console.log(response.data.data)\n                    this.total = response.data.data.total;\n                    this.query.current = response.data.data.current;\n                    this.query.size = response.data.data.size;\n                    this.list = response.data.data.records;\n                })\n                .catch(() => {\n                    this.loading = false;\n                });\n        },\n        handleSizeChange(val) {\n            this.query.size = val;\n            this.getProcessPage();\n        },\n        handleCurrentChange(val) {\n            this.query.current = val;\n            this.getProcessPage();\n        },\n        handleImage(row) {\n            this.dialogVisible = true;\n            //this.processImageUrl = location.host + \"/act/process/resource/\"+row.deploymentId+\"/\"+row.processonDefinitionId+\"/image\"\n            this.processImageUrl = \"http://oa.dreamdeck.cn/act/process/resource/\"+row.deploymentId+\"/\"+row.processonDefinitionId+\"/image\"\n        },\n        // 删除\n        handleDel(index, row) {\n            if (row.id) {\n                this.$confirm(\"确认删除 \" + row.name + \" 吗?\", \"提示\", {\n                    type: \"warning\"\n                }).then(() => {\n                    delProcess(row.id).then(res => {\n                        console.log(res)\n                        this.getModelPage();\n                    });\n                });\n            }\n        },\n        openList(val) {\n            if (val == 1) {\n                this.$router.push({\n                    path: '/other/act'\n                });\n            }\n        },\n    },\n    mounted() {}\n};\n",{"version":3,"sources":["Process.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Process.vue","sourceRoot":"src/views/other","sourcesContent":["<template>\r\n    <div>\r\n        <div>\r\n            <span class=\"tit\">流程管理 / 总数 : {{ total }}</span>\r\n            <el-form :inline=\"true\" :model=\"query\">\r\n                <el-form-item>\r\n                    <el-input\r\n                        clearable\r\n                        v-model=\"query.username\"\r\n                        placeholder=\"关键字\"\r\n                    ></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button\r\n                        type=\"primary\"\r\n                        size=\"medium\"\r\n                        v-on:click=\"getModelPage()\"\r\n                        icon=\"el-icon-search\"\r\n                    >搜索</el-button\r\n                    >\r\n                </el-form-item>\r\n            </el-form>\r\n            <el-radio-group v-model=\"listType\" style=\"float: right;\" @change=\"openList\">\r\n                <el-radio-button label=\"1\">模型管理</el-radio-button>\r\n                <el-radio-button label=\"2\">流程管理</el-radio-button>\r\n            </el-radio-group>\r\n        </div>\r\n        <el-table\r\n            :data=\"list\"\r\n            stripe\r\n            border\r\n            v-loading=\"listLoading\"\r\n            style=\"width: 100%;\"\r\n        >\r\n            <el-table-column\r\n                prop=\"deploymentId\"\r\n                min-width=\"120\"\r\n                label=\"流程ID\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"key\"\r\n                min-width=\"120\"\r\n                label=\"流程标识\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"category\"\r\n                min-width=\"120\"\r\n                label=\"流程分类\"\r\n            ></el-table-column>\r\n            <el-table-column\r\n                prop=\"name\"\r\n                min-width=\"120\"\r\n                label=\"流程名称\"\r\n            ></el-table-column>\r\n            <el-table-column label=\"操作\" min-width=\"240\" fixed=\"right\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button\r\n                        type=\"success\"\r\n                        size=\"mini\"\r\n                        @click.native=\"handleImage(scope.row)\">流程图</el-button >\r\n                    <el-button\r\n                        size=\"mini\"\r\n                        type=\"danger\"\r\n                        @click.native=\"handleDel(scope.$index, scope.row)\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-pagination\r\n            class=\"right\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"query.current\"\r\n            :page-sizes=\"[10, 20, 50, 100]\"\r\n            :page-size=\"query.size\"\r\n            layout=\"total, sizes, prev, pager, next\"\r\n            :total=\"total\"\r\n        >\r\n        </el-pagination>\r\n\r\n        <el-dialog\r\n            title=\"流程图\"\r\n            @click=\"dialogVisible = true\"\r\n            :visible.sync=\"dialogVisible\">\r\n            <el-image :src=\"processImageUrl\"></el-image>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\n    import { getProcessPage, delProcess } from \"../../api/other/process.js\";\r\n    import { mapGetters } from \"vuex\";\r\n    export default {\r\n        data() {\r\n            return {\r\n                query: {\r\n                    current: 1,\r\n                    size: 10\r\n                },\r\n                listType: '2',\r\n                dialogVisible: false,\r\n                pages: 0,\r\n                total: 0,\r\n                listLoading: false,\r\n                list: [],\r\n                processImageUrl: null,\r\n            };\r\n        },\r\n        created() {\r\n            this.getProcessPage();\r\n        },\r\n        computed: {\r\n            ...mapGetters([\"permissions\"])\r\n        },\r\n        methods: {\r\n            getProcessPage() {\r\n                this.loading = true;\r\n                getProcessPage(this.query)\r\n                    .then(response => {\r\n                        this.loading = false;\r\n                        //console.log(response.data.data)\r\n                        this.total = response.data.data.total;\r\n                        this.query.current = response.data.data.current;\r\n                        this.query.size = response.data.data.size;\r\n                        this.list = response.data.data.records;\r\n                    })\r\n                    .catch(() => {\r\n                        this.loading = false;\r\n                    });\r\n            },\r\n            handleSizeChange(val) {\r\n                this.query.size = val;\r\n                this.getProcessPage();\r\n            },\r\n            handleCurrentChange(val) {\r\n                this.query.current = val;\r\n                this.getProcessPage();\r\n            },\r\n            handleImage(row) {\r\n                this.dialogVisible = true;\r\n                //this.processImageUrl = location.host + \"/act/process/resource/\"+row.deploymentId+\"/\"+row.processonDefinitionId+\"/image\"\r\n                this.processImageUrl = \"http://oa.dreamdeck.cn/act/process/resource/\"+row.deploymentId+\"/\"+row.processonDefinitionId+\"/image\"\r\n            },\r\n            // 删除\r\n            handleDel(index, row) {\r\n                if (row.id) {\r\n                    this.$confirm(\"确认删除 \" + row.name + \" 吗?\", \"提示\", {\r\n                        type: \"warning\"\r\n                    }).then(() => {\r\n                        delProcess(row.id).then(res => {\r\n                            console.log(res)\r\n                            this.getModelPage();\r\n                        });\r\n                    });\r\n                }\r\n            },\r\n            openList(val) {\r\n                if (val == 1) {\r\n                    this.$router.push({\r\n                        path: '/other/act'\r\n                    });\r\n                }\r\n            },\r\n        },\r\n        mounted() {}\r\n    };\r\n</script>\r\n<style type=\"text/scss\" lang=\"scss\" scoped>\r\n    .el-input .el-input__count .el-input__count-inner {\r\n        height: 50%;\r\n    }\r\n    @media (min-width: 600px) {\r\n        .zzz {\r\n            display: none;\r\n        }\r\n    }\r\n    .el-image img {\r\n        border-radius: 50%;\r\n    }\r\n</style>\r\n"]}]}