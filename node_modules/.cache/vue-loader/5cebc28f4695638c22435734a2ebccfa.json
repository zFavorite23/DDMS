{"remainingRequest":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\apply\\receipt\\Info.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\apply\\receipt\\Info.vue","mtime":1592276948863},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getReceiptInfo, getReceiptApproverList, updateReceiptApprover } from '../../../api/apply/receipt.js';\nimport { mapGetters } from 'vuex';\n\nexport default {\n    data() {\n        return {\n            formData: {\n                approverId: null,\n                checkUserId: null,\n                check: '1',\n                summary: '同意'\n            },\n            receiptId: null,\n            receiptInfo: null,\n            listLoading: false,\n            list: [],\n            approverList: [],\n            rules: {\n                summary: [{ required: true, message: '请填写批注' }]\n            },\n            showCheck: false,\n            saving: false\n        };\n    },\n    computed: {\n        ...mapGetters(['permissions', 'userId'])\n    },\n    created() {\n        this.receiptId = this.$route.params.receiptId;\n        this.formData.checkUserId = this.userId;\n\n        this.getReceiptInfo();\n        this.getReceiptApproverList();\n    },\n    methods: {\n        getReceiptInfo() {\n            getReceiptInfo(this.receiptId).then(response => {\n                this.receiptInfo = response.data.data;\n                this.receiptInfo.detailedList = `${window.location.origin}/apply/receipt/` + this.receiptInfo.detailedList;\n            });\n        },\n        //\n        getReceiptApproverList() {\n            getReceiptApproverList(this.receiptId).then(response => {\n                this.approverList = response.data.data;\n\n                this.approverList.forEach((item, index) => {\n                    if (item.check == 0 && item.isBeing == 1 && item.userId == this.formData.checkUserId) {\n                        console.log(item);\n                        this.formData.approverId = item.approverId;\n                        this.showCheck = true;\n                    }\n                });\n            });\n        },\n        handleClick(tab, event) {\n            // console.log(tab, event);\n        },\n        backHistory() {\n            this.$router.go(-1);\n        },\n        selectChcek() {\n            if (this.formData.check == 1) {\n                this.formData.summary = '同意';\n            } else {\n                this.formData.summary = '';\n            }\n        },\n        onSubmit() {\n            updateReceiptApprover(this.formData)\n                .then(res => {\n                    if (res.data.data) {\n                        this.backHistory();\n                    }\n                })\n                .finally(() => {\n                    this.saving = false;\n                });\n        }\n    }\n};\n",null]}