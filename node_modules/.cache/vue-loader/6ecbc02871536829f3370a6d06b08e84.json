{"remainingRequest":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\apply\\receipt\\Info.vue?vue&type=style&index=0&id=78f6bbe0&scoped=true&lang=css&","dependencies":[{"path":"D:\\DDMS\\src\\views\\apply\\receipt\\Info.vue","mtime":1588242028947},{"path":"D:\\DDMS\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ntable {\n    margin-top: 20px;\n    color: #1f2d3d;\n    width: 100%;\n    border-right: 1px solid #c8cbce;\n    border-bottom: 1px solid #c8cbce;\n}\ntable td {\n    padding: 10px 0;\n    border-left: 1px solid #c8cbce;\n    border-top: 1px solid #c8cbce;\n}\n.el-tag {\n    line-height: 16px;\n    height: auto;\n}\n.back {\n    margin-top: 10px;\n}\n.title {\n    text-align: center;\n}\n.name {\n    font-size: 21px;\n    color: #1f2d3d;\n    padding: 10px 0 5px 0;\n}\n.time {\n    font-size: 16px;\n    color: #9d9e61;\n    padding: 10px 0;\n}\n.result {\n    max-width: 800px;\n    height: 100px;\n    border: 1px solid #f1f3f4;\n    margin-bottom: 10px;\n}\n.avatar {\n    margin-top: 20px;\n    margin-left: 20px;\n    margin-right: 20px;\n    height: 45px;\n    width: 45px;\n}\n.username {\n    margin-top: 22px;\n    position: absolute;\n}\n.res {\n    max-width: 800px;\n    height: 200px;\n    border: 1px solid #f1f3f4;\n    padding: 10px;\n}\n.submit {\n    float: right;\n    margin-top: -10px;\n}\n.checkSty {\n    float: right;\n    right: 10px;\n    margin-top: -60px;\n    position: relative;\n    line-height: 32px;\n    height: 32px;\n}\n",{"version":3,"sources":["Info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Info.vue","sourceRoot":"src/views/apply/receipt","sourcesContent":["<template>\n    <div style=\"max-width: 800px;\">\n        <el-button @click=\"backHistory\" class=\"back\">返回</el-button>\n        <div class=\"title\" style=\" margin-top: -40px;margin-bottom: 20px;\">\n            <p class=\"name\">开票申请单</p>\n            <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" v-if=\"receiptInfo\">\n                <tr>\n                    <td style=\"width: 35%;\">项目</td>\n                    <td v-if=\"receiptInfo.alias != null\">{{ receiptInfo.alias }}</td>\n                    <td v-else>与项目无关</td>\n                </tr>\n                <tr>\n                    <td>申请人</td>\n                    <td>{{ receiptInfo.applyUserName }}</td>\n                </tr>\n                <tr>\n                    <td>开票公司</td>\n                    <td v-if=\"receiptInfo.companyId == 1\">北京甲板智慧科技有限公司</td>\n                    <td v-if=\"receiptInfo.companyId == 2\">北京甲板数字科技有限公司</td>\n                </tr>\n                <tr>\n                    <td>发票类型</td>\n                    <td v-if=\"receiptInfo.type == 1\">专票</td>\n                    <td v-else-if=\"receiptInfo.type == 2\">普票</td>\n                    <td v-else>未识别</td>\n                </tr>\n                <tr>\n                    <td>公司名称</td>\n                    <td>{{ receiptInfo.name }}</td>\n                </tr>\n                <tr>\n                    <td>公司税号</td>\n                    <td>{{ receiptInfo.dutyParagraph }}</td>\n                </tr>\n                <tr v-if=\"receiptInfo.type == 1\">\n                    <td>公司注册地址</td>\n                    <td>{{ receiptInfo.address }}</td>\n                </tr>\n                <tr v-if=\"receiptInfo.type == 1\">\n                    <td>公司电话</td>\n                    <td>{{ receiptInfo.telephone }}</td>\n                </tr>\n                <tr v-if=\"receiptInfo.type == 1\">\n                    <td>开户行名称</td>\n                    <td>{{ receiptInfo.bankName }}</td>\n                </tr>\n                <tr v-if=\"receiptInfo.type == 1\">\n                    <td>开户行账号</td>\n                    <td>{{ receiptInfo.bankAccount }}</td>\n                </tr>\n                <tr>\n                    <td>开票百分比</td>\n                    <td>{{ receiptInfo.proportion }} %</td>\n                </tr>\n                <tr>\n                    <td>开票金额</td>\n                    <td>{{ receiptInfo.priceYuan }} 元</td>\n                </tr>\n                <tr>\n                    <td>开票内容</td>\n                    <td v-if=\"receiptInfo.content == 11\">*研发和技术服务*专业技术服务</td>\n                    <td v-else-if=\"receiptInfo.content == 12\">*研发和技术服务*软件开发</td>\n                    <td v-else-if=\"receiptInfo.content == 13\">*设计服务*专业设计服务</td>\n                    <td v-else-if=\"receiptInfo.content == 14\">*其他咨询服务*其他咨询服务</td>\n                    <td v-else-if=\"receiptInfo.content == 21\">*印刷品*图片、设计图样及照片</td>\n                    <td v-else-if=\"receiptInfo.content == 22\">*软件*系统软件产品</td>\n                    <td v-else-if=\"receiptInfo.content == 23\">*硬件*</td>\n                    <td v-else-if=\"receiptInfo.content == 24\">*现代服务*服务费</td>\n                    <td v-else>{{ receiptInfo.content }}</td>\n                </tr>\n                <tr>\n                    <td>开票备注</td>\n                    <td>{{ receiptInfo.remark }}</td>\n                </tr>\n                <tr v-if=\"receiptInfo.content == 23\">\n                    <td>产品清单</td>\n                    <td><a :href=\"receiptInfo.detailedList\">下载</a></td>\n                </tr>\n                <tr>\n                    <td>是否与对方确认</td>\n                    <td v-if=\"receiptInfo.isAffirm == 0\"><el-tag type=\"danger\">否</el-tag></td>\n                    <td v-if=\"receiptInfo.isAffirm == 1\"><el-tag type=\"success\">是</el-tag></td>\n                </tr>\n                <tr>\n                    <td>状态</td>\n                    <td v-if=\"receiptInfo.status == 0\"><el-tag type=\"warning\">审批中</el-tag></td>\n                    <td v-if=\"receiptInfo.status == 1\"><el-tag type=\"success\">已同意</el-tag></td>\n                    <td v-if=\"receiptInfo.status == 2\"><el-tag type=\"danger\">已拒绝</el-tag></td>\n                </tr>\n                <tr>\n                    <td>申请时间</td>\n                    <td>{{ receiptInfo.createTime }}</td>\n                </tr>\n            </table>\n        </div>\n        <div><p class=\"name\">审批结果</p></div>\n        <div class=\"result\" v-for=\"approver in approverList\">\n            <el-avatar size=\"medium\" :src=\"approver.checkUserAvatar\" class=\"avatar\"></el-avatar>\n            <span class=\"username\" style=\"color: #65CEA7;\">\n                {{ approver.checkUserName }}\n                <i class=\"el-icon-time\" style=\"color: #000;margin-left: 10px;margin-right: 5px\" v-if=\"approver.check > 0\"></i>\n                <span style=\"color: #000\" v-if=\"approver.check > 0\">{{ approver.updateTime }}</span>\n            </span>\n            <span style=\"color: #000000;margin-top: 45px;position: absolute;font-size: 12px\">审批意见：{{ approver.summary }}</span>\n            <div>\n                <span v-if=\"approver.check == 0 && approver.isBeing == 1\">\n                    <el-tag class=\"checkSty\" type=\"warning\">\n                        <i class=\"el-icon-loading\" style=\"margin-right:5px\"></i>\n                        审批中\n                    </el-tag>\n                </span>\n                <span v-if=\"approver.check == 0 && approver.isBeing == 0\">\n                    <el-tag class=\"checkSty\" type=\"\">\n                        <i class=\"el-icon-loading\" style=\"margin-right:5px\"></i>\n                        待审批\n                    </el-tag>\n                </span>\n                <span v-if=\"approver.check == 1\">\n                    <el-tag class=\"checkSty\" type=\"success\">\n                        <i class=\"el-icon-success\" style=\"margin-right:5px\"></i>\n                        已同意\n                    </el-tag>\n                </span>\n                <span v-if=\"approver.check == 2\">\n                    <el-tag class=\"checkSty\" type=\"danger\">\n                        <i class=\"el-icon-error\" style=\"margin-right:5px\"></i>\n                        已拒绝\n                    </el-tag>\n                </span>\n            </div>\n        </div>\n        <div v-if=\"showCheck\">\n            <div class=\"title left\"><p class=\"name\">审批</p></div>\n            <el-alert title=\"审批流程不可逆转\" type=\"warning\"></el-alert>\n            <el-form :model=\"formData\" :rules=\"rules\" ref=\"formData\" label-width=\"100px\" class=\"demo-ruleForm res\" style=\"width: 100%\">\n                <el-radio-group v-model=\"formData.check\" @change=\"selectChcek\" style=\"margin-top: 10px;margin-left: 20px\">\n                    <el-radio label=\"1\">同意</el-radio>\n                    <el-radio label=\"2\">拒绝</el-radio>\n                </el-radio-group>\n                <el-form-item prop=\"summary\" style=\"margin-left: -100px;margin-top: 10px\">\n                    <el-input type=\"textarea\" v-model=\"formData.summary\" placeholder=\"请填写原因\" maxlength=\"30\" show-word-limit></el-input>\n                </el-form-item>\n                <el-form-item><el-button type=\"success\" class=\"submit\" @click=\"onSubmit\" :loading=\"saving\">提交</el-button></el-form-item>\n            </el-form>\n        </div>\n    </div>\n</template>\n<script>\nimport { getReceiptInfo, getReceiptApproverList, updateReceiptApprover } from '../../../api/apply/receipt.js';\nimport { mapGetters } from 'vuex';\n\nexport default {\n    data() {\n        return {\n            formData: {\n                approverId: null,\n                checkUserId: null,\n                check: '1',\n                summary: '同意'\n            },\n            receiptId: null,\n            receiptInfo: null,\n            listLoading: false,\n            list: [],\n            approverList: [],\n            rules: {\n                summary: [{ required: true, message: '请填写批注' }]\n            },\n            showCheck: false,\n            saving: false\n        };\n    },\n    computed: {\n        ...mapGetters(['permissions', 'userId'])\n    },\n    created() {\n        this.receiptId = this.$route.params.receiptId;\n        this.formData.checkUserId = this.userId;\n\n        this.getReceiptInfo();\n        this.getReceiptApproverList();\n    },\n    methods: {\n        getReceiptInfo() {\n            getReceiptInfo(this.receiptId).then(response => {\n                this.receiptInfo = response.data.data;\n                this.receiptInfo.detailedList = `${window.location.origin}/apply/receipt/` + this.receiptInfo.detailedList;\n            });\n        },\n        //\n        getReceiptApproverList() {\n            getReceiptApproverList(this.receiptId).then(response => {\n                this.approverList = response.data.data;\n\n                this.approverList.forEach((item, index) => {\n                    if (item.check == 0 && item.isBeing == 1 && item.userId == this.formData.checkUserId) {\n                        console.log(item);\n                        this.formData.approverId = item.approverId;\n                        this.showCheck = true;\n                    }\n                });\n            });\n        },\n        handleClick(tab, event) {\n            // console.log(tab, event);\n        },\n        backHistory() {\n            this.$router.go(-1);\n        },\n        selectChcek() {\n            if (this.formData.check == 1) {\n                this.formData.summary = '同意';\n            } else {\n                this.formData.summary = '';\n            }\n        },\n        onSubmit() {\n            updateReceiptApprover(this.formData)\n                .then(res => {\n                    if (res.data.data) {\n                        this.backHistory();\n                    }\n                })\n                .finally(() => {\n                    this.saving = false;\n                });\n        }\n    }\n};\n</script>\n\n<style scoped>\ntable {\n    margin-top: 20px;\n    color: #1f2d3d;\n    width: 100%;\n    border-right: 1px solid #c8cbce;\n    border-bottom: 1px solid #c8cbce;\n}\ntable td {\n    padding: 10px 0;\n    border-left: 1px solid #c8cbce;\n    border-top: 1px solid #c8cbce;\n}\n.el-tag {\n    line-height: 16px;\n    height: auto;\n}\n.back {\n    margin-top: 10px;\n}\n.title {\n    text-align: center;\n}\n.name {\n    font-size: 21px;\n    color: #1f2d3d;\n    padding: 10px 0 5px 0;\n}\n.time {\n    font-size: 16px;\n    color: #9d9e61;\n    padding: 10px 0;\n}\n.result {\n    max-width: 800px;\n    height: 100px;\n    border: 1px solid #f1f3f4;\n    margin-bottom: 10px;\n}\n.avatar {\n    margin-top: 20px;\n    margin-left: 20px;\n    margin-right: 20px;\n    height: 45px;\n    width: 45px;\n}\n.username {\n    margin-top: 22px;\n    position: absolute;\n}\n.res {\n    max-width: 800px;\n    height: 200px;\n    border: 1px solid #f1f3f4;\n    padding: 10px;\n}\n.submit {\n    float: right;\n    margin-top: -10px;\n}\n.checkSty {\n    float: right;\n    right: 10px;\n    margin-top: -60px;\n    position: relative;\n    line-height: 32px;\n    height: 32px;\n}\n</style>\n"]}]}