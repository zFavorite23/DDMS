{"remainingRequest":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\purchase\\execute\\Info.vue?vue&type=style&index=0&id=1e9768cc&scoped=true&lang=css&","dependencies":[{"path":"D:\\DDMS\\src\\views\\purchase\\execute\\Info.vue","mtime":1594896033955},{"path":"D:\\DDMS\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.paste {\r\n    display: none;\r\n}\r\n.line {\r\n    display: none;\r\n}\r\n@page {\r\n    size: auto; /* auto is the initial value */\r\n    margin: 0mm; /* this affects the margin in the printer settings */\r\n}\r\nhtml {\r\n    background-color: #ffffff;\r\n    margin: 0px; /* this affects the margin on the html before sending to printer */\r\n}\r\nbody {\r\n    border: solid 1px blue;\r\n    margin: 10mm 15mm 10mm 15mm; /* margin you want for the content */\r\n}\r\ntable {\r\n    margin-top: 20px;\r\n    color: #1f2d3d;\r\n    width: 100%;\r\n    border-right: 1px solid #1f2d3d;\r\n    border-bottom: 1px solid #1f2d3d;\r\n}\r\ntable td {\r\n    padding: 10px 0;\r\n    border-left: 1px solid #1f2d3d;\r\n    border-top: 1px solid #1f2d3d;\r\n}\r\n.el-tag {\r\n    line-height: 16px;\r\n    height: auto;\r\n}\r\n.el-image {\r\n    width: 100px;\r\n}\r\n.submit {\r\n    float: right;\r\n    margin-top: -10px;\r\n}\r\n.back {\r\n    margin-top: 10px;\r\n}\r\n.title {\r\n    text-align: center;\r\n}\r\n.name {\r\n    font-size: 21px;\r\n    color: #1f2d3d;\r\n    padding: 10px 0 5px 0;\r\n    text-align: center;\r\n}\r\n.time {\r\n    font-size: 16px;\r\n    color: #9d9e61;\r\n    padding: 10px 0;\r\n}\r\n.result {\r\n    max-width: 800px;\r\n    height: 100px;\r\n    border: 1px solid #f1f3f4;\r\n    margin-bottom: 10px;\r\n}\r\n.avatar {\r\n    margin-top: 20px;\r\n    margin-left: 20px;\r\n    margin-right: 20px;\r\n    height: 45px;\r\n    width: 45px;\r\n}\r\n.username {\r\n    margin-top: 22px;\r\n    position: absolute;\r\n}\r\n.res {\r\n    max-width: 800px;\r\n    height: 225px;\r\n    border: 1px solid #f1f3f4;\r\n    padding: 10px;\r\n}\r\n.submit {\r\n    float: right;\r\n    margin-top: -10px;\r\n}\r\n\r\n.checkSty {\r\n    float: right;\r\n    right: 10px;\r\n    margin-top: -60px;\r\n    position: relative;\r\n    line-height: 32px;\r\n    height: 32px;\r\n}\r\n.result {\r\n    max-width: 800px;\r\n    height: 100px;\r\n    border: 1px solid #f1f3f4;\r\n    margin-bottom: 10px;\r\n}\r\n.avatar {\r\n    margin-top: 20px;\r\n    margin-left: 20px;\r\n    margin-right: 20px;\r\n    height: 45px;\r\n    width: 45px;\r\n}\r\n.print {\r\n    float: right;\r\n    background-color: #65cea7;\r\n    color: #ffffff;\r\n    position: absolute;\r\n    right: 3%;\r\n}\r\n",{"version":3,"sources":["Info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Info.vue","sourceRoot":"src/views/purchase/execute","sourcesContent":["<template>\r\n    <div>\r\n        <el-button @click=\"backHistory\" class=\"back\">返回</el-button>\r\n\r\n        <el-row :gutter=\"20\">\r\n            <el-col :xs=\"{ span: 24 }\" :md=\"{ span: 12 }\">\r\n                <div class=\"title\" style=\"margin-bottom:20px;\">\r\n                    <p class=\"name\">采购申请单</p>\r\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\r\n                        <tr>\r\n                            <td>申请人</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.applyUserName }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>项目名称</td>\r\n                            <td colspan=\"3\" v-if=\"purchaseInfo.alias != null && purchaseInfo.aliasNext == null\">{{ purchaseInfo.alias }}</td>\n                            <td colspan=\"3\" v-else-if=\"purchaseInfo.alias != null && purchaseInfo.aliasNext != null\">{{ purchaseInfo.aliasNext }} / {{ purchaseInfo.alias }}</td>\n                            <td colspan=\"3\" v-else>与项目无关</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td width=\"100\">总分类</td>\r\n                            <td>{{ purchaseInfo.type1Name }}</td>\r\n\r\n                            <td width=\"100\">明细分类</td>\r\n                            <td>{{ purchaseInfo.type3Name }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>采购物品名称</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.name }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>数量</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.num }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>单价</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.priceYuan }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>总价</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.guessPriceYuan }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>具体需求</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.demand }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>京东/淘宝链接</td>\r\n                            <td colspan=\"3\"><el-link type=\"primary\" :href=\"purchaseInfo.buyUrl\" target=\"_blank\">链接</el-link></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>备注</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.remark }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>收货地址</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.contact }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>预计到货时间</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.guessTime }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>型号参数</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.model }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>型号参数图片</td>\r\n                            <td colspan=\"3\" v-if=\"purchaseInfo.purchaseImg\">\r\n                                <el-image v-for=\"(url, index) in urls1\" :key=\"url\" :src=\"url\" lazy @click=\"onPreview1(index)\"></el-image>\r\n                                <el-image-viewer v-if=\"showViewer\" :on-close=\"closeViewer\" :url-list=\"[url]\"></el-image-viewer>\r\n                            </td>\r\n                            <td colspan=\"3\" v-else><span>无</span></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>状态</td>\r\n                            <td colspan=\"3\" v-if=\"purchaseInfo.status == 0\"><el-tag type=\"warning\">审批中</el-tag></td>\r\n                            <td colspan=\"3\" v-if=\"purchaseInfo.status == 1\"><el-tag type=\"success\">已同意</el-tag></td>\r\n                            <td colspan=\"3\" v-if=\"purchaseInfo.status == 2\"><el-tag type=\"danger\">已拒绝</el-tag></td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n                <div><p class=\"name\">审批结果</p></div>\r\n                <div class=\"result\" v-for=\"approver in approverList\">\r\n                    <el-avatar size=\"medium\" :src=\"approver.checkUserAvatar\" class=\"avatar\"></el-avatar>\r\n                    <span class=\"username\" style=\"color: #65CEA7;\">\r\n                        {{ approver.checkUserName }}\r\n                        <i class=\"el-icon-time\" style=\"color: #000;margin-left: 10px;margin-right: 5px\" v-if=\"approver.check > 0\"></i>\r\n                        <span style=\"color: #000\" v-if=\"approver.check > 0\">{{ approver.updateTime }}</span>\r\n                    </span>\r\n                    <span style=\"color: #000000;margin-top: 45px;position: absolute;font-size: 12px\">审批意见：{{ approver.summary }}</span>\r\n                    <div>\r\n                        <span v-if=\"approver.check == 0 && approver.isBeing == 1\">\r\n                            <el-tag class=\"checkSty\" type=\"warning\">\r\n                                <i class=\"el-icon-loading\" style=\"margin-right:5px\"></i>\r\n                                审批中\r\n                            </el-tag>\r\n                        </span>\r\n                        <span v-if=\"approver.check == 0 && approver.isBeing == 0\">\r\n                            <el-tag class=\"checkSty\" type=\"\">\r\n                                <i class=\"el-icon-loading\" style=\"margin-right:5px\"></i>\r\n                                待审批\r\n                            </el-tag>\r\n                        </span>\r\n                        <span v-if=\"approver.check == 1\">\r\n                            <el-tag class=\"checkSty\" type=\"success\">\r\n                                <i class=\"el-icon-success\" style=\"margin-right:5px\"></i>\r\n                                已同意\r\n                            </el-tag>\r\n                        </span>\r\n                        <span v-if=\"approver.check == 2\">\r\n                            <el-tag class=\"checkSty\" type=\"danger\">\r\n                                <i class=\"el-icon-error\" style=\"margin-right:5px\"></i>\r\n                                已拒绝\r\n                            </el-tag>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </el-col>\r\n            <el-col :xs=\"{ span: 24 }\" :md=\"{ span: 12 }\">\r\n                <div class=\"title\" style=\"margin-bottom:20px;\">\r\n                    <p class=\"name\">采购执行单</p>\r\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\r\n                        <tr>\r\n                            <td>是否对公</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.isOpen == 1 ? '是' : '否' }}</td>\r\n                        </tr>\r\n                        <tr v-if=\"purchaseInfo.isOpen != 2\">\r\n                            <td>公司名称</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.companyName }}</td>\r\n                        </tr>\r\n                        <tr></tr>\r\n                        <tr v-if=\"purchaseInfo.isOpen != 2\">\r\n                            <td>开户行名称</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.bankName }}</td>\r\n                        </tr>\r\n                        <tr v-if=\"purchaseInfo.isOpen != 2\">\r\n                            <td>开户行账号</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.bankAccount }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>采购进展</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.purchaseStatus }}</td>\r\n                        </tr>\r\n                        <tr v-if=\"purchaseInfo.isOpen != 2\">\r\n                            <td>合同金额</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.pactPriceYuan }}</td>\r\n                        </tr>\r\n                        <tr v-if=\"purchaseInfo.isOpen != 2\">\r\n                            <td>合同附件图片</td>\r\n                            <td colspan=\"3\" v-if=\"purchaseInfo.pactImg\">\r\n                                <el-image v-for=\"(url, index) in urls2\" :key=\"url\" :src=\"url\" lazy @click=\"onPreview2(index)\"></el-image>\r\n                                <el-image-viewer v-if=\"showViewer\" :on-close=\"closeViewer\" :url-list=\"[url]\"></el-image-viewer>\r\n                            </td>\r\n                            <td colspan=\"3\" v-else>无</td>\r\n                        </tr>\r\n                        <tr v-if=\"purchaseInfo.isOpen != 1\">\r\n                            <td>实付金额</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.relPriceYuan == 0.0 ? '' : purchaseInfo.relPriceYuan }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td width=\"100\">物流公司</td>\r\n                            <td>{{ purchaseInfo.expressName }}</td>\r\n\r\n                            <td width=\"100\">单号</td>\r\n                            <td>{{ purchaseInfo.expressNum }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>发票进展</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.invoiceStatus }}</td>\r\n                        </tr>\r\n                        <tr v-if=\"purchaseInfo.isOpen == 1\">\r\n                            <td>支出状态</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.payStatus }}</td>\r\n                        </tr>\r\n                        <tr v-if=\"purchaseInfo.isOpen == 2\">\r\n                            <td>报销状态</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.payStatus == 1 ? '已报销' : '未报销' }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>备注信息</td>\r\n                            <td colspan=\"3\">{{ purchaseInfo.performNote }}</td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { getPurchaseInfo, updatePurchaseApprover, getBusinessDept } from '../../../api/purchase/purchase.js';\r\nimport { mapGetters } from 'vuex';\r\nimport ElImageViewer from 'element-ui/packages/image/src/image-viewer';\r\nexport default {\r\n    components: { ElImageViewer },\r\n    data() {\r\n        return {\r\n            purchaseId: null,\r\n            purchaseInfo: '',\r\n            approverList: [],\r\n            url: '',\r\n            urls2: [],\r\n            urls1: [],\r\n            showViewer: false // 显示查看器\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapGetters(['permissions', 'userId'])\r\n    },\r\n    created() {\r\n        this.purchaseId = this.$route.params.purchaseId;\r\n        this.getPurchaseInfo();\r\n    },\r\n    methods: {\r\n        backHistory() {\r\n            this.$router.go(-1);\r\n        },\r\n        getPurchaseInfo() {\r\n            getPurchaseInfo(this.purchaseId).then(res => {\r\n                this.purchaseInfo = res.data.data;\r\n                console.log(this.purchaseInfo);\r\n                this.approverList = res.data.data.checkUserList;\r\n                this.urls2 = [];\r\n                this.urls1 = [];\r\n                if (this.purchaseInfo.pactImg) {\r\n                    this.purchaseInfo.pactImg.split(',').forEach((item, index) => {\r\n                        if (item) {\r\n                            this.urls2.push(`${window.location.origin}/apply/purchase/` + item);\r\n                        }\r\n                    });\r\n                }\r\n                if (this.purchaseInfo.purchaseImg) {\r\n                    this.purchaseInfo.purchaseImg.split(',').forEach((item, index) => {\r\n                        if (item) {\r\n                            this.urls1.push(`${window.location.origin}/apply/purchase/` + item);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        closeViewer() {\r\n            this.showViewer = false;\r\n            this.url = '';\r\n        },\r\n        onPreview2(val) {\r\n            this.url = this.urls2[val];\r\n            this.showViewer = true;\r\n        },\r\n        onPreview1(val) {\r\n            this.url = this.urls1[val];\r\n            this.showViewer = true;\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.paste {\r\n    display: none;\r\n}\r\n.line {\r\n    display: none;\r\n}\r\n@page {\r\n    size: auto; /* auto is the initial value */\r\n    margin: 0mm; /* this affects the margin in the printer settings */\r\n}\r\nhtml {\r\n    background-color: #ffffff;\r\n    margin: 0px; /* this affects the margin on the html before sending to printer */\r\n}\r\nbody {\r\n    border: solid 1px blue;\r\n    margin: 10mm 15mm 10mm 15mm; /* margin you want for the content */\r\n}\r\ntable {\r\n    margin-top: 20px;\r\n    color: #1f2d3d;\r\n    width: 100%;\r\n    border-right: 1px solid #1f2d3d;\r\n    border-bottom: 1px solid #1f2d3d;\r\n}\r\ntable td {\r\n    padding: 10px 0;\r\n    border-left: 1px solid #1f2d3d;\r\n    border-top: 1px solid #1f2d3d;\r\n}\r\n.el-tag {\r\n    line-height: 16px;\r\n    height: auto;\r\n}\r\n.el-image {\r\n    width: 100px;\r\n}\r\n.submit {\r\n    float: right;\r\n    margin-top: -10px;\r\n}\r\n.back {\r\n    margin-top: 10px;\r\n}\r\n.title {\r\n    text-align: center;\r\n}\r\n.name {\r\n    font-size: 21px;\r\n    color: #1f2d3d;\r\n    padding: 10px 0 5px 0;\r\n    text-align: center;\r\n}\r\n.time {\r\n    font-size: 16px;\r\n    color: #9d9e61;\r\n    padding: 10px 0;\r\n}\r\n.result {\r\n    max-width: 800px;\r\n    height: 100px;\r\n    border: 1px solid #f1f3f4;\r\n    margin-bottom: 10px;\r\n}\r\n.avatar {\r\n    margin-top: 20px;\r\n    margin-left: 20px;\r\n    margin-right: 20px;\r\n    height: 45px;\r\n    width: 45px;\r\n}\r\n.username {\r\n    margin-top: 22px;\r\n    position: absolute;\r\n}\r\n.res {\r\n    max-width: 800px;\r\n    height: 225px;\r\n    border: 1px solid #f1f3f4;\r\n    padding: 10px;\r\n}\r\n.submit {\r\n    float: right;\r\n    margin-top: -10px;\r\n}\r\n\r\n.checkSty {\r\n    float: right;\r\n    right: 10px;\r\n    margin-top: -60px;\r\n    position: relative;\r\n    line-height: 32px;\r\n    height: 32px;\r\n}\r\n.result {\r\n    max-width: 800px;\r\n    height: 100px;\r\n    border: 1px solid #f1f3f4;\r\n    margin-bottom: 10px;\r\n}\r\n.avatar {\r\n    margin-top: 20px;\r\n    margin-left: 20px;\r\n    margin-right: 20px;\r\n    height: 45px;\r\n    width: 45px;\r\n}\r\n.print {\r\n    float: right;\r\n    background-color: #65cea7;\r\n    color: #ffffff;\r\n    position: absolute;\r\n    right: 3%;\r\n}\r\n</style>\n"]}]}