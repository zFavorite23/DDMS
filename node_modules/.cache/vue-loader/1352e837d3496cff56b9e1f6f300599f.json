{"remainingRequest":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\DDMS\\src\\views\\ability\\company\\Manhour.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\DDMS\\src\\views\\ability\\company\\Manhour.vue","mtime":1588235430038},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\DDMS\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getBarRefuse, getBarApproverids } from \"../../../api/apply/manhour.js\";\nimport { dateFormat } from \"../../../utils/date.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n    data() {\n        return {\n            query: {\n                startDay: dateFormat(new Date()).substr(0, 7) + \"-01\",\n                endDay: dateFormat(new Date()),\n                sortType: \"1\"\n            },\n            listLoading: false,\n            list: [],\n            optionBar1: {\n                title: {\n                    text: '工时填报被拒次数统计图',\n                    y: \"bottom\",\n                    left: \"center\"\n                },\n                tooltip: {\n                    trigger: 'axis'\n                },\n                xAxis: [\n                    {\n                        type: 'category',\n                        data: [],\n                        axisTick: {\n                            alignWithLabel: true\n                        }\n                    }\n                ],\n                yAxis: [\n                    {\n                        type: 'value'\n                    }\n                ],\n                color: ['#6495ED'],\n                series: [\n                    {\n                        name: '被拒次数',\n                        type: 'bar',\n                        barWidth: '60%',\n                        data: []\n                    }\n                ]\n            },\n            optionBar2: {\n                title: {\n                    text: '工时填报有/无人验收统计图',\n                    y: \"bottom\",\n                    left: \"center\"\n                },\n                tooltip: {\n                    trigger: 'axis'\n                },\n                legend: {\n                    y: \"top\",\n                    data: ['无人验收', '有人验收']\n                },\n                xAxis: [\n                    {\n                        type: \"category\",\n                        data: []\n                    }\n                ],\n                yAxis: [\n                    {\n                        type: \"value\"\n                    }\n                ],\n                series: [\n                    {\n                        name: \"无人验收\",\n                        type: \"bar\",\n                        color: \"#778899\",\n                        stack: \"1\",\n                        data: []\n                    },\n                    {\n                        name: \"有人验收\",\n                        type: \"bar\",\n                        color: \"#32CD32\",\n                        stack: \"1\",\n                        data: []\n                    }\n                ]\n            }\n        };\n    },\n    computed: {\n        ...mapGetters([\"permissions\"])\n    },\n    created() {\n        this.getBarRefuse();\n        this.$nextTick(function() {\n            this.drawBar();\n        });\n    },\n    mounted() {},\n    methods: {\n        getBarRefuse(){\n            this.listLoading = true;\n            getBarRefuse(this.query)\n                .then(response => {\n                    this.listLoading = false;\n                    this.list = response.data.data;\n                    this.list.forEach((item, index) => {\n                        //console.log(item)\n                        this.optionBar1.xAxis[0].data.push(item.name);\n                        this.optionBar1.series[0].data.push(item.totalNum);\n                    });\n\n                    this.getBarApproverids();\n                })\n        },\n        getBarApproverids() {\n            this.listLoading = true;\n            getBarApproverids(this.query)\n                .then(response => {\n                    this.listLoading = false;\n                    this.list = response.data.data;\n                    this.list.forEach((item, index) => {\n                        //console.log(item)\n                        this.optionBar2.xAxis[0].data.push(item.name);\n                        this.optionBar2.series[0].data.push(item.noHour);\n                        this.optionBar2.series[1].data.push(item.yesHour);\n                    });\n\n                    this.drawBar();\n                })\n        },\n        drawBar() {\n            let bar1 = this.$echarts.init(document.getElementById(\"manhourBar1\"));\n            let bar2 = this.$echarts.init(document.getElementById(\"manhourBar2\"));\n\n            bar1.setOption(this.optionBar1, (window.onresize = bar1.resize));\n            bar2.setOption(this.optionBar2, (window.onresize = bar2.resize));\n            bar1.resize();\n            bar2.resize();\n            window.addEventListener(\"resize\", function() {\n                bar1.resize();\n                bar2.resize();\n            });\n        }\n    }\n};\n",null]}